/*! For license information please see main.bd66b74b.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:o.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:E.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+C(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),I(a,t,i,"",function(e){return e})):null!=a&&(N(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var u=0;u<e.length;u++){var c=s+C(o=e[u],u);l+=I(o,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=I(o=o.value,t,i,c=s+C(o,u++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,D(_);else{var t=r(c);null!==t&&O(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(N),N=-1),p=!0;var s=f;try{for(w(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(u)&&i(u),w(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&O(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,k=!1,S=null,N=-1,T=5,C=-1;function I(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?E():(k=!1,S=null)}}else k=!1}if("function"===typeof b)E=function(){b(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,E=function(){R.postMessage(null)}}else E=function(){y(A,0)};function D(e){S=e,k||(k=!0,E())}function O(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(N),N=-1):g=!0,O(x,s-a))):(e.sortIndex=o,n(u,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(Re){var t=Re.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Ce){var r=Ce}Reflect.construct(e,[],t)}else{try{t.call()}catch(Ce){r=Ce}e.call(t.prototype)}else{try{throw Error()}catch(Ce){r=Ce}e()}}catch(Ce){if(Ce&&r&&"string"===typeof Ce.stack){for(var i=Ce.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case S:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(Re){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]})});var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function ke(e){if(e=Ci(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=Ai(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ae(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Pe(e,t){return e(t)}function De(){}var Oe=!1;function je(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Pe(e,t,n)}finally{Oe=!1,(null!==_e||null!==Ee)&&(De(),Ae())}}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=Ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ve=!1;if(c)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(Ie){Ve=!1}function $e(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var qe=!1,He=null,We=!1,Ke=null,Ge={onError:function(e){qe=!0,He=e}};function Qe(e,t,n,r,i,s,a,o,l){qe=!1,He=null,$e.apply(Ge,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(s(188))}function Ze(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?et(e):null}function et(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=et(e);if(null!==t)return t;e=e.sibling}return null}var tt=i.unstable_scheduleCallback,nt=i.unstable_cancelCallback,rt=i.unstable_shouldYield,st=i.unstable_requestPaint,at=i.unstable_now,ot=i.unstable_getCurrentPriorityLevel,lt=i.unstable_ImmediatePriority,ut=i.unstable_UserBlockingPriority,ct=i.unstable_NormalPriority,ht=i.unstable_LowPriority,dt=i.unstable_IdlePriority,ft=null,pt=null;var mt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(gt(e)/yt|0)|0},gt=Math.log,yt=Math.LN2;var vt=64,bt=4194304;function wt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=wt(o):0!==(s&=a)&&(r=wt(s))}else 0!==(a=n&~i)?r=wt(a):0!==s&&(r=wt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-mt(t)),r|=e[n],t&=~i;return r}function _t(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Et(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function kt(){var e=vt;return 0===(4194240&(vt<<=1))&&(vt=64),e}function St(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-mt(t)]=n}function Tt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-mt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ct=0;function It(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var At,Pt,Rt,Dt,Ot,jt=!1,Lt=[],Mt=null,Ut=null,Ft=null,Vt=new Map,zt=new Map,Bt=[],$t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Ut=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":Vt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zt.delete(t.pointerId)}}function Ht(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ci(t))&&Pt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Wt(e){var t=Ti(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void Ot(e.priority,function(){Rt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Kt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ci(n))&&Pt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Gt(e,t,n){Kt(e)&&n.delete(t)}function Qt(){jt=!1,null!==Mt&&Kt(Mt)&&(Mt=null),null!==Ut&&Kt(Ut)&&(Ut=null),null!==Ft&&Kt(Ft)&&(Ft=null),Vt.forEach(Gt),zt.forEach(Gt)}function Yt(e,t){e.blockedOn===t&&(e.blockedOn=null,jt||(jt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Qt)))}function Xt(e){function t(t){return Yt(t,e)}if(0<Lt.length){Yt(Lt[0],e);for(var n=1;n<Lt.length;n++){var r=Lt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&Yt(Mt,e),null!==Ut&&Yt(Ut,e),null!==Ft&&Yt(Ft,e),Vt.forEach(t),zt.forEach(t),n=0;n<Bt.length;n++)(r=Bt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Bt.length&&null===(n=Bt[0]).blockedOn;)Wt(n),null===n.blockedOn&&Bt.shift()}var Jt=w.ReactCurrentBatchConfig,Zt=!0;function en(e,t,n,r){var i=Ct,s=Jt.transition;Jt.transition=null;try{Ct=1,nn(e,t,n,r)}finally{Ct=i,Jt.transition=s}}function tn(e,t,n,r){var i=Ct,s=Jt.transition;Jt.transition=null;try{Ct=4,nn(e,t,n,r)}finally{Ct=i,Jt.transition=s}}function nn(e,t,n,r){if(Zt){var i=sn(e,t,n,r);if(null===i)Zr(e,t,r,rn,n),qt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Mt=Ht(Mt,e,t,n,r,i),!0;case"dragenter":return Ut=Ht(Ut,e,t,n,r,i),!0;case"mouseover":return Ft=Ht(Ft,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Vt.set(s,Ht(Vt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zt.set(s,Ht(zt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(qt(e,r),4&t&&-1<$t.indexOf(e)){for(;null!==i;){var s=Ci(i);if(null!==s&&At(s),null===(s=sn(e,t,n,r))&&Zr(e,t,r,rn,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var rn=null;function sn(e,t,n,r){if(rn=null,null!==(e=Ti(e=we(r))))if(null===(t=Ye(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Xe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rn=e,null}function an(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ot()){case lt:return 1;case ut:return 4;case ct:case ht:return 16;case dt:return 536870912;default:return 16}default:return 16}}var on=null,ln=null,un=null;function cn(){if(un)return un;var e,t,n=ln,r=n.length,i="value"in on?on.value:on.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return un=i.slice(e,1<t?1-t:void 0)}function hn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function dn(){return!0}function fn(){return!1}function pn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?dn:fn,this.isPropagationStopped=fn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=dn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=dn)},persist:function(){},isPersistent:dn}),t}var mn,gn,yn,vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bn=pn(vn),wn=M({},vn,{view:0,detail:0}),xn=pn(wn),_n=M({},wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yn&&(yn&&"mousemove"===e.type?(mn=e.screenX-yn.screenX,gn=e.screenY-yn.screenY):gn=mn=0,yn=e),mn)},movementY:function(e){return"movementY"in e?e.movementY:gn}}),En=pn(_n),kn=pn(M({},_n,{dataTransfer:0})),Sn=pn(M({},wn,{relatedTarget:0})),Nn=pn(M({},vn,{animationName:0,elapsedTime:0,pseudoElement:0})),Tn=M({},vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cn=pn(Tn),In=pn(M({},vn,{data:0})),An={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Rn[e])&&!!t[e]}function On(){return Dn}var jn=M({},wn,{key:function(e){if(e.key){var t=An[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=hn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(e){return"keypress"===e.type?hn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?hn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ln=pn(jn),Mn=pn(M({},_n,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Un=pn(M({},wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On})),Fn=pn(M({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Vn=M({},_n,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zn=pn(Vn),Bn=[9,13,27,32],$n=c&&"CompositionEvent"in window,qn=null;c&&"documentMode"in document&&(qn=document.documentMode);var Hn=c&&"TextEvent"in window&&!qn,Wn=c&&(!$n||qn&&8<qn&&11>=qn),Kn=String.fromCharCode(32),Gn=!1;function Qn(e,t){switch(e){case"keyup":return-1!==Bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Xn=!1;var Jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Jn[e.type]:"textarea"===t}function er(e,t,n,r){Se(r),0<(t=ti(t,"onChange")).length&&(n=new bn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var tr=null,nr=null;function rr(e){Kr(e,0)}function ir(e){if(K(Ii(e)))return e}function sr(e,t){if("change"===e)return t}var ar=!1;if(c){var or;if(c){var lr="oninput"in document;if(!lr){var ur=document.createElement("div");ur.setAttribute("oninput","return;"),lr="function"===typeof ur.oninput}or=lr}else or=!1;ar=or&&(!document.documentMode||9<document.documentMode)}function cr(){tr&&(tr.detachEvent("onpropertychange",hr),nr=tr=null)}function hr(e){if("value"===e.propertyName&&ir(nr)){var t=[];er(t,nr,e,we(e)),je(rr,t)}}function dr(e,t,n){"focusin"===e?(cr(),nr=n,(tr=t).attachEvent("onpropertychange",hr)):"focusout"===e&&cr()}function fr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ir(nr)}function pr(e,t){if("click"===e)return ir(t)}function mr(e,t){if("input"===e||"change"===e)return ir(t)}var gr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function yr(e,t){if(gr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!gr(e[i],t[i]))return!1}return!0}function vr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function br(e,t){var n,r=vr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vr(r)}}function wr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?wr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function xr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(Le){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function _r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Er(e){var t=xr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wr(n.ownerDocument.documentElement,n)){if(null!==r&&_r(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=br(n,s);var a=br(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kr=c&&"documentMode"in document&&11>=document.documentMode,Sr=null,Nr=null,Tr=null,Cr=!1;function Ir(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Cr||null==Sr||Sr!==G(r)||("selectionStart"in(r=Sr)&&_r(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Tr&&yr(Tr,r)||(Tr=r,0<(r=ti(Nr,"onSelect")).length&&(t=new bn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Sr)))}function Ar(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionend:Ar("Transition","TransitionEnd")},Rr={},Dr={};function Or(e){if(Rr[e])return Rr[e];if(!Pr[e])return e;var t,n=Pr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Dr)return Rr[e]=n[t];return e}c&&(Dr=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);var jr=Or("animationend"),Lr=Or("animationiteration"),Mr=Or("animationstart"),Ur=Or("transitionend"),Fr=new Map,Vr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(e,t){Fr.set(e,t),l(t,[e])}for(var Br=0;Br<Vr.length;Br++){var $r=Vr[Br];zr($r.toLowerCase(),"on"+($r[0].toUpperCase()+$r.slice(1)))}zr(jr,"onAnimationEnd"),zr(Lr,"onAnimationIteration"),zr(Mr,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(Ur,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hr=new Set("cancel close invalid load scroll toggle".split(" ").concat(qr));function Wr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,u){if(Qe.apply(this,arguments),qe){if(!qe)throw Error(s(198));var c=He;qe=!1,He=null,We||(We=!0,Ke=c)}}(r,t,void 0,e),e.currentTarget=null}function Kr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Wr(i,o,u),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Wr(i,o,u),s=l}}}if(We)throw e=Ke,We=!1,Ke=null,e}function Gr(e,t){var n=t[ki];void 0===n&&(n=t[ki]=new Set);var r=e+"__bubble";n.has(r)||(Jr(t,e,2,!1),n.add(r))}function Qr(e,t,n){var r=0;t&&(r|=4),Jr(n,e,r,t)}var Yr="_reactListening"+Math.random().toString(36).slice(2);function Xr(e){if(!e[Yr]){e[Yr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Hr.has(t)||Qr(t,!1,e),Qr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Yr]||(t[Yr]=!0,Qr("selectionchange",!1,t))}}function Jr(e,t,n,r){switch(an(t)){case 1:var i=en;break;case 4:i=tn;break;default:i=nn}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=Ti(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}je(function(){var r=s,i=we(n),a=[];e:{var o=Fr.get(e);if(void 0!==o){var l=bn,u=e;switch(e){case"keypress":if(0===hn(n))break e;case"keydown":case"keyup":l=Ln;break;case"focusin":u="focus",l=Sn;break;case"focusout":u="blur",l=Sn;break;case"beforeblur":case"afterblur":l=Sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=En;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=kn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Un;break;case jr:case Lr:case Mr:l=Nn;break;case Ur:l=Fn;break;case"scroll":l=xn;break;case"wheel":l=zn;break;case"copy":case"cut":case"paste":l=Cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Ue(p,d))&&c.push(ei(p,m,f)))),h)break;p=p.return}0<c.length&&(o=new l(o,u,null,n,i),a.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!Ti(u)&&!u[Ei])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ti(u):null)&&(u!==(h=Ye(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=En,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Mn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:Ii(l),f=null==u?o:Ii(u),(o=new c(m,p+"leave",l,n,i)).target=h,o.relatedTarget=f,m=null,Ti(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=ni(f))p++;for(f=0,m=d;m;m=ni(m))f++;for(;0<p-f;)c=ni(c),p--;for(;0<f-p;)d=ni(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=ni(c),d=ni(d)}c=null}else c=null;null!==l&&ri(a,o,l,c,!1),null!==u&&null!==h&&ri(a,h,u,c,!0)}if("select"===(l=(o=r?Ii(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=sr;else if(Zn(o))if(ar)g=mr;else{g=fr;var y=dr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=pr);switch(g&&(g=g(e,r))?er(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?Ii(r):window,e){case"focusin":(Zn(y)||"true"===y.contentEditable)&&(Sr=y,Nr=r,Tr=null);break;case"focusout":Tr=Nr=Sr=null;break;case"mousedown":Cr=!0;break;case"contextmenu":case"mouseup":case"dragend":Cr=!1,Ir(a,n,i);break;case"selectionchange":if(kr)break;case"keydown":case"keyup":Ir(a,n,i)}var v;if($n)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Xn?Qn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Wn&&"ko"!==n.locale&&(Xn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Xn&&(v=cn()):(ln="value"in(on=i)?on.value:on.textContent,Xn=!0)),0<(y=ti(r,b)).length&&(b=new In(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Yn(n))&&(b.data=v))),(v=Hn?function(e,t){switch(e){case"compositionend":return Yn(t);case"keypress":return 32!==t.which?null:(Gn=!0,Kn);case"textInput":return(e=t.data)===Kn&&Gn?null:e;default:return null}}(e,n):function(e,t){if(Xn)return"compositionend"===e||!$n&&Qn(e,t)?(e=cn(),un=ln=on=null,Xn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=ti(r,"onBeforeInput")).length&&(i=new In("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Kr(a,t)})}function ei(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ti(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ue(e,n))&&r.unshift(ei(e,s,i)),null!=(s=Ue(e,t))&&r.push(ei(e,s,i))),e=e.return}return r}function ni(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function ri(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,i?null!=(l=Ue(n,s))&&a.unshift(ei(n,l,o)):i||null!=(l=Ue(n,s))&&a.push(ei(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ii=/\r\n?/g,si=/\u0000|\uFFFD/g;function ai(e){return("string"===typeof e?e:""+e).replace(ii,"\n").replace(si,"")}function oi(e,t,n){if(t=ai(t),ai(e)!==t&&n)throw Error(s(425))}function li(){}var ui=null,ci=null;function hi(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var di="function"===typeof setTimeout?setTimeout:void 0,fi="function"===typeof clearTimeout?clearTimeout:void 0,pi="function"===typeof Promise?Promise:void 0,mi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof pi?function(e){return pi.resolve(null).then(e).catch(gi)}:di;function gi(e){setTimeout(function(){throw e})}function yi(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Xt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Xt(t)}function vi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function bi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var wi=Math.random().toString(36).slice(2),xi="__reactFiber$"+wi,_i="__reactProps$"+wi,Ei="__reactContainer$"+wi,ki="__reactEvents$"+wi,Si="__reactListeners$"+wi,Ni="__reactHandles$"+wi;function Ti(e){var t=e[xi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ei]||n[xi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bi(e);null!==e;){if(n=e[xi])return n;e=bi(e)}return t}n=(e=n).parentNode}return null}function Ci(e){return!(e=e[xi]||e[Ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Ai(e){return e[_i]||null}var Pi=[],Ri=-1;function Di(e){return{current:e}}function Oi(e){0>Ri||(e.current=Pi[Ri],Pi[Ri]=null,Ri--)}function ji(e,t){Ri++,Pi[Ri]=e.current,e.current=t}var Li={},Mi=Di(Li),Ui=Di(!1),Fi=Li;function Vi(e,t){var n=e.type.contextTypes;if(!n)return Li;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function zi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Bi(){Oi(Ui),Oi(Mi)}function $i(e,t,n){if(Mi.current!==Li)throw Error(s(168));ji(Mi,t),ji(Ui,n)}function qi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return M({},n,r)}function Hi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Li,Fi=Mi.current,ji(Mi,e),ji(Ui,Ui.current),!0}function Wi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=qi(e,t,Fi),r.__reactInternalMemoizedMergedChildContext=e,Oi(Ui),Oi(Mi),ji(Mi,e)):Oi(Ui),ji(Ui,n)}var Ki=null,Gi=!1,Qi=!1;function Yi(e){null===Ki?Ki=[e]:Ki.push(e)}function Xi(){if(!Qi&&null!==Ki){Qi=!0;var e=0,t=Ct;try{var n=Ki;for(Ct=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ki=null,Gi=!1}catch(Ne){throw null!==Ki&&(Ki=Ki.slice(e+1)),tt(lt,Xi),Ne}finally{Ct=t,Qi=!1}}return null}var Ji=[],Zi=0,es=null,ts=0,ns=[],rs=0,is=null,ss=1,as="";function os(e,t){Ji[Zi++]=ts,Ji[Zi++]=es,es=e,ts=t}function ls(e,t,n){ns[rs++]=ss,ns[rs++]=as,ns[rs++]=is,is=e;var r=ss;e=as;var i=32-mt(r)-1;r&=~(1<<i),n+=1;var s=32-mt(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ss=1<<32-mt(t)+i|n<<i|r,as=s+e}else ss=1<<s|n<<i|r,as=e}function us(e){null!==e.return&&(os(e,1),ls(e,1,0))}function cs(e){for(;e===es;)es=Ji[--Zi],Ji[Zi]=null,ts=Ji[--Zi],Ji[Zi]=null;for(;e===is;)is=ns[--rs],ns[rs]=null,as=ns[--rs],ns[rs]=null,ss=ns[--rs],ns[rs]=null}var hs=null,ds=null,fs=!1,ps=null;function ms(e,t){var n=Vu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function gs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,hs=e,ds=vi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,hs=e,ds=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==is?{id:ss,overflow:as}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Vu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,hs=e,ds=null,!0);default:return!1}}function ys(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function vs(e){if(fs){var t=ds;if(t){var n=t;if(!gs(e,t)){if(ys(e))throw Error(s(418));t=vi(n.nextSibling);var r=hs;t&&gs(e,t)?ms(r,n):(e.flags=-4097&e.flags|2,fs=!1,hs=e)}}else{if(ys(e))throw Error(s(418));e.flags=-4097&e.flags|2,fs=!1,hs=e}}}function bs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;hs=e}function ws(e){if(e!==hs)return!1;if(!fs)return bs(e),fs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!hi(e.type,e.memoizedProps)),t&&(t=ds)){if(ys(e))throw xs(),Error(s(418));for(;t;)ms(e,t),t=vi(t.nextSibling)}if(bs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ds=vi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ds=null}}else ds=hs?vi(e.stateNode.nextSibling):null;return!0}function xs(){for(var e=ds;e;)e=vi(e.nextSibling)}function _s(){ds=hs=null,fs=!1}function Es(e){null===ps?ps=[e]:ps.push(e)}var ks=w.ReactCurrentBatchConfig;function Ss(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ns(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ts(e){return(0,e._init)(e._payload)}function Cs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Bu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Ts(s)===t.type)?((r=i(t,n.props)).ref=Ss(e,t,n),r.return=e,r):((r=$u(n.type,n.key,n.props,null,e.mode,r)).ref=Ss(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ku(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=qu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Wu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=$u(t.type,t.key,t.props,null,e.mode,n)).ref=Ss(e,null,t),n.return=e,n;case _:return(t=Ku(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=qu(t,e.mode,n,null)).return=e,t;Ns(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:h(e,t,n,r,null);Ns(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return h(t,e=e.get(n)||null,r,i,null);Ns(t,r)}return null}function m(i,s,o,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=a(y,s,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===o.length)return n(i,h),fs&&os(i,m),u;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],l))&&(s=a(h,s,m),null===c?u=h:c.sibling=h,c=h);return fs&&os(i,m),u}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach(function(e){return t(i,e)}),fs&&os(i,m),u}function g(i,o,l,u){var c=j(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),fs&&os(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(o=a(v,o,g),null===h?c=v:h.sibling=v,h=v);return fs&&os(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),fs&&os(i,g),c}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var u=a.key,c=s;null!==c;){if(c.key===u){if((u=a.type)===E){if(7===c.tag){n(r,c.sibling),(s=i(c,a.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&Ts(u)===c.type){n(r,c.sibling),(s=i(c,a.props)).ref=Ss(r,c,a),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===E?((s=qu(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=$u(a.type,a.key,a.props,null,r.mode,l)).ref=Ss(r,s,a),l.return=r,r=l)}return o(r);case _:e:{for(c=a.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Ku(a,r.mode,l)).return=r,r=s}return o(r);case R:return e(r,s,(c=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(j(a))return g(r,s,a,l);Ns(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Wu(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var Is=Cs(!0),As=Cs(!1),Ps=Di(null),Rs=null,Ds=null,Os=null;function js(){Os=Ds=Rs=null}function Ls(e){var t=Ps.current;Oi(Ps),e._currentValue=t}function Ms(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Us(e,t){Rs=e,Os=Ds=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Co=!0),e.firstContext=null)}function Fs(e){var t=e._currentValue;if(Os!==e)if(e={context:e,memoizedValue:t,next:null},null===Ds){if(null===Rs)throw Error(s(308));Ds=e,Rs.dependencies={lanes:0,firstContext:e}}else Ds=Ds.next=e;return t}var Vs=null;function zs(e){null===Vs?Vs=[e]:Vs.push(e)}function Bs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,zs(t)):(n.next=i.next,i.next=n),t.interleaved=n,$s(e,r)}function $s(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var qs=!1;function Hs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ws(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ks(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ml)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,$s(e,n)}return null===(i=r.interleaved)?(t.next=t,zs(r)):(t.next=i.next,i.next=t),r.interleaved=t,$s(e,n)}function Qs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Tt(e,n)}}function Ys(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xs(e,t,n,r){var i=e.updateQueue;qs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,c=u=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:qs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Hl|=a,e.lanes=a,e.memoizedState=h}}function Js(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Zs={},ea=Di(Zs),ta=Di(Zs),na=Di(Zs);function ra(e){if(e===Zs)throw Error(s(174));return e}function ia(e,t){switch(ji(na,t),ji(ta,e),ji(ea,Zs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Oi(ea),ji(ea,t)}function sa(){Oi(ea),Oi(ta),Oi(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=le(t,e.type);t!==n&&(ji(ta,e),ji(ea,n))}function oa(e){ta.current===e&&(Oi(ea),Oi(ta))}var la=Di(0);function ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function ha(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var da=w.ReactCurrentDispatcher,fa=w.ReactCurrentBatchConfig,pa=0,ma=null,ga=null,ya=null,va=!1,ba=!1,wa=0,xa=0;function _a(){throw Error(s(321))}function Ea(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gr(e[n],t[n]))return!1;return!0}function ka(e,t,n,r,i,a){if(pa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,da.current=null===e||null===e.memoizedState?oo:lo,e=n(r,i),ba){a=0;do{if(ba=!1,wa=0,25<=a)throw Error(s(301));a+=1,ya=ga=null,t.updateQueue=null,da.current=uo,e=n(r,i)}while(ba)}if(da.current=ao,t=null!==ga&&null!==ga.next,pa=0,ya=ga=ma=null,va=!1,t)throw Error(s(300));return e}function Sa(){var e=0!==wa;return wa=0,e}function Na(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ma.memoizedState=ya=e:ya=ya.next=e,ya}function Ta(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ya?ma.memoizedState:ya.next;if(null!==t)ya=t,ga=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?ma.memoizedState=ya=e:ya=ya.next=e}return ya}function Ca(e,t){return"function"===typeof t?t(e):t}function Ia(e){var t=Ta(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,u=null,c=a;do{var h=c.lane;if((pa&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,o=r):u=u.next=d,ma.lanes|=h,Hl|=h}c=c.next}while(null!==c&&c!==a);null===u?o=r:u.next=l,gr(r,t.memoizedState)||(Co=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,ma.lanes|=a,Hl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Aa(e){var t=Ta(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);gr(a,t.memoizedState)||(Co=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Pa(){}function Ra(e,t){var n=ma,r=Ta(),i=t(),a=!gr(r.memoizedState,i);if(a&&(r.memoizedState=i,Co=!0),r=r.queue,qa(ja.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Fa(9,Oa.bind(null,n,r,i,t),void 0,null),null===Ul)throw Error(s(349));0!==(30&pa)||Da(n,t,i)}return i}function Da(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oa(e,t,n,r){t.value=n,t.getSnapshot=r,La(t)&&Ma(e)}function ja(e,t,n){return n(function(){La(t)&&Ma(e)})}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gr(e,n)}catch(Le){return!0}}function Ma(e){var t=$s(e,1);null!==t&&hu(t,e,1,-1)}function Ua(e){var t=Na();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:e},t.queue=e,e=e.dispatch=no.bind(null,ma,e),[t.memoizedState,e]}function Fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Va(){return Ta().memoizedState}function za(e,t,n,r){var i=Na();ma.flags|=e,i.memoizedState=Fa(1|t,n,void 0,void 0===r?null:r)}function Ba(e,t,n,r){var i=Ta();r=void 0===r?null:r;var s=void 0;if(null!==ga){var a=ga.memoizedState;if(s=a.destroy,null!==r&&Ea(r,a.deps))return void(i.memoizedState=Fa(t,n,s,r))}ma.flags|=e,i.memoizedState=Fa(1|t,n,s,r)}function $a(e,t){return za(8390656,8,e,t)}function qa(e,t){return Ba(2048,8,e,t)}function Ha(e,t){return Ba(4,2,e,t)}function Wa(e,t){return Ba(4,4,e,t)}function Ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ga(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4,4,Ka.bind(null,t,e),n)}function Qa(){}function Ya(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ea(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ea(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ja(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,Co=!0),e.memoizedState=n):(gr(n,t)||(n=kt(),ma.lanes|=n,Hl|=n,e.baseState=!0),t)}function Za(e,t){var n=Ct;Ct=0!==n&&4>n?n:4,e(!0);var r=fa.transition;fa.transition={};try{e(!1),t()}finally{Ct=n,fa.transition=r}}function eo(){return Ta().memoizedState}function to(e,t,n){var r=cu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ro(e))io(t,n);else if(null!==(n=Bs(e,t,n,r))){hu(n,e,r,uu()),so(n,t,r)}}function no(e,t,n){var r=cu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ro(e))io(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,gr(o,a)){var l=t.interleaved;return null===l?(i.next=i,zs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(Ce){}null!==(n=Bs(e,t,i,r))&&(hu(n,e,r,i=uu()),so(n,t,r))}}function ro(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function io(e,t){ba=va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function so(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Tt(e,n)}}var ao={readContext:Fs,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},oo={readContext:Fs,useCallback:function(e,t){return Na().memoizedState=[e,void 0===t?null:t],e},useContext:Fs,useEffect:$a,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,za(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return za(4194308,4,e,t)},useInsertionEffect:function(e,t){return za(4,2,e,t)},useMemo:function(e,t){var n=Na();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Na();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=to.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Na().memoizedState=e},useState:Ua,useDebugValue:Qa,useDeferredValue:function(e){return Na().memoizedState=e},useTransition:function(){var e=Ua(!1),t=e[0];return e=Za.bind(null,e[1]),Na().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,i=Na();if(fs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ul)throw Error(s(349));0!==(30&pa)||Da(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,$a(ja.bind(null,r,a,e),[e]),r.flags|=2048,Fa(9,Oa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Na(),t=Ul.identifierPrefix;if(fs){var n=as;t=":"+t+"R"+(n=(ss&~(1<<32-mt(ss)-1)).toString(32)+n),0<(n=wa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lo={readContext:Fs,useCallback:Ya,useContext:Fs,useEffect:qa,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Xa,useReducer:Ia,useRef:Va,useState:function(){return Ia(Ca)},useDebugValue:Qa,useDeferredValue:function(e){return Ja(Ta(),ga.memoizedState,e)},useTransition:function(){return[Ia(Ca)[0],Ta().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Ra,useId:eo,unstable_isNewReconciler:!1},uo={readContext:Fs,useCallback:Ya,useContext:Fs,useEffect:qa,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Xa,useReducer:Aa,useRef:Va,useState:function(){return Aa(Ca)},useDebugValue:Qa,useDeferredValue:function(e){var t=Ta();return null===ga?t.memoizedState=e:Ja(t,ga.memoizedState,e)},useTransition:function(){return[Aa(Ca)[0],Ta().memoizedState]},useMutableSource:Pa,useSyncExternalStore:Ra,useId:eo,unstable_isNewReconciler:!1};function co(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=uu(),i=cu(e),s=Ks(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Gs(e,s,i))&&(hu(t,e,i,r),Qs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=uu(),i=cu(e),s=Ks(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Gs(e,s,i))&&(hu(t,e,i,r),Qs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=uu(),r=cu(e),i=Ks(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Gs(e,i,r))&&(hu(t,e,r,n),Qs(t,e,r))}};function po(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!yr(n,r)||!yr(i,s))}function mo(e,t,n){var r=!1,i=Li,s=t.contextType;return"object"===typeof s&&null!==s?s=Fs(s):(i=zi(t)?Fi:Mi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Vi(e,i):Li),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function yo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Hs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Fs(s):(s=zi(t)?Fi:Mi.current,i.context=Vi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ho(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&fo.enqueueReplaceState(i,i.state,null),Xs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function vo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(Me){i="\nError generating stack: "+Me.message+"\n"+Me.stack}return{value:e,source:t,stack:i,digest:null}}function bo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function wo(e,t){try{console.error(t.value)}catch(Re){setTimeout(function(){throw Re})}}var xo="function"===typeof WeakMap?WeakMap:Map;function _o(e,t,n){(n=Ks(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zl||(Zl=!0,eu=r),wo(0,t)},n}function Eo(e,t,n){(n=Ks(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){wo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){wo(0,t),"function"!==typeof r&&(null===tu?tu=new Set([this]):tu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ko(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new xo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ou.bind(null,e,t,n),t.then(e,e))}function So(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function No(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ks(-1,1)).tag=2,Gs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var To=w.ReactCurrentOwner,Co=!1;function Io(e,t,n,r){t.child=null===e?As(t,null,n,r):Is(t,e.child,n,r)}function Ao(e,t,n,r,i){n=n.render;var s=t.ref;return Us(t,i),r=ka(e,t,n,r,s,i),n=Sa(),null===e||Co?(fs&&n&&us(t),t.flags|=1,Io(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zo(e,t,i))}function Po(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||zu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=$u(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ro(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:yr)(a,r)&&e.ref===t.ref)return Zo(e,t,i)}return t.flags|=1,(e=Bu(s,r)).ref=t.ref,e.return=t,t.child=e}function Ro(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(yr(s,r)&&e.ref===t.ref){if(Co=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Zo(e,t,i);0!==(131072&e.flags)&&(Co=!0)}}return jo(e,t,n,r,i)}function Do(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ji(Bl,zl),zl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ji(Bl,zl),zl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ji(Bl,zl),zl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ji(Bl,zl),zl|=r;return Io(e,t,i,n),t.child}function Oo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function jo(e,t,n,r,i){var s=zi(n)?Fi:Mi.current;return s=Vi(t,s),Us(t,i),n=ka(e,t,n,r,s,i),r=Sa(),null===e||Co?(fs&&r&&us(t),t.flags|=1,Io(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zo(e,t,i))}function Lo(e,t,n,r,i){if(zi(n)){var s=!0;Hi(t)}else s=!1;if(Us(t,i),null===t.stateNode)Jo(e,t),mo(t,n,r),yo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Fs(u):u=Vi(t,u=zi(n)?Fi:Mi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==u)&&go(t,a,r,u),qs=!1;var d=t.memoizedState;a.state=d,Xs(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Ui.current||qs?("function"===typeof c&&(ho(t,n,c,r),l=t.memoizedState),(o=qs||po(t,n,o,r,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ws(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:co(t.type,o),a.props=u,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Fs(l):l=Vi(t,l=zi(n)?Fi:Mi.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&go(t,a,r,l),qs=!1,d=t.memoizedState,a.state=d,Xs(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ui.current||qs?("function"===typeof f&&(ho(t,n,f,r),p=t.memoizedState),(u=qs||po(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Mo(e,t,n,r,s,i)}function Mo(e,t,n,r,i,s){Oo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Wi(t,n,!1),Zo(e,t,s);r=t.stateNode,To.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Is(t,e.child,null,s),t.child=Is(t,null,o,s)):Io(e,t,o,s),t.memoizedState=r.state,i&&Wi(t,n,!0),t.child}function Uo(e){var t=e.stateNode;t.pendingContext?$i(0,t.pendingContext,t.pendingContext!==t.context):t.context&&$i(0,t.context,!1),ia(e,t.containerInfo)}function Fo(e,t,n,r,i){return _s(),Es(i),t.flags|=256,Io(e,t,n,r),t.child}var Vo,zo,Bo,$o,qo={dehydrated:null,treeContext:null,retryLane:0};function Ho(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wo(e,t,n){var r,i=t.pendingProps,a=la.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ji(la,1&a),null===e)return vs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Hu(l,i,0,null),e=qu(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ho(n),t.memoizedState=qo,e):Ko(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Go(e,t,o,r=bo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Hu({mode:"visible",children:r.children},i,0,null),(a=qu(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Is(t,e.child,null,o),t.child.memoizedState=Ho(o),t.memoizedState=qo,a);if(0===(1&t.mode))return Go(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Go(e,t,o,r=bo(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),Co||l){if(null!==(r=Ul)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,$s(e,i),hu(r,e,i,-1))}return ku(),Go(e,t,o,r=bo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Lu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ds=vi(i.nextSibling),hs=t,fs=!0,ps=null,null!==e&&(ns[rs++]=ss,ns[rs++]=as,ns[rs++]=is,ss=e.id,as=e.overflow,is=t),t=Ko(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Bu(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Bu(r,o):(o=qu(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Ho(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=qo,i}return e=(o=e.child).sibling,i=Bu(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ko(e,t){return(t=Hu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Go(e,t,n,r){return null!==r&&Es(r),Is(t,e.child,null,n),(e=Ko(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Qo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ms(e.return,t,n)}function Yo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Xo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Io(e,t,r.children,n),0!==(2&(r=la.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qo(e,n,t);else if(19===e.tag)Qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ji(la,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Yo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Yo(t,!0,n,null,s);break;case"together":Yo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Hl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Bu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function el(e,t){if(!fs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nl(e,t,n){var r=t.pendingProps;switch(cs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tl(t),null;case 1:case 17:return zi(t.type)&&Bi(),tl(t),null;case 3:return r=t.stateNode,sa(),Oi(Ui),Oi(Mi),ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ws(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ps&&(mu(ps),ps=null))),zo(e,t),tl(t),null;case 5:oa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Bo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return tl(t),null}if(e=ra(ea.current),ws(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[xi]=t,r[_i]=a,e=0!==(1&t.mode),n){case"dialog":Gr("cancel",r),Gr("close",r);break;case"iframe":case"object":case"embed":Gr("load",r);break;case"video":case"audio":for(i=0;i<qr.length;i++)Gr(qr[i],r);break;case"source":Gr("error",r);break;case"img":case"image":case"link":Gr("error",r),Gr("load",r);break;case"details":Gr("toggle",r);break;case"input":Y(r,a),Gr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Gr("invalid",r);break;case"textarea":ie(r,a),Gr("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&oi(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&oi(r.textContent,u,e),i=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Gr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=li)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[xi]=t,e[_i]=r,Vo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Gr("cancel",e),Gr("close",e),i=r;break;case"iframe":case"object":case"embed":Gr("load",e),i=r;break;case"video":case"audio":for(i=0;i<qr.length;i++)Gr(qr[i],e);i=r;break;case"source":Gr("error",e),i=r;break;case"img":case"image":case"link":Gr("error",e),Gr("load",e),i=r;break;case"details":Gr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Gr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Gr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Gr("invalid",e)}for(a in ye(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?me(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Gr("scroll",e):null!=c&&b(e,a,c,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=li)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return tl(t),null;case 6:if(e&&null!=t.stateNode)$o(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=ra(na.current),ra(ea.current),ws(t)){if(r=t.stateNode,n=t.memoizedProps,r[xi]=t,(a=r.nodeValue!==n)&&null!==(e=hs))switch(e.tag){case 3:oi(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&oi(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[xi]=t,t.stateNode=r}return tl(t),null;case 13:if(Oi(la),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(fs&&null!==ds&&0!==(1&t.mode)&&0===(128&t.flags))xs(),_s(),t.flags|=98560,a=!1;else if(a=ws(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[xi]=t}else _s(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;tl(t),a=!1}else null!==ps&&(mu(ps),ps=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===$l&&($l=3):ku())),null!==t.updateQueue&&(t.flags|=4),tl(t),null);case 4:return sa(),zo(e,t),null===e&&Xr(t.stateNode.containerInfo),tl(t),null;case 10:return Ls(t.type._context),tl(t),null;case 19:if(Oi(la),null===(a=t.memoizedState))return tl(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)el(a,!1);else{if(0!==$l||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ua(e))){for(t.flags|=128,el(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ji(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&at()>Xl&&(t.flags|=128,r=!0,el(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ua(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),el(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!fs)return tl(t),null}else 2*at()-a.renderingStartTime>Xl&&1073741824!==n&&(t.flags|=128,r=!0,el(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=at(),t.sibling=null,n=la.current,ji(la,r?1&n|2:1&n),t):(tl(t),null);case 22:case 23:return wu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&zl)&&(tl(t),6&t.subtreeFlags&&(t.flags|=8192)):tl(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function rl(e,t){switch(cs(t),t.tag){case 1:return zi(t.type)&&Bi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return sa(),Oi(Ui),Oi(Mi),ha(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oa(t),null;case 13:if(Oi(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));_s()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Oi(la),null;case 4:return sa(),null;case 10:return Ls(t.type._context),null;case 22:case 23:return wu(),null;default:return null}}Vo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},zo=function(){},Bo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var s,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=li)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Gr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var il=!1,sl=!1,al="function"===typeof WeakSet?WeakSet:Set,ol=null;function ll(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(Le){Du(e,t,Le)}else n.current=null}function ul(e,t,n){try{n()}catch(Le){Du(e,t,Le)}}var cl=!1;function hl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&ul(t,n,s)}i=i.next}while(i!==r)}}function dl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function pl(e){var t=e.alternate;null!==t&&(e.alternate=null,pl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[xi],delete t[_i],delete t[ki],delete t[Si],delete t[Ni])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ml(e){return 5===e.tag||3===e.tag||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=li));else if(4!==r&&null!==(e=e.child))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}var bl=null,wl=!1;function xl(e,t,n){for(n=n.child;null!==n;)_l(e,t,n),n=n.sibling}function _l(e,t,n){if(pt&&"function"===typeof pt.onCommitFiberUnmount)try{pt.onCommitFiberUnmount(ft,n)}catch(Fe){}switch(n.tag){case 5:sl||ll(n,t);case 6:var r=bl,i=wl;bl=null,xl(e,t,n),wl=i,null!==(bl=r)&&(wl?(e=bl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):bl.removeChild(n.stateNode));break;case 18:null!==bl&&(wl?(e=bl,n=n.stateNode,8===e.nodeType?yi(e.parentNode,n):1===e.nodeType&&yi(e,n),Xt(e)):yi(bl,n.stateNode));break;case 4:r=bl,i=wl,bl=n.stateNode.containerInfo,wl=!0,xl(e,t,n),bl=r,wl=i;break;case 0:case 11:case 14:case 15:if(!sl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&ul(n,t,a),i=i.next}while(i!==r)}xl(e,t,n);break;case 1:if(!sl&&(ll(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(Fe){Du(n,t,Fe)}xl(e,t,n);break;case 21:xl(e,t,n);break;case 22:1&n.mode?(sl=(r=sl)||null!==n.memoizedState,xl(e,t,n),sl=r):xl(e,t,n);break;default:xl(e,t,n)}}function El(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new al),t.forEach(function(t){var r=Mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function kl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:bl=l.stateNode,wl=!1;break e;case 3:case 4:bl=l.stateNode.containerInfo,wl=!0;break e}l=l.return}if(null===bl)throw Error(s(160));_l(a,o,i),bl=null,wl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(Ce){Du(i,t,Ce)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Sl(t,e),t=t.sibling}function Sl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kl(t,e),Nl(e),4&r){try{hl(3,e,e.return),dl(3,e)}catch(Te){Du(e,e.return,Te)}try{hl(5,e,e.return)}catch(Te){Du(e,e.return,Te)}}break;case 1:kl(t,e),Nl(e),512&r&&null!==n&&ll(n,n.return);break;case 5:if(kl(t,e),Nl(e),512&r&&null!==n&&ll(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(Te){Du(e,e.return,Te)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),ve(l,o);var c=ve(l,a);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?ce(i,d):"children"===h?he(i,d):b(i,h,d,c)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[_i]=a}catch(Te){Du(e,e.return,Te)}}break;case 6:if(kl(t,e),Nl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(Te){Du(e,e.return,Te)}}break;case 3:if(kl(t,e),Nl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Xt(t.containerInfo)}catch(Te){Du(e,e.return,Te)}break;case 4:default:kl(t,e),Nl(e);break;case 13:kl(t,e),Nl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Yl=at())),4&r&&El(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(sl=(c=sl)||h,kl(t,e),sl=c):kl(t,e),Nl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(ol=e,h=e.child;null!==h;){for(d=ol=h;null!==ol;){switch(p=(f=ol).child,f.tag){case 0:case 11:case 14:case 15:hl(4,f,f.return);break;case 1:ll(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(Te){Du(r,n,Te)}}break;case 5:ll(f,f.return);break;case 22:if(null!==f.memoizedState){Al(d);continue}}null!==p?(p.return=f,ol=p):Al(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=pe("display",o))}catch(Te){Du(e,e.return,Te)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(Te){Du(e,e.return,Te)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:kl(t,e),Nl(e),4&r&&El(e);case 21:}}function Nl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ml(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),vl(e,gl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;yl(e,gl(e),a);break;default:throw Error(s(161))}}catch(it){Du(e,e.return,it)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Tl(e,t,n){ol=e,Cl(e,t,n)}function Cl(e,t,n){for(var r=0!==(1&e.mode);null!==ol;){var i=ol,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||il;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||sl;o=il;var u=sl;if(il=a,(sl=l)&&!u)for(ol=i;null!==ol;)l=(a=ol).child,22===a.tag&&null!==a.memoizedState?Pl(i):null!==l?(l.return=a,ol=l):Pl(i);for(;null!==s;)ol=s,Cl(s,t,n),s=s.sibling;ol=i,il=o,sl=u}Il(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,ol=s):Il(e)}}function Il(e){for(;null!==ol;){var t=ol;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:sl||dl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!sl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:co(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Js(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Js(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Xt(d)}}}break;default:throw Error(s(163))}sl||512&t.flags&&fl(t)}catch(f){Du(t,t.return,f)}}if(t===e){ol=null;break}if(null!==(n=t.sibling)){n.return=t.return,ol=n;break}ol=t.return}}function Al(e){for(;null!==ol;){var t=ol;if(t===e){ol=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ol=n;break}ol=t.return}}function Pl(e){for(;null!==ol;){var t=ol;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{dl(4,t)}catch(it){Du(t,n,it)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(it){Du(t,i,it)}}var s=t.return;try{fl(t)}catch(it){Du(t,s,it)}break;case 5:var a=t.return;try{fl(t)}catch(it){Du(t,a,it)}}}catch(it){Du(t,t.return,it)}if(t===e){ol=null;break}var o=t.sibling;if(null!==o){o.return=t.return,ol=o;break}ol=t.return}}var Rl,Dl=Math.ceil,Ol=w.ReactCurrentDispatcher,jl=w.ReactCurrentOwner,Ll=w.ReactCurrentBatchConfig,Ml=0,Ul=null,Fl=null,Vl=0,zl=0,Bl=Di(0),$l=0,ql=null,Hl=0,Wl=0,Kl=0,Gl=null,Ql=null,Yl=0,Xl=1/0,Jl=null,Zl=!1,eu=null,tu=null,nu=!1,ru=null,iu=0,su=0,au=null,ou=-1,lu=0;function uu(){return 0!==(6&Ml)?at():-1!==ou?ou:ou=at()}function cu(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Vl?Vl&-Vl:null!==ks.transition?(0===lu&&(lu=kt()),lu):0!==(e=Ct)?e:e=void 0===(e=window.event)?16:an(e.type)}function hu(e,t,n,r){if(50<su)throw su=0,au=null,Error(s(185));Nt(e,n,r),0!==(2&Ml)&&e===Ul||(e===Ul&&(0===(2&Ml)&&(Wl|=n),4===$l&&gu(e,Vl)),du(e,r),1===n&&0===Ml&&0===(1&t.mode)&&(Xl=at()+500,Gi&&Xi()))}function du(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-mt(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=_t(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=xt(e,e===Ul?Vl:0);if(0===r)null!==n&&nt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&nt(n),1===t)0===e.tag?function(e){Gi=!0,Yi(e)}(yu.bind(null,e)):Yi(yu.bind(null,e)),mi(function(){0===(6&Ml)&&Xi()}),n=null;else{switch(It(r)){case 1:n=lt;break;case 4:n=ut;break;case 16:default:n=ct;break;case 536870912:n=dt}n=Uu(n,fu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fu(e,t){if(ou=-1,lu=0,0!==(6&Ml))throw Error(s(327));var n=e.callbackNode;if(Pu()&&e.callbackNode!==n)return null;var r=xt(e,e===Ul?Vl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Su(e,r);else{t=r;var i=Ml;Ml|=2;var a=Eu();for(Ul===e&&Vl===t||(Jl=null,Xl=at()+500,xu(e,t));;)try{Tu();break}catch(Fe){_u(e,Fe)}js(),Ol.current=a,Ml=i,null!==Fl?t=0:(Ul=null,Vl=0,t=$l)}if(0!==t){if(2===t&&(0!==(i=Et(e))&&(r=i,t=pu(e,i))),1===t)throw n=ql,xu(e,0),gu(e,r),du(e,at()),n;if(6===t)gu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!gr(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Su(e,r))&&(0!==(a=Et(e))&&(r=a,t=pu(e,a))),1===t))throw n=ql,xu(e,0),gu(e,r),du(e,at()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Au(e,Ql,Jl);break;case 3:if(gu(e,r),(130023424&r)===r&&10<(t=Yl+500-at())){if(0!==xt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){uu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=di(Au.bind(null,e,Ql,Jl),t);break}Au(e,Ql,Jl);break;case 4:if(gu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-mt(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=at()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dl(r/1960))-r)){e.timeoutHandle=di(Au.bind(null,e,Ql,Jl),r);break}Au(e,Ql,Jl);break;default:throw Error(s(329))}}}return du(e,at()),e.callbackNode===n?fu.bind(null,e):null}function pu(e,t){var n=Gl;return e.current.memoizedState.isDehydrated&&(xu(e,t).flags|=256),2!==(e=Su(e,t))&&(t=Ql,Ql=n,null!==t&&mu(t)),e}function mu(e){null===Ql?Ql=e:Ql.push.apply(Ql,e)}function gu(e,t){for(t&=~Kl,t&=~Wl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-mt(t),r=1<<n;e[n]=-1,t&=~r}}function yu(e){if(0!==(6&Ml))throw Error(s(327));Pu();var t=xt(e,0);if(0===(1&t))return du(e,at()),null;var n=Su(e,t);if(0!==e.tag&&2===n){var r=Et(e);0!==r&&(t=r,n=pu(e,r))}if(1===n)throw n=ql,xu(e,0),gu(e,t),du(e,at()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Au(e,Ql,Jl),du(e,at()),null}function vu(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Xl=at()+500,Gi&&Xi())}}function bu(e){null!==ru&&0===ru.tag&&0===(6&Ml)&&Pu();var t=Ml;Ml|=1;var n=Ll.transition,r=Ct;try{if(Ll.transition=null,Ct=1,e)return e()}finally{Ct=r,Ll.transition=n,0===(6&(Ml=t))&&Xi()}}function wu(){zl=Bl.current,Oi(Bl)}function xu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,fi(n)),null!==Fl)for(n=Fl.return;null!==n;){var r=n;switch(cs(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Bi();break;case 3:sa(),Oi(Ui),Oi(Mi),ha();break;case 5:oa(r);break;case 4:sa();break;case 13:case 19:Oi(la);break;case 10:Ls(r.type._context);break;case 22:case 23:wu()}n=n.return}if(Ul=e,Fl=e=Bu(e.current,null),Vl=zl=t,$l=0,ql=null,Kl=Wl=Hl=0,Ql=Gl=null,null!==Vs){for(t=0;t<Vs.length;t++)if(null!==(r=(n=Vs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Vs=null}return e}function _u(e,t){for(;;){var n=Fl;try{if(js(),da.current=ao,va){for(var r=ma.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}va=!1}if(pa=0,ya=ga=ma=null,ba=!1,wa=0,jl.current=null,null===n||null===n.return){$l=1,ql=t,Fl=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Vl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=So(o);if(null!==p){p.flags&=-257,No(p,o,l,0,t),1&p.mode&&ko(a,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ko(a,c,t),ku();break e}u=Error(s(426))}else if(fs&&1&l.mode){var y=So(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),No(y,o,l,0,t),Es(vo(u,l));break e}}a=u=vo(u,l),4!==$l&&($l=2),null===Gl?Gl=[a]:Gl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ys(a,_o(0,u,t));break e;case 1:l=u;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===tu||!tu.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Ys(a,Eo(a,l,t));break e}}a=a.return}while(null!==a)}Iu(n)}catch(w){t=w,Fl===n&&null!==n&&(Fl=n=n.return);continue}break}}function Eu(){var e=Ol.current;return Ol.current=ao,null===e?ao:e}function ku(){0!==$l&&3!==$l&&2!==$l||($l=4),null===Ul||0===(268435455&Hl)&&0===(268435455&Wl)||gu(Ul,Vl)}function Su(e,t){var n=Ml;Ml|=2;var r=Eu();for(Ul===e&&Vl===t||(Jl=null,xu(e,t));;)try{Nu();break}catch(Ne){_u(e,Ne)}if(js(),Ml=n,Ol.current=r,null!==Fl)throw Error(s(261));return Ul=null,Vl=0,$l}function Nu(){for(;null!==Fl;)Cu(Fl)}function Tu(){for(;null!==Fl&&!rt();)Cu(Fl)}function Cu(e){var t=Rl(e.alternate,e,zl);e.memoizedProps=e.pendingProps,null===t?Iu(e):Fl=t,jl.current=null}function Iu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=nl(n,t,zl)))return void(Fl=n)}else{if(null!==(n=rl(n,t)))return n.flags&=32767,void(Fl=n);if(null===e)return $l=6,void(Fl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Fl=t);Fl=t=e}while(null!==t);0===$l&&($l=5)}function Au(e,t,n){var r=Ct,i=Ll.transition;try{Ll.transition=null,Ct=1,function(e,t,n,r){do{Pu()}while(null!==ru);if(0!==(6&Ml))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-mt(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Ul&&(Fl=Ul=null,Vl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||nu||(nu=!0,Uu(ct,function(){return Pu(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ll.transition,Ll.transition=null;var o=Ct;Ct=1;var l=Ml;Ml|=4,jl.current=null,function(e,t){if(ui=Zt,_r(e=xr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(Be){n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(u=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=o),f===a&&++h===r&&(u=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ci={focusedElem:e,selectionRange:n},Zt=!1,ol=t;null!==ol;)if(e=(t=ol).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,ol=e;else for(;null!==ol;){t=ol;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:co(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(Be){Du(t,t.return,Be)}if(null!==(e=t.sibling)){e.return=t.return,ol=e;break}ol=t.return}m=cl,cl=!1}(e,n),Sl(n,e),Er(ci),Zt=!!ui,ci=ui=null,e.current=n,Tl(n,e,i),st(),Ml=l,Ct=o,Ll.transition=a}else e.current=n;if(nu&&(nu=!1,ru=e,iu=i),a=e.pendingLanes,0===a&&(tu=null),function(e){if(pt&&"function"===typeof pt.onCommitFiberRoot)try{pt.onCommitFiberRoot(ft,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),du(e,at()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zl)throw Zl=!1,e=eu,eu=null,e;0!==(1&iu)&&0!==e.tag&&Pu(),a=e.pendingLanes,0!==(1&a)?e===au?su++:(su=0,au=e):su=0,Xi()}(e,t,n,r)}finally{Ll.transition=i,Ct=r}return null}function Pu(){if(null!==ru){var e=It(iu),t=Ll.transition,n=Ct;try{if(Ll.transition=null,Ct=16>e?16:e,null===ru)var r=!1;else{if(e=ru,ru=null,iu=0,0!==(6&Ml))throw Error(s(331));var i=Ml;for(Ml|=4,ol=e.current;null!==ol;){var a=ol,o=a.child;if(0!==(16&ol.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(ol=c;null!==ol;){var h=ol;switch(h.tag){case 0:case 11:case 15:hl(8,h,a)}var d=h.child;if(null!==d)d.return=h,ol=d;else for(;null!==ol;){var f=(h=ol).sibling,p=h.return;if(pl(h),h===c){ol=null;break}if(null!==f){f.return=p,ol=f;break}ol=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}ol=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,ol=o;else e:for(;null!==ol;){if(0!==(2048&(a=ol).flags))switch(a.tag){case 0:case 11:case 15:hl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,ol=v;break e}ol=a.return}}var b=e.current;for(ol=b;null!==ol;){var w=(o=ol).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,ol=w;else e:for(o=b;null!==ol;){if(0!==(2048&(l=ol).flags))try{switch(l.tag){case 0:case 11:case 15:dl(9,l)}}catch(_){Du(l,l.return,_)}if(l===o){ol=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,ol=x;break e}ol=l.return}}if(Ml=i,Xi(),pt&&"function"===typeof pt.onPostCommitFiberRoot)try{pt.onPostCommitFiberRoot(ft,e)}catch(_){}r=!0}return r}finally{Ct=n,Ll.transition=t}}return!1}function Ru(e,t,n){e=Gs(e,t=_o(0,t=vo(n,t),1),1),t=uu(),null!==e&&(Nt(e,1,t),du(e,t))}function Du(e,t,n){if(3===e.tag)Ru(e,e,n);else for(;null!==t;){if(3===t.tag){Ru(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tu||!tu.has(r))){t=Gs(t,e=Eo(t,e=vo(n,e),1),1),e=uu(),null!==t&&(Nt(t,1,e),du(t,e));break}}t=t.return}}function Ou(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=uu(),e.pingedLanes|=e.suspendedLanes&n,Ul===e&&(Vl&n)===n&&(4===$l||3===$l&&(130023424&Vl)===Vl&&500>at()-Yl?xu(e,0):Kl|=n),du(e,t)}function ju(e,t){0===t&&(0===(1&e.mode)?t=1:(t=bt,0===(130023424&(bt<<=1))&&(bt=4194304)));var n=uu();null!==(e=$s(e,t))&&(Nt(e,t,n),du(e,n))}function Lu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ju(e,n)}function Mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),ju(e,n)}function Uu(e,t){return tt(e,t)}function Fu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vu(e,t,n,r){return new Fu(e,t,n,r)}function zu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bu(e,t){var n=e.alternate;return null===n?((n=Vu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $u(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)zu(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case E:return qu(n.children,i,a,t);case k:o=8,i|=8;break;case S:return(e=Vu(12,n,t,2|i)).elementType=S,e.lanes=a,e;case I:return(e=Vu(13,n,t,i)).elementType=I,e.lanes=a,e;case A:return(e=Vu(19,n,t,i)).elementType=A,e.lanes=a,e;case D:return Hu(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case T:o=9;break e;case C:o=11;break e;case P:o=14;break e;case R:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Vu(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function qu(e,t,n,r){return(e=Vu(7,e,r,t)).lanes=n,e}function Hu(e,t,n,r){return(e=Vu(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Wu(e,t,n){return(e=Vu(6,e,null,t)).lanes=n,e}function Ku(e,t,n){return(t=Vu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=St(0),this.expirationTimes=St(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=St(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qu(e,t,n,r,i,s,a,o,l){return e=new Gu(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Vu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hs(s),e}function Yu(e){if(!e)return Li;e:{if(Ye(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(zi(n))return qi(e,n,t)}return t}function Xu(e,t,n,r,i,s,a,o,l){return(e=Qu(n,r,!0,e,0,s,0,o,l)).context=Yu(null),n=e.current,(s=Ks(r=uu(),i=cu(n))).callback=void 0!==t&&null!==t?t:null,Gs(n,s,i),e.current.lanes=i,Nt(e,i,r),du(e,r),e}function Ju(e,t,n,r){var i=t.current,s=uu(),a=cu(i);return n=Yu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ks(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Gs(i,t,a))&&(hu(e,i,a,s),Qs(e,i,a)),a}function Zu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ec(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function tc(e,t){ec(e,t),(e=e.alternate)&&ec(e,t)}Rl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ui.current)Co=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Co=!1,function(e,t,n){switch(t.tag){case 3:Uo(t),_s();break;case 5:aa(t);break;case 1:zi(t.type)&&Hi(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ji(Ps,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ji(la,1&la.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Wo(e,t,n):(ji(la,1&la.current),null!==(e=Zo(e,t,n))?e.sibling:null);ji(la,1&la.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Xo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ji(la,la.current),r)break;return null;case 22:case 23:return t.lanes=0,Do(e,t,n)}return Zo(e,t,n)}(e,t,n);Co=0!==(131072&e.flags)}else Co=!1,fs&&0!==(1048576&t.flags)&&ls(t,ts,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Jo(e,t),e=t.pendingProps;var i=Vi(t,Mi.current);Us(t,n),i=ka(null,t,r,e,i,n);var a=Sa();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zi(r)?(a=!0,Hi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Hs(t),i.updater=fo,t.stateNode=i,i._reactInternals=t,yo(t,r,e,n),t=Mo(null,t,r,!0,a,n)):(t.tag=0,fs&&a&&us(t),Io(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Jo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return zu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=co(r,e),i){case 0:t=jo(null,t,r,e,n);break e;case 1:t=Lo(null,t,r,e,n);break e;case 11:t=Ao(null,t,r,e,n);break e;case 14:t=Po(null,t,r,co(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:co(r,i),n);case 1:return r=t.type,i=t.pendingProps,Lo(e,t,r,i=t.elementType===r?i:co(r,i),n);case 3:e:{if(Uo(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ws(e,t),Xs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Fo(e,t,r,n,i=vo(Error(s(423)),t));break e}if(r!==i){t=Fo(e,t,r,n,i=vo(Error(s(424)),t));break e}for(ds=vi(t.stateNode.containerInfo.firstChild),hs=t,fs=!0,ps=null,n=As(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(_s(),r===i){t=Zo(e,t,n);break e}Io(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&vs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,hi(r,i)?o=null:null!==a&&hi(r,a)&&(t.flags|=32),Oo(e,t),Io(e,t,o,n),t.child;case 6:return null===e&&vs(t),null;case 13:return Wo(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Is(t,null,r,n):Io(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:co(r,i),n);case 7:return Io(e,t,t.pendingProps,n),t.child;case 8:case 12:return Io(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,ji(Ps,r._currentValue),r._currentValue=o,null!==a)if(gr(a.value,o)){if(a.children===i.children&&!Ui.current){t=Zo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Ks(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Ms(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ms(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Io(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Us(t,n),r=r(i=Fs(i)),t.flags|=1,Io(e,t,r,n),t.child;case 14:return i=co(r=t.type,t.pendingProps),Po(e,t,r,i=co(r.type,i),n);case 15:return Ro(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:co(r,i),Jo(e,t),t.tag=1,zi(r)?(e=!0,Hi(t)):e=!1,Us(t,n),mo(t,r,i),yo(t,r,i,n),Mo(null,t,r,!0,e,n);case 19:return Xo(e,t,n);case 22:return Do(e,t,n)}throw Error(s(156,t.tag))};var nc="function"===typeof reportError?reportError:function(e){console.error(e)};function rc(e){this._internalRoot=e}function ic(e){this._internalRoot=e}function sc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(){}function lc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Zu(a);o.call(e)}}Ju(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Zu(a);s.call(e)}}var a=Xu(t,r,e,0,null,!1,0,"",oc);return e._reactRootContainer=a,e[Ei]=a.current,Xr(8===e.nodeType?e.parentNode:e),bu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Zu(l);o.call(e)}}var l=Qu(e,0,!1,null,0,!1,0,"",oc);return e._reactRootContainer=l,e[Ei]=l.current,Xr(8===e.nodeType?e.parentNode:e),bu(function(){Ju(t,l,n,r)}),l}(n,t,e,i,r);return Zu(a)}ic.prototype.render=rc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Ju(e,t,null,null)},ic.prototype.unmount=rc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;bu(function(){Ju(null,e,null,null)}),t[Ei]=null}},ic.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bt.length&&0!==t&&t<Bt[n].priority;n++);Bt.splice(n,0,e),0===n&&Wt(e)}},At=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=wt(t.pendingLanes);0!==n&&(Tt(t,1|n),du(t,at()),0===(6&Ml)&&(Xl=at()+500,Xi()))}break;case 13:bu(function(){var t=$s(e,1);if(null!==t){var n=uu();hu(t,e,1,n)}}),tc(e,1)}},Pt=function(e){if(13===e.tag){var t=$s(e,134217728);if(null!==t)hu(t,e,134217728,uu());tc(e,134217728)}},Rt=function(e){if(13===e.tag){var t=cu(e),n=$s(e,t);if(null!==n)hu(n,e,t,uu());tc(e,t)}},Dt=function(){return Ct},Ot=function(e,t){var n=Ct;try{return Ct=e,t()}finally{Ct=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ai(r);if(!i)throw Error(s(90));K(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=vu,De=bu;var uc={usingClientEntryPoint:!1,Events:[Ci,Ii,Ai,Se,Ae,vu]},cc={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{ft=dc.inject(hc),pt=dc}catch(Ie){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!sc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!sc(e))throw Error(s(299));var n=!1,r="",i=nc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Qu(e,1,!1,null,0,n,0,r,i),e[Ei]=t.current,Xr(8===e.nodeType?e.parentNode:e),new rc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e){return bu(e)},t.hydrate=function(e,t,n){if(!ac(t))throw Error(s(200));return lc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!sc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=nc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Xu(t,null,e,1,null!=n?n:null,i,0,a,o),e[Ei]=t.current,Xr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ic(t)},t.render=function(e,t,n){if(!ac(t))throw Error(s(200));return lc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(s(40));return!!e._reactRootContainer&&(bu(function(){lc(null,null,e,!1,function(){e._reactRootContainer=null,e[Ei]=null})}),!0)},t.unstable_batchedUpdates=vu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return lc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(Ne){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,i=n(43),s=n.t(i,2),a=n(391),o=n(950),l=n.t(o,2);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const c="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Ne){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,l=r.Pop,d=null,g=y();function y(){return(o.state||{idx:null}).idx}function v(){l=r.Pop;let e=y(),t=null==e?null:e-g;g=e,d&&d({action:l,location:w.location,delta:t})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(u({},o.state,{idx:g}),""));let w={get action(){return l},get location(){return e(s,o)},listen(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),d=e,()=>{s.removeEventListener(c,v),d=null}},createHref:e=>t(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=p(w.location,e,t);n&&n(i,e),g=y()+1;let u=f(i,g),c=w.createHref(i);try{o.pushState(u,"",c)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(c)}a&&d&&d({action:l,location:w.location,delta:1})},replace:function(e,t){l=r.Replace;let i=p(w.location,e,t);n&&n(i,e),g=y();let s=f(i,g),u=w.createHref(i);o.replaceState(s,"",u),a&&d&&d({action:l,location:w.location,delta:0})},go:e=>o.go(e)};return w}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),w(e,t,n,!1)}function w(e,t,n,r){let i=O(("string"===typeof t?g(t):t).pathname||"/",n);if(null==i)return null;let s=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=D(i);a=P(s[o],e,r)}return a}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(h(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=F([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:A(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)}),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=_(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const E=/^:[\w-]+$/,k=3,S=2,N=1,T=10,C=-2,I=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=C),t&&(r+=S),n.filter(e=>!I(e)).reduce((e,t)=>e+(E.test(t)?k:""===t?N:T),r)}function P(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,u="/"===s?t:t.slice(s.length)||"/",c=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),h=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:F([s,c.pathname]),pathnameBase:V(F([s,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(s=F([s,c.pathnameBase]))}return a}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function j(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let n=L(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function U(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=u({},e),h(!i.pathname||!i.pathname.includes("?"),j("?","pathname","search",i)),h(!i.pathname||!i.pathname.includes("#"),j("#","pathname","hash",i)),h(!i.search||!i.search.includes("#"),j("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:z(r),hash:B(i)}}(i,s),c=o&&"/"!==o&&o.endsWith("/"),d=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const F=e=>e.join("/").replace(/\/\/+/g,"/"),V=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],H=(new Set(q),["get",...q]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const K=i.createContext(null);const G=i.createContext(null);const Q=i.createContext(null);const Y=i.createContext(null);const X=i.createContext({outlet:null,matches:[],isDataRoute:!1});const J=i.createContext(null);function Z(){return null!=i.useContext(Y)}function ee(){return Z()||h(!1),i.useContext(Y).location}function te(e){i.useContext(Q).static||i.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=i.useContext(X);return e?function(){let{router:e}=de(ce.UseNavigateStable),t=pe(he.UseNavigateStable),n=i.useRef(!1);return te(()=>{n.current=!0}),i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))},[e,t])}():function(){Z()||h(!1);let e=i.useContext(K),{basename:t,future:n,navigator:r}=i.useContext(Q),{matches:s}=i.useContext(X),{pathname:a}=ee(),o=JSON.stringify(M(s,n.v7_relativeSplatPath)),l=i.useRef(!1);return te(()=>{l.current=!0}),i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=U(n,JSON.parse(o),a,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[t,r,o,a,e])}()}function re(){let{matches:e}=i.useContext(X),t=e[e.length-1];return t?t.params:{}}function ie(e,t,n,s){Z()||h(!1);let{navigator:a}=i.useContext(Q),{matches:o}=i.useContext(X),l=o[o.length-1],u=l?l.params:{},c=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=ee();if(t){var p;let e="string"===typeof t?g(t):t;"/"===c||(null==(p=e.pathname)?void 0:p.startsWith(c))||h(!1),d=e}else d=f;let m=d.pathname||"/",y=m;if("/"!==c){let e=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=b(e,{pathname:y});let w=ue(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:F([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:F([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,s);return t&&w?i.createElement(Y.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:r.Pop}},w):w}function se(){let e=function(){var e;let t=i.useContext(J),n=fe(he.UseRouteError),r=pe(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=$(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const ae=i.createElement(se,null);class oe extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(X.Provider,{value:this.props.routeContext},i.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(K);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(X.Provider,{value:t},r)}function ue(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||h(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<o.length;i++){let e=o[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,o=c>=0?o.slice(0,c+1):[o[0]];break}}}return o.reduceRight((e,r,s)=>{let a,h=!1,d=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||ae,u&&(c<0&&0===s?(p="route-fallback",!1||me[p]||(me[p]=!0),h=!0,f=null):c===s&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=a?d:h?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(le,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(oe,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function de(e){let t=i.useContext(K);return t||h(!1),t}function fe(e){let t=i.useContext(G);return t||h(!1),t}function pe(e){let t=function(){let e=i.useContext(X);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const me={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ye(e){let{to:t,replace:n,state:r,relative:s}=e;Z()||h(!1);let{future:a,static:o}=i.useContext(Q),{matches:l}=i.useContext(X),{pathname:u}=ee(),c=ne(),d=U(t,M(l,a.v7_relativeSplatPath),u,"path"===s),f=JSON.stringify(d);return i.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function ve(e){h(!1)}function be(e){let{basename:t="/",children:n=null,location:s,navigationType:a=r.Pop,navigator:o,static:l=!1,future:u}=e;Z()&&h(!1);let c=t.replace(/^\/*/,"/"),d=i.useMemo(()=>({basename:c,navigator:o,static:l,future:W({v7_relativeSplatPath:!1},u)}),[c,u,o,l]);"string"===typeof s&&(s=g(s));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=s,b=i.useMemo(()=>{let e=O(f,c);return null==e?null:{location:{pathname:e,search:p,hash:m,state:y,key:v},navigationType:a}},[c,f,p,m,y,v,a]);return null==b?null:i.createElement(Q.Provider,{value:d},i.createElement(Y.Provider,{children:n,value:b}))}function we(e){let{children:t,location:n}=e;return ie(xe(t),n)}new Promise(()=>{});i.Component;function xe(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,xe(e.props.children,s));e.type!==ve&&h(!1),e.props.index&&e.props.children&&h(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=xe(e.props.children,s)),n.push(a)}),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Ne){}new Map;const _e=s.startTransition;l.flushSync,s.useId;function Ee(e){let{basename:t,children:n,future:r,window:s}=e,a=i.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),y(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=g(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:m(t))},function(e,t){d("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=a.current,[u,c]=i.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},f=i.useCallback(e=>{h&&_e?_e(()=>c(e)):c(e)},[c,h]);return i.useLayoutEffect(()=>l.listen(f),[l,f]),i.useEffect(()=>ge(r),[r]),i.createElement(be,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ke,Se;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Se||(Se={}));let Ne={data:""},Te=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Ne,Ce=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ie=/\/\*[^]*?\*\/|  +/g,Ae=/\n+/g,Pe=(e,t)=>{let n="",r="",i="";for(let s in e){let a=e[s];"@"==s[0]?"i"==s[1]?n=s+" "+a+";":r+="f"==s[1]?Pe(a,s):s+"{"+Pe(a,"k"==s[1]?"":t)+"}":"object"==typeof a?r+=Pe(a,t?t.replace(/([^,])+/g,e=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):s):null!=a&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Pe.p?Pe.p(s,a):s+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},Re={},De=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+De(e[n]);return t}return e},Oe=(e,t,n,r,i)=>{let s=De(e),a=Re[s]||(Re[s]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(s));if(!Re[a]){let t=s!==e?e:(e=>{let t,n,r=[{}];for(;t=Ce.exec(e.replace(Ie,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Ae," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Ae," ").trim();return r[0]})(e);Re[a]=Pe(i?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&Re.g?Re.g:null;return n&&(Re.g=Re[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Re[a],t,r,o),a};function je(e){let t=this||{},n=e.call?e(t.p):e;return Oe(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,i)=>{let s=t[i];if(s&&s.call){let e=s(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":Pe(e,""):!1===e?"":e}return e+r+(null==s?"":s)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,Te(t.target),t.g,t.o,t.k)}je.bind({g:1});let Le,Me,Ue,Fe=je.bind({k:1});function Ve(e,t){let n=this||{};return function(){let r=arguments;function i(s,a){let o=Object.assign({},s),l=o.className||i.className;n.p=Object.assign({theme:Me&&Me()},o),n.o=/ *go\d+/.test(l),o.className=je.apply(n,r)+(l?" "+l:""),t&&(o.ref=a);let u=e;return e[0]&&(u=o.as||e,delete o.as),Ue&&u[0]&&Ue(o),Le(u,o)}return t?t(i):i}}var ze=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Be=(()=>{let e=0;return()=>(++e).toString()})(),$e=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),qe=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:n}=t;return qe(e,{type:e.toasts.find(e=>e.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+i}))}}},He=[],We={toasts:[],pausedAt:void 0},Ke=e=>{We=qe(We,e),He.forEach(e=>{e(We)})},Ge={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Qe=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||Be()}}(t,e,n);return Ke({type:2,toast:r}),r.id},Ye=(e,t)=>Qe("blank")(e,t);Ye.error=Qe("error"),Ye.success=Qe("success"),Ye.loading=Qe("loading"),Ye.custom=Qe("custom"),Ye.dismiss=e=>{Ke({type:3,toastId:e})},Ye.remove=e=>Ke({type:4,toastId:e}),Ye.promise=(e,t,n)=>{let r=Ye.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let i=t.success?ze(t.success,e):void 0;return i?Ye.success(i,{id:r,...n,...null==n?void 0:n.success}):Ye.dismiss(r),e}).catch(e=>{let i=t.error?ze(t.error,e):void 0;i?Ye.error(i,{id:r,...n,...null==n?void 0:n.error}):Ye.dismiss(r)}),e};var Xe=(e,t)=>{Ke({type:1,toast:{id:e,height:t}})},Je=()=>{Ke({type:5,time:Date.now()})},Ze=new Map,et=e=>{let{toasts:t,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,i.useState)(We),r=(0,i.useRef)(We);(0,i.useEffect)(()=>(r.current!==We&&n(We),He.push(n),()=>{let e=He.indexOf(n);e>-1&&He.splice(e,1)}),[]);let s=t.toasts.map(t=>{var n,r,i;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||Ge[t.type],style:{...e.style,...null==(i=e[t.type])?void 0:i.style,...t.style}}});return{...t,toasts:s}}(e);(0,i.useEffect)(()=>{if(n)return;let e=Date.now(),r=t.map(t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout(()=>Ye.dismiss(t.id),n);t.visible&&Ye.dismiss(t.id)});return()=>{r.forEach(e=>e&&clearTimeout(e))}},[t,n]);let r=(0,i.useCallback)(()=>{n&&Ke({type:6,time:Date.now()})},[n]),s=(0,i.useCallback)((e,n)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:s}=n||{},a=t.filter(t=>(t.position||s)===(e.position||s)&&t.height),o=a.findIndex(t=>t.id===e.id),l=a.filter((e,t)=>t<o&&e.visible).length;return a.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+i,0)},[t]);return(0,i.useEffect)(()=>{t.forEach(e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(Ze.has(e))return;let n=setTimeout(()=>{Ze.delete(e),Ke({type:4,toastId:e})},t);Ze.set(e,n)}(e.id,e.removeDelay);else{let t=Ze.get(e.id);t&&(clearTimeout(t),Ze.delete(e.id))}})},[t]),{toasts:t,handlers:{updateHeight:Xe,startPause:Je,endPause:r,calculateOffset:s}}},tt=Fe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,nt=Fe`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rt=Fe`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,it=Ve("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${nt} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${rt} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,st=Fe`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,at=Ve("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${st} 1s linear infinite;
`,ot=Fe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,lt=Fe`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ut=Ve("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ot} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${lt} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ct=Ve("div")`
  position: absolute;
`,ht=Ve("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,dt=Fe`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ft=Ve("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${dt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,pt=e=>{let{toast:t}=e,{icon:n,type:r,iconTheme:s}=t;return void 0!==n?"string"==typeof n?i.createElement(ft,null,n):n:"blank"===r?null:i.createElement(ht,null,i.createElement(at,{...s}),"loading"!==r&&i.createElement(ct,null,"error"===r?i.createElement(it,{...s}):i.createElement(ut,{...s})))},mt=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,gt=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,yt=Ve("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,vt=Ve("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,bt=i.memo(e=>{let{toast:t,position:n,style:r,children:s}=e,a=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=$e()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[mt(n),gt(n)];return{animation:t?`${Fe(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fe(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||n||"top-center",t.visible):{opacity:0},o=i.createElement(pt,{toast:t}),l=i.createElement(vt,{...t.ariaProps},ze(t.message,t));return i.createElement(yt,{className:t.className,style:{...a,...r,...t.style}},"function"==typeof s?s({icon:o,message:l}):i.createElement(i.Fragment,null,o,l))});!function(e,t,n,r){Pe.p=t,Le=e,Me=n,Ue=r}(i.createElement);var wt=e=>{let{id:t,className:n,style:r,onHeightUpdate:s,children:a}=e,o=i.useCallback(e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;s(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return i.createElement("div",{ref:o,className:n,style:r},a)},xt=je`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,_t=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:r,gutter:s,children:a,containerStyle:o,containerClassName:l}=e,{toasts:u,handlers:c}=et(r);return i.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:l,onMouseEnter:c.startPause,onMouseLeave:c.endPause},u.map(e=>{let r=e.position||n,o=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:$e()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}})(r,c.calculateOffset(e,{reverseOrder:t,gutter:s,defaultPosition:n}));return i.createElement(wt,{id:e.id,key:e.id,onHeightUpdate:c.updateHeight,className:e.visible?xt:"",style:o},"custom"===e.type?ze(e.message,e):a?a(e):i.createElement(bt,{toast:e,position:r}))}))},Et=Ye;const kt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},St={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(kt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Nt;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Nt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tt=function(e){return function(e){const t=kt(e);return St.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ct=function(e){try{return St.decodeString(e,!0)}catch(Ne){console.error("base64Decode failed: ",Ne)}return null};const It=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,At=()=>{try{return It()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Cuentas",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Ne){return}const t=e&&Ct(e[1]);return t&&JSON.parse(t)})()}catch(Ne){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ne}`)}},Pt=e=>{var t,n;return null===(n=null===(t=At())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Rt=()=>{var e;return null===(e=At())||void 0===e?void 0:e.config},Dt=e=>{var t;return null===(t=At())||void 0===t?void 0:t[`_${e}`]};class Ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function jt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Lt(){return!function(){var e;const t=null===(e=At())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Ne){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mt(){try{return"object"===typeof indexedDB}catch(Ne){return!1}}class Ut extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ft.prototype.create)}}class Ft{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Vt,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new Ut(n,s,t)}}const Vt=/\{\$([^}]+)}/g;function zt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Bt(n)&&Bt(s)){if(!zt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Bt(e){return null!==e&&"object"===typeof e}function $t(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function qt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Ht(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Wt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Kt),void 0===r.error&&(r.error=Kt),void 0===r.complete&&(r.complete=Kt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Ne){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Ne){"undefined"!==typeof console&&console.error&&console.error(Ne)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kt(){}function Gt(e){return e&&e._delegate?e._delegate:e}class Qt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Yt="[DEFAULT]";class Xt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ot;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Ne){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Ne){if(r)return null;throw Ne}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Yt})}catch(Ne){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Ne){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Yt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;return this.component?this.component.multipleInstances?e:Yt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Jt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Xt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Zt=[];var en;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(en||(en={}));const tn={debug:en.DEBUG,verbose:en.VERBOSE,info:en.INFO,warn:en.WARN,error:en.ERROR,silent:en.SILENT},nn=en.INFO,rn={[en.DEBUG]:"log",[en.VERBOSE]:"log",[en.INFO]:"info",[en.WARN]:"warn",[en.ERROR]:"error"},sn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=rn[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class an{constructor(e){this.name=e,this._logLevel=nn,this._logHandler=sn,this._userLogHandler=null,Zt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in en))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?tn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,en.DEBUG,...t),this._logHandler(this,en.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,en.VERBOSE,...t),this._logHandler(this,en.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,en.INFO,...t),this._logHandler(this,en.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,en.WARN,...t),this._logHandler(this,en.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,en.ERROR,...t),this._logHandler(this,en.ERROR,...t)}}let on,ln;const un=new WeakMap,cn=new WeakMap,hn=new WeakMap,dn=new WeakMap,fn=new WeakMap;let pn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return cn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||hn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function mn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ln||(ln=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(vn(this),n),yn(un.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yn(e.apply(vn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(vn(this),t,...r);return hn.set(s,t.sort?t.sort():[t]),yn(s)}}function gn(e){return"function"===typeof e?mn(e):(e instanceof IDBTransaction&&function(e){if(cn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});cn.set(e,t)}(e),t=e,(on||(on=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,pn):e);var t}function yn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(yn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&un.set(t,e)}).catch(()=>{}),fn.set(t,e),t}(e);if(dn.has(e))return dn.get(e);const t=gn(e);return t!==e&&(dn.set(e,t),fn.set(t,e)),t}const vn=e=>fn.get(e);const bn=["get","getKey","getAll","getAllKeys","count"],wn=["put","add","delete","clear"],xn=new Map;function _n(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(xn.get(t))return xn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=wn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!bn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return xn.set(t,s),s}pn=(e=>({...e,get:(t,n,r)=>_n(t,n)||e.get(t,n,r),has:(t,n)=>!!_n(t,n)||e.has(t,n)}))(pn);class En{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const kn="@firebase/app",Sn="0.10.13",Nn=new an("@firebase/app"),Tn="@firebase/app-compat",Cn="@firebase/analytics-compat",In="@firebase/analytics",An="@firebase/app-check-compat",Pn="@firebase/app-check",Rn="@firebase/auth",Dn="@firebase/auth-compat",On="@firebase/database",jn="@firebase/data-connect",Ln="@firebase/database-compat",Mn="@firebase/functions",Un="@firebase/functions-compat",Fn="@firebase/installations",Vn="@firebase/installations-compat",zn="@firebase/messaging",Bn="@firebase/messaging-compat",$n="@firebase/performance",qn="@firebase/performance-compat",Hn="@firebase/remote-config",Wn="@firebase/remote-config-compat",Kn="@firebase/storage",Gn="@firebase/storage-compat",Qn="@firebase/firestore",Yn="@firebase/vertexai-preview",Xn="@firebase/firestore-compat",Jn="firebase",Zn="[DEFAULT]",er={[kn]:"fire-core",[Tn]:"fire-core-compat",[In]:"fire-analytics",[Cn]:"fire-analytics-compat",[Pn]:"fire-app-check",[An]:"fire-app-check-compat",[Rn]:"fire-auth",[Dn]:"fire-auth-compat",[On]:"fire-rtdb",[jn]:"fire-data-connect",[Ln]:"fire-rtdb-compat",[Mn]:"fire-fn",[Un]:"fire-fn-compat",[Fn]:"fire-iid",[Vn]:"fire-iid-compat",[zn]:"fire-fcm",[Bn]:"fire-fcm-compat",[$n]:"fire-perf",[qn]:"fire-perf-compat",[Hn]:"fire-rc",[Wn]:"fire-rc-compat",[Kn]:"fire-gcs",[Gn]:"fire-gcs-compat",[Qn]:"fire-fst",[Xn]:"fire-fst-compat",[Yn]:"fire-vertex","fire-js":"fire-js",[Jn]:"fire-js-all"},tr=new Map,nr=new Map,rr=new Map;function ir(e,t){try{e.container.addComponent(t)}catch(Ne){Nn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Ne)}}function sr(e){const t=e.name;if(rr.has(t))return Nn.debug(`There were multiple attempts to register component ${t}.`),!1;rr.set(t,e);for(const n of tr.values())ir(n,e);for(const n of nr.values())ir(n,e);return!0}function ar(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function or(e){return void 0!==e.settings}const lr=new Ft("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ur{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Qt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}const cr="10.14.1";function hr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Zn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw lr.create("bad-app-name",{appName:String(i)});if(n||(n=Rt()),!n)throw lr.create("no-options");const s=tr.get(i);if(s){if(zt(n,s.options)&&zt(r,s.config))return s;throw lr.create("duplicate-app",{appName:i})}const a=new Jt(i);for(const l of rr.values())a.addComponent(l);const o=new ur(n,r,a);return tr.set(i,o),o}function dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn;const t=tr.get(e);if(!t&&e===Zn&&Rt())return hr();if(!t)throw lr.create("no-app",{appName:e});return t}function fr(e,t,n){var r;let i=null!==(r=er[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Nn.warn(e.join(" "))}sr(new Qt(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const pr="firebase-heartbeat-store";let mr=null;function gr(){return mr||(mr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=yn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(yn(a.result),e.oldVersion,e.newVersion,yn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pr)}catch(Ne){console.warn(Ne)}}}).catch(e=>{throw lr.create("idb-open",{originalErrorMessage:e.message})})),mr}async function yr(e,t){try{const n=(await gr()).transaction(pr,"readwrite"),r=n.objectStore(pr);await r.put(t,vr(e)),await n.done}catch(Ne){if(Ne instanceof Ut)Nn.warn(Ne.message);else{const t=lr.create("idb-set",{originalErrorMessage:null===Ne||void 0===Ne?void 0:Ne.message});Nn.warn(t.message)}}}function vr(e){return`${e.name}!${e.options.appId}`}class br{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wr();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Ne){Nn.warn(Ne)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=wr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),_r(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_r(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Tt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(Ne){return Nn.warn(Ne),""}}}function wr(){return(new Date).toISOString().substring(0,10)}class xr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Mt()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await gr()).transaction(pr),n=await t.objectStore(pr).get(vr(e));return await t.done,n}catch(Ne){if(Ne instanceof Ut)Nn.warn(Ne.message);else{const t=lr.create("idb-get",{originalErrorMessage:null===Ne||void 0===Ne?void 0:Ne.message});Nn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return yr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return yr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function _r(e){return Tt(JSON.stringify({version:2,heartbeats:e})).length}var Er;Er="",sr(new Qt("platform-logger",e=>new En(e),"PRIVATE")),sr(new Qt("heartbeat",e=>new br(e),"PRIVATE")),fr(kn,Sn,Er),fr(kn,Sn,"esm2017"),fr("fire-js","");function kr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Sr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nr=Sr,Tr=new Ft("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Cr=new an("@firebase/auth");function Ir(e){if(Cr.logLevel<=en.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Cr.error(`Auth (${cr}): ${e}`,...n)}}function Ar(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Or(e,...n)}function Pr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Or(e,...n)}function Rr(e,t,n){const r=Object.assign(Object.assign({},Nr()),{[t]:n});return new Ft("auth","Firebase",r).create(t,{appName:e.name})}function Dr(e){return Rr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Or(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Tr.create(e,...n)}function jr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Or(t,...r)}}function Lr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ir(t),new Error(t)}function Mr(e,t){e||Lr(t)}function Ur(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Fr(){return"http:"===Vr()||"https:"===Vr()}function Vr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function zr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Fr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Br{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return zr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $r(e,t){Mr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class qr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Wr=new Br(3e4,6e4);function Kr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Gr(e,t,n,r){return Qr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=$t(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),qr.fetch()(Xr(e,e.config.apiHost,n,a),l)})}async function Qr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hr),t);try{const t=new Zr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ei(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ei(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ei(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ei(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Rr(e,o,a);Ar(e,o)}}catch(Ne){if(Ne instanceof Ut)throw Ne;Ar(e,"network-request-failed",{message:String(Ne)})}}async function Yr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Gr(e,t,n,r,i);return"mfaPendingCredential"in s&&Ar(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Xr(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?$r(e.config,i):`${e.config.apiScheme}://${i}`}function Jr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Pr(this.auth,"network-request-failed")),Wr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ei(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pr(e,t,r);return i.customData._tokenResponse=n,i}function ti(e){return void 0!==e&&void 0!==e.enterprise}class ni{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Jr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ri(e,t){return Gr(e,"GET","/v2/recaptchaConfig",Kr(e,t))}async function ii(e,t){return Gr(e,"POST","/v1/accounts:lookup",t)}function si(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Ne){}}function ai(e){return 1e3*Number(e)}function oi(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ir("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ct(n);return e?JSON.parse(e):(Ir("Failed to decode base64 JWT payload"),null)}catch(Ne){return Ir("Caught error parsing JWT payload as JSON",null===Ne||void 0===Ne?void 0:Ne.toString()),null}}function li(e){const t=oi(e);return jr(t,"internal-error"),jr("undefined"!==typeof t.exp,"internal-error"),jr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ui(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Ne){throw Ne instanceof Ut&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(Ne)&&e.auth.currentUser===e&&await e.auth.signOut(),Ne}}class ci{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Ne){return void("auth/network-request-failed"===(null===Ne||void 0===Ne?void 0:Ne.code)&&this.schedule(!0))}this.schedule()}}class hi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=si(this.lastLoginAt),this.creationTime=si(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function di(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ui(e,ii(n,{idToken:r}));jr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?fi(s.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),c=!!l&&u,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new hi(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,h)}function fi(e){return e.map(e=>{var{providerId:t}=e,n=kr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class pi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){jr(e.idToken,"internal-error"),jr("undefined"!==typeof e.idToken,"internal-error"),jr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):li(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){jr(0!==e.length,"internal-error");const t=li(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(jr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Qr(e,{},async()=>{const n=$t({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Xr(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qr.fetch()(s,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new pi;return n&&(jr("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(jr("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(jr("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pi,this.toJSON())}_performRefresh(){return Lr("not implemented")}}function mi(e,t){jr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class gi{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=kr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ci(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new hi(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ui(this,this.stsTokenManager.getToken(this.auth,e));return jr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Gt(e),r=await n.getIdToken(t),i=oi(r);jr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:si(ai(i.auth_time)),issuedAtTime:si(ai(i.iat)),expirationTime:si(ai(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Gt(e);await di(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(jr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){jr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await di(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(Dr(this.auth));const e=await this.getIdToken();return await ui(this,async function(e,t){return Gr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:_}=t;jr(v&&_,e,"internal-error");const E=pi.fromJSON(this.name,_);jr("string"===typeof v,e,"internal-error"),mi(c,e.name),mi(h,e.name),jr("boolean"===typeof b,e,"internal-error"),jr("boolean"===typeof w,e,"internal-error"),mi(d,e.name),mi(f,e.name),mi(p,e.name),mi(m,e.name),mi(g,e.name),mi(y,e.name);const k=new gi({uid:v,auth:e,email:h,emailVerified:b,displayName:c,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(k.providerData=x.map(e=>Object.assign({},e))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new pi;r.updateFromServerResponse(t);const i=new gi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await di(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];jr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?fi(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new pi;a.updateFromIdToken(n);const o=new gi({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new hi(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const yi=new Map;function vi(e){Mr(e instanceof Function,"Expected a class definition");let t=yi.get(e);return t?(Mr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yi.set(e,t),t)}class bi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bi.type="NONE";const wi=bi;function xi(e,t,n){return`firebase:${e}:${t}:${n}`}class _i{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=xi(this.userKey,r.apiKey,i),this.fullPersistenceKey=xi("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?gi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new _i(vi(wi),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||vi(wi);const s=xi(n,e.config.apiKey,e.name);let a=null;for(const u of t)try{const t=await u._get(s);if(t){const n=gi._fromJSON(e,t);u!==i&&(a=n),i=u;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new _i(i,e,n)):new _i(i,e,n)}}function Ei(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ti(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ki(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ii(t))return"Blackberry";if(Ai(t))return"Webos";if(Si(t))return"Safari";if((t.includes("chrome/")||Ni(t))&&!t.includes("edge/"))return"Chrome";if(Ci(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ki(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt();return/firefox\//i.test(e)}function Si(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt();return/crios\//i.test(e)}function Ti(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt();return/iemobile/i.test(e)}function Ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt();return/android/i.test(e)}function Ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt();return/blackberry/i.test(e)}function Ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt();return/webos/i.test(e)}function Pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ri(){return function(){const e=jt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt();return Pi(e)||Ci(e)||Ai(e)||Ii(e)||/windows phone/i.test(e)||Ti(e)}function Oi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ei(jt());break;case"Worker":t=`${Ei(jt())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${cr}/${r}`}class ji{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Ne){r(Ne)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Ne){t.reverse();for(const n of t)try{n()}catch(ut){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Ne||void 0===Ne?void 0:Ne.message})}}}class Li{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Mi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fi(this),this.idTokenSubscription=new Fi(this),this.beforeStateQueue=new ji(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vi(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await _i.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Ne){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ii(this,{idToken:e}),n=await gi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(or(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Ne){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Ne))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return jr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Ne){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await di(e)}catch(Ne){if("auth/network-request-failed"!==(null===Ne||void 0===Ne?void 0:Ne.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(Dr(this));const t=e?Gt(e):null;return t&&jr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&jr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(Dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(Dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Gr(e,"GET","/v2/passwordPolicy",Kr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Li(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ft("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Gr(e,"POST","/v2/accounts:revokeToken",Kr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vi(e)||this._popupRedirectResolver;jr(t,this,"argument-error"),this.redirectPersistenceManager=await _i.create(this,[vi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(jr(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return jr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Oi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Cr.logLevel<=en.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Cr.warn(`Auth (${cr}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Ui(e){return Gt(e)}class Fi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Wt(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return jr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Vi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zi(e){return Vi.loadJS(e)}function Bi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class $i{constructor(e){this.type="recaptcha-enterprise",this.auth=Ui(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ti(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{ri(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ni(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&ti(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Vi.recaptchaEnterpriseScript;0!==t.length&&(t+=i),zi(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function qi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new $i(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Hi(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qi(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await qi(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}function Wi(e,t,n){const r=Ui(e);jr(r._canInitEmulator,r,"emulator-config-failed"),jr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ki(t),{host:a,port:o}=function(e){const t=Ki(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Gi(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Gi(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ki(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gi(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Qi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lr("not implemented")}_getIdTokenResponse(e){return Lr("not implemented")}_linkToIdToken(e,t){return Lr("not implemented")}_getReauthenticationResolver(e){return Lr("not implemented")}}async function Yi(e,t){return Gr(e,"POST","/v1/accounts:signUp",t)}async function Xi(e,t){return Yr(e,"POST","/v1/accounts:signInWithPassword",Kr(e,t))}class Ji extends Qi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ji(e,t,"password")}static _fromEmailAndCode(e,t){return new Ji(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Hi(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Xi);case"emailLink":return async function(e,t){return Yr(e,"POST","/v1/accounts:signInWithEmailLink",Kr(e,t))}(e,{email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Hi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yi);case"emailLink":return async function(e,t){return Yr(e,"POST","/v1/accounts:signInWithEmailLink",Kr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zi(e,t){return Yr(e,"POST","/v1/accounts:signInWithIdp",Kr(e,t))}class es extends Qi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=kr(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new es(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Zi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Zi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$t(t)}return e}}const ts={USER_NOT_FOUND:"user-not-found"};class ns extends Qi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ns({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ns({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Yr(e,"POST","/v1/accounts:signInWithPhoneNumber",Kr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Yr(e,"POST","/v1/accounts:signInWithPhoneNumber",Kr(e,t));if(n.temporaryProof)throw ei(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Yr(e,"POST","/v1/accounts:signInWithPhoneNumber",Kr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ts)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ns({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class rs{constructor(e){var t,n,r,i,s,a;const o=qt(Ht(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,u=null!==(n=o.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);jr(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=qt(Ht(e)).link,n=t?qt(Ht(t)).deep_link_id:null,r=qt(Ht(e)).deep_link_id;return(r?qt(Ht(r)).link:null)||r||n||t||e}(e);try{return new rs(t)}catch(n){return null}}}class is{constructor(){this.providerId=is.PROVIDER_ID}static credential(e,t){return Ji._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=rs.parseLink(t);return jr(n,"argument-error"),Ji._fromEmailAndCode(e,n.code,n.tenantId)}}is.PROVIDER_ID="password",is.EMAIL_PASSWORD_SIGN_IN_METHOD="password",is.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ss{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class as extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class os extends as{constructor(){super("facebook.com")}static credential(e){return es._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return os.credential(t.oauthAccessToken)}catch(n){return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com",os.PROVIDER_ID="facebook.com";class ls extends as{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return es._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ls.credential(n,r)}catch(i){return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com",ls.PROVIDER_ID="google.com";class us extends as{constructor(){super("github.com")}static credential(e){return es._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return us.credential(t.oauthAccessToken)}catch(n){return null}}}us.GITHUB_SIGN_IN_METHOD="github.com",us.PROVIDER_ID="github.com";class cs extends as{constructor(){super("twitter.com")}static credential(e,t){return es._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return cs.credential(n,r)}catch(i){return null}}}async function hs(e,t){return Yr(e,"POST","/v1/accounts:signUp",Kr(e,t))}cs.TWITTER_SIGN_IN_METHOD="twitter.com",cs.PROVIDER_ID="twitter.com";class ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await gi._fromIdTokenResponse(e,n,r),s=fs(n);return new ds({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=fs(n);return new ds({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function fs(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ps extends Ut{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ps.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ps(e,t,n,r)}}function ms(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw ps._fromErrorAndOperation(e,n,t,r);throw n})}async function gs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ui(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ds._forOperation(e,"link",r)}async function ys(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(or(r.app))return Promise.reject(Dr(r));const i="reauthenticate";try{const s=await ui(e,ms(r,i,t,e),n);jr(s.idToken,r,"internal-error");const a=oi(s.idToken);jr(a,r,"internal-error");const{sub:o}=a;return jr(e.uid===o,r,"user-mismatch"),ds._forOperation(e,i,s)}catch(Ne){throw"auth/user-not-found"===(null===Ne||void 0===Ne?void 0:Ne.code)&&Ar(r,"user-mismatch"),Ne}}async function vs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(or(e.app))return Promise.reject(Dr(e));const r="signIn",i=await ms(e,r,t),s=await ds._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function bs(e,t){return vs(Ui(e),t)}async function ws(e,t){return ys(Gt(e),t)}async function xs(e){const t=Ui(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function _s(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Gt(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await ui(i,async function(e,t){return Gr(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}async function Es(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await ui(e,async function(e,t){return Gr(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}new WeakMap;const ks="__sak";class Ss{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ks,"1"),this.storage.removeItem(ks),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ns extends Ss{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Di(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ri()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ns.type="LOCAL";const Ts=Ns;class Cs extends Ss{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Cs.type="SESSION";const Is=Cs;class As{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new As(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}As.receivers=[];class Rs{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=Ps("",20);r.port1.start();const u=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(u),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Ds(){return window}function Os(){return"undefined"!==typeof Ds().WorkerGlobalScope&&"function"===typeof Ds().importScripts}const js="firebaseLocalStorageDb",Ls="firebaseLocalStorage",Ms="fbase_key";class Us{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fs(e,t){return e.transaction([Ls],t?"readwrite":"readonly").objectStore(Ls)}function Vs(){const e=indexedDB.open(js,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ls,{keyPath:Ms})}catch(Ne){n(Ne)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Ls)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(js);return new Us(e).toPromise()}(),t(await Vs()))})})}async function zs(e,t,n){const r=Fs(e,!0).put({[Ms]:t,value:n});return new Us(r).toPromise()}function Bs(e,t){const n=Fs(e,!0).delete(t);return new Us(n).toPromise()}class $s{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Vs()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Ne){if(t++>3)throw Ne;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Os()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=As._getInstance(Os()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Rs(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vs();return await zs(e,ks,"1"),await Bs(e,ks),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>zs(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Fs(e,!1).get(t),r=await new Us(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Bs(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Fs(e,!1).getAll();return new Us(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}$s.type="LOCAL";const qs=$s;Bi("rcb"),new Br(3e4,6e4);const Hs="recaptcha";async function Ws(e,t,n){var r;const i=await n.verify();try{let s;if(jr("string"===typeof i,e,"argument-error"),jr(n.type===Hs,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){jr("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Gr(e,"POST","/v2/accounts/mfaEnrollment:start",Kr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{jr("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;jr(n,e,"missing-multi-factor-info");const a=await function(e,t){return Gr(e,"POST","/v2/accounts/mfaSignIn:start",Kr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Gr(e,"POST","/v1/accounts:sendVerificationCode",Kr(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Ks{constructor(e){this.providerId=Ks.PROVIDER_ID,this.auth=Ui(e)}verifyPhoneNumber(e,t){return Ws(this.auth,e,Gt(t))}static credential(e,t){return ns._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ks.credentialFromTaggedObject(t)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ns._fromTokenResponse(n,r):null}}function Gs(e,t){return t?vi(t):(jr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ks.PROVIDER_ID="phone",Ks.PHONE_SIGN_IN_METHOD="phone";class Qs extends Qi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ys(e){return vs(e.auth,new Qs(e),e.bypassAuthState)}function Xs(e){const{auth:t,user:n}=e;return jr(n,t,"internal-error"),ys(n,new Qs(e),e.bypassAuthState)}async function Js(e){const{auth:t,user:n}=e;return jr(n,t,"internal-error"),gs(n,new Qs(e),e.bypassAuthState)}class Zs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Ne){this.reject(Ne)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Ne){this.reject(Ne)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ys;case"linkViaPopup":case"linkViaRedirect":return Js;case"reauthViaPopup":case"reauthViaRedirect":return Xs;default:Ar(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ea=new Br(2e3,1e4);class ta extends Zs{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ta.currentPopupAction&&ta.currentPopupAction.cancel(),ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return jr(e,this.auth,"internal-error"),e}async onExecution(){Mr(1===this.filter.length,"Popup operations only handle one event");const e=Ps();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ea.get())};e()}}ta.currentPopupAction=null;const na=new Map;class ra extends Zs{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=na.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=aa(t),r=sa(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Ne){e=()=>Promise.reject(Ne)}na.set(this.auth._key(),e)}return this.bypassAuthState||na.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ia(e,t){na.set(e._key(),t)}function sa(e){return vi(e._redirectPersistence)}function aa(e){return xi("pendingRedirect",e.config.apiKey,e.name)}async function oa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(or(e.app))return Promise.reject(Dr(e));const r=Ui(e),i=Gs(r,t),s=new ra(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class la{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ca(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ca(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Pr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ua(e))}saveEventToCache(e){this.cachedEventUids.add(ua(e)),this.lastProcessedEventTime=Date.now()}}function ua(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ca(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const ha=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,da=/^https?/;async function fa(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Gr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(pa(r))return}catch(n){}Ar(e,"unauthorized-domain")}function pa(e){const t=Ur(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!da.test(n))return!1;if(ha.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ma=new Br(3e4,6e4);function ga(){const e=Ds().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ya(e){return new Promise((t,n)=>{var r,i,s;function a(){ga(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ga(),n(Pr(e,"network-request-failed"))},timeout:ma.get()})}if(null===(i=null===(r=Ds().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Ds().gapi)||void 0===s?void 0:s.load)){const t=Bi("iframefcb");return Ds()[t]=()=>{gapi.load?a():n(Pr(e,"network-request-failed"))},zi(`${Vi.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw va=null,e})}let va=null;const ba=new Br(5e3,15e3),wa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _a(e){const t=e.config;jr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?$r(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:cr},i=xa.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${$t(r).slice(1)}`}async function Ea(e){const t=await function(e){return va=va||ya(e),va}(e),n=Ds().gapi;return jr(n,e,"internal-error"),t.open({where:document.body,url:_a(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wa,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Pr(e,"network-request-failed"),s=Ds().setTimeout(()=>{r(i)},ba.get());function a(){Ds().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const ka={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sa{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Ne){}}}function Na(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},ka),{width:r.toString(),height:i.toString(),top:s,left:a}),u=jt().toLowerCase();n&&(o=Ni(u)?"_blank":n),ki(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return Pi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Sa(null);const h=window.open(t||"",o,c);jr(h,e,"popup-blocked");try{h.focus()}catch(Ne){}return new Sa(h)}const Ta="__/auth/handler",Ca="emulator/auth/handler",Ia=encodeURIComponent("fac");async function Aa(e,t,n,r,i,s){jr(e.config.authDomain,e,"auth-domain-config-required"),jr(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:cr,eventId:i};if(t instanceof ss){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof as){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const c of Object.keys(o))void 0===o[c]&&delete o[c];const l=await e._getAppCheckToken(),u=l?`#${Ia}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Ta}`;return $r(t,Ca)}(e)}?${$t(o).slice(1)}${u}`}const Pa="webStorageSupport";const Ra=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Is,this._completeRedirectFn=oa,this._overrideRedirectResult=ia}async _openPopup(e,t,n,r){var i;Mr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Na(e,await Aa(e,t,n,Ur(),r),Ps())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ds().location.href=e}(await Aa(e,t,n,Ur(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Mr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ea(e),n=new la(e);return t.register("authEvent",t=>{jr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pa,{type:Pa},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Pa];void 0!==i&&t(!!i),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fa(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Di()||Si()||Pi()}};var Da="@firebase/auth",Oa="1.7.9";class ja{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){jr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const La=Dt("authIdTokenMaxAge")||300;let Ma=null;var Ua;!function(e){Vi=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Pr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Ua="Browser",sr(new Qt("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;jr(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Ua,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oi(Ua)},u=new Mi(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),sr(new Qt("auth-internal",e=>(e=>new ja(e))(Ui(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),fr(Da,Oa,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ua)),fr(Da,Oa,"esm2017");fr("firebase","10.14.1","app");var Fa,Va,za="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ba={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(o,o);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=a(n)).j(t);h(u)||0<u.l(e);)u=(s=a(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Va=Ba.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(u))):i=(i=i.j(r)).add(a(u))}return i},Fa=Ba.Integer=r}).apply("undefined"!==typeof za?za:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var $a,qa,Ha,Wa,Ka,Ga,Qa,Ya,Xa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ja={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Xa&&Xa];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout(()=>{throw e},0)}function k(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new N,e=>e.reset());class N{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,C=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(P)}};var P=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(Re){E(Re)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function R(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(Re){}return e}();function j(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(Me){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&j.aa.h.call(this)}}h(j,D);var L={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=$(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new j(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;x(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ue=[];function ce(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function be(){D.call(this,"c")}h(ve,D),h(be,D);var we={},xe=null;function _e(){return xe=xe||new ne}function Ee(e){D.call(this,we.La,e)}function ke(e){const t=_e();re(t,new Ee(t))}function Se(e,t){D.call(this,we.STAT_EVENT,e),this.stat=t}function Te(e){const t=_e();re(t,new Se(t,e))}function Ae(e,t){D.call(this,we.Ma,e),this.size=t}function Pe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function De(){this.g=!0}function Oe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return he(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",h(Ee,D),we.STAT_EVENT="statevent",h(Se,D),we.Ma="timingevent",h(Ae,D),De.prototype.xa=function(){this.g=!1},De.prototype.info=function(){};var je,Ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ve(){}function ze(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Be}function Be(){this.i=null,this.g="",this.h=!1}h(Ve,pe),Ve.prototype.g=function(){return new XMLHttpRequest},Ve.prototype.i=function(){return{}},je=new Ve;var $e={},qe={};function He(e,t,n){e.L=1,e.v=yt(dt(t)),e.m=n,e.P=!0,We(e,null)}function We(e,t){e.F=Date.now(),Qe(e),e.A=dt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),At(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Be,e.g=vn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var a=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var u=o[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ke(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ge(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?qe:(n=Number(t.substring(n,r)),isNaN(n)?$e:(r+=1)+n>t.length?qe:(t=t.slice(r,r+n),e.C=r+n,t))}function Qe(e){e.S=Date.now()+e.I,Ye(e,e.I)}function Ye(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Pe(u(e.ba,e),t)}function Xe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Je(e){0==e.j.G||e.J||fn(e.j,e)}function Ze(e){Xe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function et(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||st(n.h,e)))if(!e.K&&st(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(Ce){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;dn(n),tn(n)}un(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Pe(u(n.Za,n),6e3));if(1>=it(n.h)&&n.ca){try{n.ca()}catch(Ce){}n.ca=void 0}}else mn(n,11)}else if((e.K||n.g==e)&&dn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(at(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,gt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=yn(r,r.J?r.ia:null,r.W),a.K){ot(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(Xe(o),Qe(o)),r.g=a}else ln(r);0<n.i.length&&rn(n)}else"stop"!=u[0]&&"close"!=u[0]||mn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?mn(n,7):en(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}ke()}catch(Ce){}}ze.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Yt(e)?t.j():this.Y(e)},ze.prototype.Y=function(e){try{if(e==this.g)e:{const d=Yt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Xt(this.g)))){this.J||4!=d||7==t||ke(),Xe(this);var n=this.g.Z();this.X=n;t:if(Ke(this)){var r=Xt(this.g);e="";var s=r.length,a=4==Yt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ze(this),Je(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Te(12),Ze(this),Je(this);break e}Oe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,et(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ge(this,o),e==qe){4==d&&(this.s=4,Te(14),n=!1),Oe(this.i,this.l,null,"[Incomplete Response]");break}if(e==$e){this.s=4,Te(15),Oe(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Oe(this.i,this.l,e,null),et(this,e)}if(Ke(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),cn(h),h.M=!0,Te(11))}}else Oe(this.i,this.l,o,"[Invalid Chunked Response]"),Ze(this),Je(this)}else Oe(this.i,this.l,o,null),et(this,o);4==d&&Ze(this),this.o&&!this.J&&(4==d?fn(this.j,this):(this.o=!1,Qe(this)))}else(function(e){const t={};e=(e.g&&2<=Yt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=_(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ze(this),Je(this)}}}catch(Za){}},ze.prototype.cancel=function(){this.J=!0,Ze(this)},ze.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),Te(17)),Ze(this),this.s=2,Je(this)):Ye(this,this.S-e)};var tt=class{constructor(e,t){this.g=e,this.map=t}};function nt(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function it(e){return e.h?1:e.g?e.g.size:0}function st(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function at(e,t){e.g?e.g.add(t):e.h=t}function ot(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function ut(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}nt.prototype.cancel=function(){if(this.i=lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ct=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ht(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ht){this.h=e.h,ft(this,e.j),this.o=e.o,this.g=e.g,pt(this,e.s),this.l=e.l;var t=e.i,n=new Nt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),mt(this,n),this.m=e.m}else e&&(t=String(e).match(ct))?(this.h=!1,ft(this,t[1]||"",!0),this.o=vt(t[2]||""),this.g=vt(t[3]||"",!0),pt(this,t[4]),this.l=vt(t[5]||"",!0),mt(this,t[6]||"",!0),this.m=vt(t[7]||"")):(this.h=!1,this.i=new Nt(null,this.h))}function dt(e){return new ht(e)}function ft(e,t,n){e.j=n?vt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function mt(e,t,n){t instanceof Nt?(e.i=t,function(e,t){t&&!e.j&&(Tt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ct(this,t),At(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=bt(t,kt)),e.i=new Nt(t,e.h))}function gt(e,t,n){e.i.set(t,n)}function yt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ht.prototype.toString=function(){var e=[],t=this.j;t&&e.push(bt(t,xt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(bt(t,xt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(bt(n,"/"==n.charAt(0)?Et:_t,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",bt(n,St)),e.join("")};var xt=/[#\/\?@]/g,_t=/[#\?:]/g,Et=/[#\?]/g,kt=/[#\?@]/g,St=/#/g;function Nt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Tt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ct(e,t){Tt(e),t=Pt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function It(e,t){return Tt(e),t=Pt(e,t),e.g.has(t)}function At(e,t,n){Ct(e,t),0<n.length&&(e.i=null,e.g.set(Pt(e,t),d(n)),e.h+=n.length)}function Pt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Rt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(Me){}}function Dt(){this.g=new fe}function Ot(e,t,n){const r=n||"";try{ut(e,function(e,n){let i=e;a(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(Ne){throw t.push(r+"type="+encodeURIComponent("_badmap")),Ne}}function jt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Lt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Mt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ut(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ft(e)}function Ft(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Vt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function zt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Vt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):gt(e,t,n))}function Bt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Nt.prototype).add=function(e,t){Tt(this),this.i=null,e=Pt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Tt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Tt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Tt(this);let t=[];if("string"===typeof e)It(this,e)&&(t=t.concat(this.g.get(Pt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Tt(this),this.i=null,It(this,e=Pt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},h(jt,pe),jt.prototype.g=function(){return new Lt(this.l,this.j)},jt.prototype.i=function(e){return function(){return e}}({}),h(Lt,ne),(e=Lt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ft(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ut(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ft(this)),this.g&&(this.readyState=3,Ft(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ut(this):Ft(this),3==this.readyState&&Mt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ut(this))},e.Qa=function(e){this.g&&(this.response=e,Ut(this))},e.ga=function(){this.g&&Ut(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Bt,ne);var $t=/^https?$/i,qt=["POST","PUT"];function Ht(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Wt(e),Gt(e)}function Wt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Kt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Yt(e)||2!=e.Z()))if(e.u&&4==Yt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Yt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(ct)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!$t.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Yt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Wt(e)}}finally{Gt(e)}}}function Gt(e,t){if(e.g){Qt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Ne){}}}function Qt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Yt(e){return e.g?e.g.readyState:0}function Xt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Jt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Zt(e){this.Aa=0,this.i=[],this.j=new De,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jt("baseRetryDelayMs",5e3,e),this.cb=Jt("retryDelaySeedMs",1e4,e),this.Wa=Jt("forwardChannelMaxRetries",2,e),this.wa=Jt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new nt(e&&e.concurrentRequestLimit),this.Da=new Dt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function en(e){if(nn(e),3==e.G){var t=e.U++,n=dt(e.I);if(gt(n,"SID",e.K),gt(n,"RID",t),gt(n,"TYPE","terminate"),an(e,n),(t=new ze(e,e.j,t)).L=2,t.v=yt(dt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(Le){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Qe(t)}gn(e)}function tn(e){e.g&&(cn(e),e.g.cancel(),e.g=null)}function nn(e){tn(e),e.u&&(i.clearTimeout(e.u),e.u=null),dn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function rn(e){if(!rt(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||A(),C||(T(),C=!0),I.add(t,e),e.B=0}}function sn(e,t){var n;n=t?t.l:e.U++;const r=dt(e.I);gt(r,"SID",e.K),gt(r,"RID",n),gt(r,"AID",e.T),an(e,r),e.m&&e.o&&zt(r,e.m,e.o),n=new ze(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=on(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),at(e.h,n),He(n,r,t)}function an(e,t){e.H&&v(e.H,function(e,n){gt(t,n,e)}),e.l&&ut({},function(e,n){gt(t,n,e)})}function on(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{Ot(o,e,"req"+n+"_")}catch(Za){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function ln(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||A(),C||(T(),C=!0),I.add(t,e),e.v=0}}function un(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Pe(u(e.Fa,e),pn(e,e.v)),e.v++,!0)}function cn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function hn(e){e.g=new ze(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=dt(e.qa);gt(t,"RID","rpc"),gt(t,"SID",e.K),gt(t,"AID",e.T),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&gt(t,"TO",e.ja),gt(t,"TYPE","xmlhttp"),an(e,t),e.m&&e.o&&zt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=yt(dt(t)),n.m=null,n.P=!0,We(n,e)}function dn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function fn(e,t){var n=null;if(e.g==t){dn(e),cn(e),e.g=null;var r=2}else{if(!st(e.h,t))return;n=t.D,ot(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=_e(),new Ae(r,n)),rn(e)}else ln(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(it(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Pe(u(e.Ga,e,t),pn(e,e.B)),e.B++,!0))}(e,t)||2==r&&un(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:mn(e,5);break;case 4:mn(e,10);break;case 3:mn(e,6);break;default:mn(e,2)}}function pn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function mn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new ht(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ft(r,"https"),yt(r),t?function(e,t){const n=new De;if(i.Image){const r=new Image;r.onload=c(Rt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Rt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Rt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Rt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new De;const n=new AbortController,r=setTimeout(()=>{n.abort(),Rt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Rt(0,0,!0,t):Rt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Rt(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),gn(e),nn(e)}function gn(e){if(e.G=0,e.ka=[],e.l){const t=lt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function yn(e,t,n){var r=n instanceof ht?dt(n):new ht(n);if(""!=r.g)t&&(r.g=t+"."+r.g),pt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new ht(null);r&&ft(a,r),t&&(a.g=t),s&&pt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&gt(r,n,t),gt(r,"VER",e.la),an(e,r),r}function vn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Bt(new jt({eb:n})):new Bt(e.pa)).Ha(e.J),t}function bn(){}function wn(){}function xn(e,t){ne.call(this),this.g=new Zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new kn(this)}function _n(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function En(){be.call(this),this.status=1}function kn(e){this.g=e}(e=Bt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?me(this.o):me(je),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Me){return void Ht(this,Me)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(qt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(Me){Ht(this,Me)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Gt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gt(this,!0)),Bt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Kt(this):this.bb())},e.bb=function(){Kt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch(Ie){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Ie){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Zt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=yn(this,null,this.W),rn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new ze(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=on(this,i,t),gt(n=dt(this.I),"RID",e),gt(n,"CVER",22),this.D&&gt(n,"X-HTTP-Session-Id",this.D),an(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Vt(s)))+"&"+t:this.m&&zt(n,this.m,s)),at(this.h,i),this.Ua&&gt(n,"TYPE","init"),this.P?(gt(n,"$req",t),gt(n,"SID","null"),i.T=!0,He(i,n,null)):He(i,n,t),this.G=2}}else 3==this.G&&(e?sn(this,e):0==this.i.length||rt(this.h)||sn(this))},e.Fa=function(){if(this.u=null,hn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Pe(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),tn(this),hn(this))},e.Za=function(){null!=this.C&&(this.C=null,tn(this),un(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},wn.prototype.g=function(e,t){return new xn(e,t)},h(xn,ne),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){en(this.g)},xn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new tt(t.Ya++,e)),3==t.G&&rn(t)},xn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,xn.aa.N.call(this)},h(_n,ve),h(En,be),h(kn,bn),kn.prototype.ua=function(){re(this.g,"a")},kn.prototype.ta=function(e){re(this.g,new _n(e))},kn.prototype.sa=function(e){re(this.g,new En)},kn.prototype.ra=function(){re(this.g,"b")},wn.prototype.createWebChannel=wn.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,Ya=Ja.createWebChannelTransport=function(){return new wn},Qa=Ja.getStatEventTarget=function(){return _e()},Ga=Ja.Event=we,Ka=Ja.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ue.NO_ERROR=0,Ue.TIMEOUT=8,Ue.HTTP_ERROR=6,Wa=Ja.ErrorCode=Ue,Fe.COMPLETE="complete",Ha=Ja.EventType=Fe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,qa=Ja.WebChannel=ge,Ja.FetchXmlHttpFactory=jt,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,$a=Ja.XhrIo=Bt}).apply("undefined"!==typeof Xa?Xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Za="@firebase/firestore";class eo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}eo.UNAUTHENTICATED=new eo(null),eo.GOOGLE_CREDENTIALS=new eo("google-credentials-uid"),eo.FIRST_PARTY=new eo("first-party-uid"),eo.MOCK_USER=new eo("mock-user");let to="10.14.0";const no=new an("@firebase/firestore");function ro(){return no.logLevel}function io(e){if(no.logLevel<=en.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(oo);no.debug(`Firestore (${to}): ${e}`,...i)}}function so(e){if(no.logLevel<=en.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(oo);no.error(`Firestore (${to}): ${e}`,...i)}}function ao(e){if(no.logLevel<=en.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(oo);no.warn(`Firestore (${to}): ${e}`,...i)}}function oo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Te){return e}}function lo(){const e=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw so(e),new Error(e)}function uo(e,t){e||lo()}function co(e,t){return e}const ho={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fo extends Ut{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class po{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class go{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(eo.UNAUTHENTICATED))}shutdown(){}}class yo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vo{constructor(e){this.t=e,this.currentUser=eo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){uo(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new po;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new po,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{io("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(io("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new po)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(io("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(uo("string"==typeof t.accessToken),new mo(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return uo(null===e||"string"==typeof e),new eo(e)}}class bo{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=eo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wo{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new bo(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(eo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _o{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){uo(void 0===this.o);const n=e=>{null!=e.error&&io("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,io("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{io("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):io("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(uo("string"==typeof e.token),this.R=e.token,new xo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Eo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ko{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Eo(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function So(e,t){return e<t?-1:e>t?1:0}function No(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class To{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fo(ho.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fo(ho.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fo(ho.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fo(ho.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return To.fromMillis(Date.now())}static fromDate(e){return To.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new To(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?So(this.nanoseconds,e.nanoseconds):So(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Co{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Co(e)}static min(){return new Co(new To(0,0))}static max(){return new Co(new To(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Io{constructor(e,t,n){void 0===t?t=0:t>e.length&&lo(),void 0===n?n=e.length-t:n>e.length-t&&lo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Io.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Io?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ao extends Io{construct(e,t,n){return new Ao(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new fo(ho.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new Ao(e)}static emptyPath(){return new Ao([])}}const Po=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ro extends Io{construct(e,t,n){return new Ro(e,t,n)}static isValidIdentifier(e){return Po.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ro.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ro(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new fo(ho.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new fo(ho.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new fo(ho.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new fo(ho.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ro(t)}static emptyPath(){return new Ro([])}}class Do{constructor(e){this.path=e}static fromPath(e){return new Do(Ao.fromString(e))}static fromName(e){return new Do(Ao.fromString(e).popFirst(5))}static empty(){return new Do(Ao.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ao.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ao.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Do(new Ao(e.slice()))}}class Oo{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Oo.UNKNOWN_ID=-1;function jo(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Co.fromTimestamp(1e9===r?new To(n+1,0):new To(n,r));return new Mo(i,Do.empty(),t)}function Lo(e){return new Mo(e.readTime,e.key,-1)}class Mo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Mo(Co.min(),Do.empty(),-1)}static max(){return new Mo(Co.max(),Do.empty(),-1)}}function Uo(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Do.comparator(e.documentKey,t.documentKey),0!==n?n:So(e.largestBatchId,t.largestBatchId))}const Fo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function zo(e){if(e.code!==ho.FAILED_PRECONDITION||e.message!==Fo)throw e;io("LocalStore","Unexpectedly lost primary lease")}class Bo{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Bo((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Bo?t:Bo.resolve(t)}catch(e){return Bo.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Bo.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Bo.reject(t)}static resolve(e){return new Bo((t,n)=>{t(e)})}static reject(e){return new Bo((t,n)=>{n(e)})}static waitFor(e){return new Bo((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Bo.resolve(!1);for(const n of e)t=t.next(e=>e?Bo.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Bo((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Bo((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function $o(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qo(e){return"IndexedDbTransactionError"===e.name}class Ho{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Wo(e){return null==e}function Ko(e){return 0===e&&1/e==-1/0}function Go(e){return"number"==typeof e&&Number.isInteger(e)&&!Ko(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Ho.oe=-1;const Qo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Yo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xo=Yo,Jo=[...Xo,"indexConfiguration","indexState","indexEntries"];function Zo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function el(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function tl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class nl{constructor(e,t){this.comparator=e,this.root=t||il.EMPTY}insert(e,t){return new nl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,il.BLACK,null,null))}remove(e){return new nl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,il.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rl(this.root,e,this.comparator,!0)}}class rl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class il{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:il.RED,this.left=null!=r?r:il.EMPTY,this.right=null!=i?i:il.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new il(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return il.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return il.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,il.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,il.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lo();if(this.right.isRed())throw lo();const e=this.left.check();if(e!==this.right.check())throw lo();return e+(this.isRed()?0:1)}}il.EMPTY=null,il.RED=!0,il.BLACK=!1,il.EMPTY=new class{constructor(){this.size=0}get key(){throw lo()}get value(){throw lo()}get color(){throw lo()}get left(){throw lo()}get right(){throw lo()}copy(e,t,n,r,i){return this}insert(e,t,n){return new il(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sl{constructor(e){this.comparator=e,this.data=new nl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new al(this.data.getIterator())}getIteratorFrom(e){return new al(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof sl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new sl(this.comparator);return t.data=e,t}}class al{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ol{constructor(e){this.fields=e,e.sort(Ro.comparator)}static empty(){return new ol([])}unionWith(e){let t=new sl(Ro.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ol(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ll extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ul{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ll("Invalid base64 string: "+e):e}}(e);return new ul(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ul(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return So(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ul.EMPTY_BYTE_STRING=new ul("");const cl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(e){if(uo(!!e),"string"==typeof e){let t=0;const n=cl.exec(e);if(uo(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:dl(e.seconds),nanos:dl(e.nanos)}}function dl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function fl(e){return"string"==typeof e?ul.fromBase64String(e):ul.fromUint8Array(e)}function pl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ml(e){const t=e.mapValue.fields.__previous_value__;return pl(t)?ml(t):t}function gl(e){const t=hl(e.mapValue.fields.__local_write_time__.timestampValue);return new To(t.seconds,t.nanos)}class yl{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class vl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vl&&e.projectId===this.projectId&&e.database===this.database}}const bl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function wl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?pl(e)?4:Ll(e)?9007199254740991:Ol(e)?10:11:lo()}function xl(e,t){if(e===t)return!0;const n=wl(e);if(n!==wl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return gl(e).isEqual(gl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=hl(e.timestampValue),r=hl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return fl(e.bytesValue).isEqual(fl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return dl(e.geoPointValue.latitude)===dl(t.geoPointValue.latitude)&&dl(e.geoPointValue.longitude)===dl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return dl(e.integerValue)===dl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=dl(e.doubleValue),r=dl(t.doubleValue);return n===r?Ko(n)===Ko(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return No(e.arrayValue.values||[],t.arrayValue.values||[],xl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Zo(n)!==Zo(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!xl(n[i],r[i])))return!1;return!0}(e,t);default:return lo()}}function _l(e,t){return void 0!==(e.values||[]).find(e=>xl(e,t))}function El(e,t){if(e===t)return 0;const n=wl(e),r=wl(t);if(n!==r)return So(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return So(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=dl(e.integerValue||e.doubleValue),r=dl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return kl(e.timestampValue,t.timestampValue);case 4:return kl(gl(e),gl(t));case 5:return So(e.stringValue,t.stringValue);case 6:return function(e,t){const n=fl(e),r=fl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=So(n[i],r[i]);if(0!==e)return e}return So(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=So(dl(e.latitude),dl(t.latitude));return 0!==n?n:So(dl(e.longitude),dl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Sl(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,u=null===(r=o.value)||void 0===r?void 0:r.arrayValue,c=So((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:Sl(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===bl.mapValue&&t===bl.mapValue)return 0;if(e===bl.mapValue)return 1;if(t===bl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=So(r[a],s[a]);if(0!==e)return e;const t=El(n[r[a]],i[s[a]]);if(0!==t)return t}return So(r.length,s.length)}(e.mapValue,t.mapValue);default:throw lo()}}function kl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return So(e,t);const n=hl(e),r=hl(t),i=So(n.seconds,r.seconds);return 0!==i?i:So(n.nanos,r.nanos)}function Sl(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=El(n[i],r[i]);if(e)return e}return So(n.length,r.length)}function Nl(e){return Tl(e)}function Tl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=hl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return fl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Do.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Tl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Tl(e.fields[i])}`;return n+"}"}(e.mapValue):lo()}function Cl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Il(e){return!!e&&"integerValue"in e}function Al(e){return!!e&&"arrayValue"in e}function Pl(e){return!!e&&"nullValue"in e}function Rl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Dl(e){return!!e&&"mapValue"in e}function Ol(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return el(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=jl(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=jl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ll(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ml{constructor(e){this.value=e}static empty(){return new Ml({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Dl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(t)}setAll(e){let t=Ro.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=jl(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Dl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Dl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){el(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ml(jl(this.value))}}function Ul(e){const t=[];return el(e.fields,(e,n)=>{const r=new Ro([e]);if(Dl(n)){const e=Ul(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ol(t)}class Fl{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Fl(e,0,Co.min(),Co.min(),Co.min(),Ml.empty(),0)}static newFoundDocument(e,t,n,r){return new Fl(e,1,t,Co.min(),n,r,0)}static newNoDocument(e,t){return new Fl(e,2,t,Co.min(),Co.min(),Ml.empty(),0)}static newUnknownDocument(e,t){return new Fl(e,3,t,Co.min(),Co.min(),Ml.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Co.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ml.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ml.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Co.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Vl{constructor(e,t){this.position=e,this.inclusive=t}}function zl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?Do.comparator(Do.fromName(a.referenceValue),n.key):El(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Bl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!xl(e.position[n],t.position[n]))return!1;return!0}class $l{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ql(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Hl{}class Wl extends Hl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new eu(e,t,n):"array-contains"===t?new iu(e,n):"in"===t?new su(e,n):"not-in"===t?new au(e,n):"array-contains-any"===t?new ou(e,n):new Wl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new tu(e,n):new nu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(El(t,this.value)):null!==t&&wl(this.value)===wl(t)&&this.matchesComparison(El(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kl extends Hl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Kl(e,t)}matches(e){return Gl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Gl(e){return"and"===e.op}function Ql(e){return Yl(e)&&Gl(e)}function Yl(e){for(const t of e.filters)if(t instanceof Kl)return!1;return!0}function Xl(e){if(e instanceof Wl)return e.field.canonicalString()+e.op.toString()+Nl(e.value);if(Ql(e))return e.filters.map(e=>Xl(e)).join(",");{const t=e.filters.map(e=>Xl(e)).join(",");return`${e.op}(${t})`}}function Jl(e,t){return e instanceof Wl?function(e,t){return t instanceof Wl&&e.op===t.op&&e.field.isEqual(t.field)&&xl(e.value,t.value)}(e,t):e instanceof Kl?function(e,t){return t instanceof Kl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Jl(n,t.filters[r]),!0)}(e,t):void lo()}function Zl(e){return e instanceof Wl?function(e){return`${e.field.canonicalString()} ${e.op} ${Nl(e.value)}`}(e):e instanceof Kl?function(e){return e.op.toString()+" {"+e.getFilters().map(Zl).join(" ,")+"}"}(e):"Filter"}class eu extends Wl{constructor(e,t,n){super(e,t,n),this.key=Do.fromName(n.referenceValue)}matches(e){const t=Do.comparator(e.key,this.key);return this.matchesComparison(t)}}class tu extends Wl{constructor(e,t){super(e,"in",t),this.keys=ru("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nu extends Wl{constructor(e,t){super(e,"not-in",t),this.keys=ru("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ru(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Do.fromName(e.referenceValue))}class iu extends Wl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Al(t)&&_l(t.arrayValue,this.value)}}class su extends Wl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_l(this.value.arrayValue,t)}}class au extends Wl{constructor(e,t){super(e,"not-in",t)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_l(this.value.arrayValue,t)}}class ou extends Wl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Al(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>_l(this.value.arrayValue,e))}}class lu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function uu(e){return new lu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function cu(e){const t=co(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Xl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Wo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Nl(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Nl(e)).join(",")),t.ue=e}return t.ue}function hu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ql(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Jl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Bl(e.startAt,t.startAt)&&Bl(e.endAt,t.endAt)}function du(e){return Do.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class fu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function pu(e,t,n,r,i,s,a,o){return new fu(e,t,n,r,i,s,a,o)}function mu(e){return new fu(e)}function gu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function yu(e){return null!==e.collectionGroup}function vu(e){const t=co(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new sl(Ro.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new $l(r,n))}),e.has(Ro.keyField().canonicalString())||t.ce.push(new $l(Ro.keyField(),n))}return t.ce}function bu(e){const t=co(e);return t.le||(t.le=wu(t,vu(e))),t.le}function wu(e,t){if("F"===e.limitType)return uu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new $l(e.field,t)});const n=e.endAt?new Vl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Vl(e.startAt.position,e.startAt.inclusive):null;return uu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function xu(e,t){const n=e.filters.concat([t]);return new fu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function _u(e,t,n){return new fu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Eu(e,t){return hu(bu(e),bu(t))&&e.limitType===t.limitType}function ku(e){return`${cu(bu(e))}|lt:${e.limitType}`}function Su(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Zl(e)).join(", ")}]`),Wo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Nl(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Nl(e)).join(",")),`Target(${t})`}(bu(e))}; limitType=${e.limitType})`}function Nu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Do.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of vu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=zl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vu(e),t))&&!(e.endAt&&!function(e,t,n){const r=zl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vu(e),t))}(e,t)}function Tu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Cu(e){return(t,n)=>{let r=!1;for(const i of vu(e)){const e=Iu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Iu(e,t,n){const r=e.field.isKeyField()?Do.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?El(r,i):lo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return lo()}}class Au{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){el(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return tl(this.inner)}size(){return this.innerSize}}const Pu=new nl(Do.comparator);function Ru(){return Pu}const Du=new nl(Do.comparator);function Ou(){let e=Du;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ju(e){let t=Du;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Lu(){return Uu()}function Mu(){return Uu()}function Uu(){return new Au(e=>e.toString(),(e,t)=>e.isEqual(t))}const Fu=new nl(Do.comparator),Vu=new sl(Do.comparator);function zu(){let e=Vu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Bu=new sl(So);function $u(){return Bu}function qu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ko(t)?"-0":t}}function Hu(e){return{integerValue:""+e}}function Wu(e,t){return Go(t)?Hu(t):qu(e,t)}class Ku{constructor(){this._=void 0}}function Gu(e,t,n){return e instanceof Xu?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&pl(t)&&(t=ml(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ju?Zu(e,t):e instanceof ec?tc(e,t):function(e,t){const n=Yu(e,t),r=rc(n)+rc(e.Pe);return Il(n)&&Il(e.Pe)?Hu(r):qu(e.serializer,r)}(e,t)}function Qu(e,t,n){return e instanceof Ju?Zu(e,t):e instanceof ec?tc(e,t):n}function Yu(e,t){return e instanceof nc?function(e){return Il(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Xu extends Ku{}class Ju extends Ku{constructor(e){super(),this.elements=e}}function Zu(e,t){const n=ic(t);for(const r of e.elements)n.some(e=>xl(e,r))||n.push(r);return{arrayValue:{values:n}}}class ec extends Ku{constructor(e){super(),this.elements=e}}function tc(e,t){let n=ic(t);for(const r of e.elements)n=n.filter(e=>!xl(e,r));return{arrayValue:{values:n}}}class nc extends Ku{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function rc(e){return dl(e.integerValue||e.doubleValue)}function ic(e){return Al(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class sc{constructor(e,t){this.field=e,this.transform=t}}class ac{constructor(e,t){this.version=e,this.transformResults=t}}class oc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new oc}static exists(e){return new oc(void 0,e)}static updateTime(e){return new oc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class uc{}function cc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new wc(e.key,oc.none()):new mc(e.key,e.data,oc.none());{const n=e.data,r=Ml.empty();let i=new sl(Ro.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new gc(e.key,r,new ol(i.toArray()),oc.none())}}function hc(e,t,n){e instanceof mc?function(e,t,n){const r=e.value.clone(),i=vc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof gc?function(e,t,n){if(!lc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=vc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(yc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function dc(e,t,n,r){return e instanceof mc?function(e,t,n,r){if(!lc(e.precondition,t))return n;const i=e.value.clone(),s=bc(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof gc?function(e,t,n,r){if(!lc(e.precondition,t))return n;const i=bc(e.fieldTransforms,r,t),s=t.data;return s.setAll(yc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return lc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function fc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Yu(r.transform,e||null);null!=i&&(null===n&&(n=Ml.empty()),n.set(r.field,i))}return n||null}function pc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&No(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ju&&t instanceof Ju||e instanceof ec&&t instanceof ec?No(e.elements,t.elements,xl):e instanceof nc&&t instanceof nc?xl(e.Pe,t.Pe):e instanceof Xu&&t instanceof Xu}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class mc extends uc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class gc extends uc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function vc(e,t,n){const r=new Map;uo(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Qu(a,o,n[i]))}return r}function bc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Gu(e,s,t))}return r}class wc extends uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xc extends uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _c{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&hc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=dc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=dc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Mu();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=cc(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Co.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zu())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(e,t)=>pc(e,t))&&No(this.baseMutations,e.baseMutations,(e,t)=>pc(e,t))}}class Ec{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){uo(e.mutations.length===n.length);let r=Fu;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ec(e,t,n,r)}}class kc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Sc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Nc,Tc;function Cc(e){switch(e){default:return lo();case ho.CANCELLED:case ho.UNKNOWN:case ho.DEADLINE_EXCEEDED:case ho.RESOURCE_EXHAUSTED:case ho.INTERNAL:case ho.UNAVAILABLE:case ho.UNAUTHENTICATED:return!1;case ho.INVALID_ARGUMENT:case ho.NOT_FOUND:case ho.ALREADY_EXISTS:case ho.PERMISSION_DENIED:case ho.FAILED_PRECONDITION:case ho.ABORTED:case ho.OUT_OF_RANGE:case ho.UNIMPLEMENTED:case ho.DATA_LOSS:return!0}}function Ic(e){if(void 0===e)return so("GRPC error has no .code"),ho.UNKNOWN;switch(e){case Nc.OK:return ho.OK;case Nc.CANCELLED:return ho.CANCELLED;case Nc.UNKNOWN:return ho.UNKNOWN;case Nc.DEADLINE_EXCEEDED:return ho.DEADLINE_EXCEEDED;case Nc.RESOURCE_EXHAUSTED:return ho.RESOURCE_EXHAUSTED;case Nc.INTERNAL:return ho.INTERNAL;case Nc.UNAVAILABLE:return ho.UNAVAILABLE;case Nc.UNAUTHENTICATED:return ho.UNAUTHENTICATED;case Nc.INVALID_ARGUMENT:return ho.INVALID_ARGUMENT;case Nc.NOT_FOUND:return ho.NOT_FOUND;case Nc.ALREADY_EXISTS:return ho.ALREADY_EXISTS;case Nc.PERMISSION_DENIED:return ho.PERMISSION_DENIED;case Nc.FAILED_PRECONDITION:return ho.FAILED_PRECONDITION;case Nc.ABORTED:return ho.ABORTED;case Nc.OUT_OF_RANGE:return ho.OUT_OF_RANGE;case Nc.UNIMPLEMENTED:return ho.UNIMPLEMENTED;case Nc.DATA_LOSS:return ho.DATA_LOSS;default:return lo()}}(Tc=Nc||(Nc={}))[Tc.OK=0]="OK",Tc[Tc.CANCELLED=1]="CANCELLED",Tc[Tc.UNKNOWN=2]="UNKNOWN",Tc[Tc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tc[Tc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tc[Tc.NOT_FOUND=5]="NOT_FOUND",Tc[Tc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tc[Tc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tc[Tc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tc[Tc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tc[Tc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tc[Tc.ABORTED=10]="ABORTED",Tc[Tc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tc[Tc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tc[Tc.INTERNAL=13]="INTERNAL",Tc[Tc.UNAVAILABLE=14]="UNAVAILABLE",Tc[Tc.DATA_LOSS=15]="DATA_LOSS";let Ac=null;function Pc(){return new TextEncoder}const Rc=new Fa([4294967295,4294967295],0);function Dc(e){const t=Pc().encode(e),n=new Va;return n.update(t),new Uint8Array(n.digest())}function Oc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Fa([n,r],0),new Fa([i,s],0)]}class jc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Lc(`Invalid padding: ${t}`);if(n<0)throw new Lc(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Lc(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Lc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Fa.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Fa.fromNumber(n)));return 1===r.compare(Rc)&&(r=new Fa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Dc(e),[n,r]=Oc(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new jc(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=Dc(e),[n,r]=Oc(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Mc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Mc(Co.min(),r,new nl(So),Ru(),zu())}}class Uc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Uc(n,t,zu(),zu(),zu())}}class Fc{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Vc{constructor(e,t){this.targetId=e,this.me=t}}class zc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ul.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Bc{constructor(){this.fe=0,this.ge=Hc(),this.pe=ul.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=zu(),t=zu(),n=zu();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:lo()}}),new Uc(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Hc()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,uo(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $c{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ru(),this.qe=qc(),this.Qe=new nl(So)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:lo()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(du(i))if(0===n){const e=new Do(i.path);this.Ue(t,e,Fl.newNoDocument(e,Co.min()))}else uo(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Ac||Ac.et(function(e,t,n,r,i){var s,a,o,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==d?void 0:d.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=fl(n).toUint8Array()}catch(e){if(e instanceof ll)return ao("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new jc(s,r,i)}catch(e){return ao(e instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&du(i.target)){const t=new Do(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Fl.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=zu();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new Mc(e,t,this.Qe,this.ke,n);return this.ke=Ru(),this.qe=qc(),this.Qe=new nl(So),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Bc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new sl(So),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||io("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Bc),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function qc(){return new nl(Do.comparator)}function Hc(){return new nl(Do.comparator)}const Wc={asc:"ASCENDING",desc:"DESCENDING"},Kc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gc={and:"AND",or:"OR"};class Qc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yc(e,t){return e.useProto3Json||Wo(t)?t:{value:t}}function Xc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Zc(e,t){return Xc(e,t.toTimestamp())}function eh(e){return uo(!!e),Co.fromTimestamp(function(e){const t=hl(e);return new To(t.seconds,t.nanos)}(e))}function th(e,t){return nh(e,t).canonicalString()}function nh(e,t){const n=function(e){return new Ao(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function rh(e){const t=Ao.fromString(e);return uo(Eh(t)),t}function ih(e,t){return th(e.databaseId,t.path)}function sh(e,t){const n=rh(t);if(n.get(1)!==e.databaseId.projectId)throw new fo(ho.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fo(ho.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Do(uh(n))}function ah(e,t){return th(e.databaseId,t)}function oh(e){const t=rh(e);return 4===t.length?Ao.emptyPath():uh(t)}function lh(e){return new Ao(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function uh(e){return uo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ch(e,t,n){return{name:ih(e,t),fields:n.value.mapValue.fields}}function hh(e,t){let n;if(t instanceof mc)n={update:ch(e,t.key,t.value)};else if(t instanceof wc)n={delete:ih(e,t.key)};else if(t instanceof gc)n={update:ch(e,t.key,t.data),updateMask:_h(t.fieldMask)};else{if(!(t instanceof xc))return lo();n={verify:ih(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Xu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ju)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ec)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof nc)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw lo()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:lo()}(e,t.precondition)),n}function dh(e,t){return{documents:[ah(e,t.path)]}}function fh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ah(e,i);const s=function(e){if(0!==e.length)return xh(Kl.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:bh(e.field),direction:gh(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Yc(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function ph(e){let t=oh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){uo(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=mh(e);return t instanceof Kl&&Ql(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new $l(wh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Wo(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Vl(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Vl(n,t)}(n.endAt)),pu(t,i,a,s,o,"F",l,u)}function mh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=wh(e.unaryFilter.field);return Wl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=wh(e.unaryFilter.field);return Wl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=wh(e.unaryFilter.field);return Wl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=wh(e.unaryFilter.field);return Wl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lo()}}(e):void 0!==e.fieldFilter?function(e){return Wl.create(wh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Kl.create(e.compositeFilter.filters.map(e=>mh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return lo()}}(e.compositeFilter.op))}(e):lo()}function gh(e){return Wc[e]}function yh(e){return Kc[e]}function vh(e){return Gc[e]}function bh(e){return{fieldPath:e.canonicalString()}}function wh(e){return Ro.fromServerFormat(e.fieldPath)}function xh(e){return e instanceof Wl?function(e){if("=="===e.op){if(Rl(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NAN"}};if(Pl(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Rl(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NOT_NAN"}};if(Pl(e.value))return{unaryFilter:{field:bh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bh(e.field),op:yh(e.op),value:e.value}}}(e):e instanceof Kl?function(e){const t=e.getFilters().map(e=>xh(e));return 1===t.length?t[0]:{compositeFilter:{op:vh(e.op),filters:t}}}(e):lo()}function _h(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Eh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class kh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Co.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Co.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ul.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new kh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new kh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Sh{constructor(e){this.ct=e}}function Nh(e){const t=ph({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?_u(t,t.limit,"L"):t}class Th{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(dl(e.integerValue));else if("doubleValue"in e){const n=dl(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Ko(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=hl(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(fl(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Ll(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ol(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):lo()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(dl(a)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Do.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Th.vt=new Th;class Ch{constructor(){this.un=new Ih}addToCollectionParentIndex(e,t){return this.un.add(t),Bo.resolve()}getCollectionParents(e,t){return Bo.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Bo.resolve()}deleteFieldIndex(e,t){return Bo.resolve()}deleteAllFieldIndexes(e){return Bo.resolve()}createTargetIndexes(e,t){return Bo.resolve()}getDocumentsMatchingTarget(e,t){return Bo.resolve(null)}getIndexType(e,t){return Bo.resolve(0)}getFieldIndexes(e,t){return Bo.resolve([])}getNextCollectionGroupToUpdate(e){return Bo.resolve(null)}getMinOffset(e,t){return Bo.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,t){return Bo.resolve(Mo.min())}updateCollectionGroup(e,t,n){return Bo.resolve()}updateIndexEntries(e,t){return Bo.resolve()}}class Ih{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new sl(Ao.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new sl(Ao.comparator)).toArray()}}new Uint8Array(0);class Ah{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ah(e,Ah.DEFAULT_COLLECTION_PERCENTILE,Ah.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Ah.DEFAULT_COLLECTION_PERCENTILE=10,Ah.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ah.DEFAULT=new Ah(41943040,Ah.DEFAULT_COLLECTION_PERCENTILE,Ah.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ah.DISABLED=new Ah(-1,0,0);class Ph{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ph(0)}static kn(){return new Ph(-1)}}class Rh{constructor(){this.changes=new Au(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Bo.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Dh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Oh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&dc(n.mutation,e,ol.empty(),To.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,zu()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zu();const r=Lu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ou();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Lu();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,zu()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Ru();const s=Uu(),a=Uu();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof gc)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),dc(a.mutation,t,a.mutation.getFieldMask(),To.now())):s.set(t.key,ol.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Dh(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Uu();let r=new nl((e,t)=>e-t),i=zu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||ol.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||zu()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,u=Mu();l.forEach(e=>{if(!i.has(e)){const r=cc(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return Bo.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Do.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Bo.resolve(Lu());let a=-1,o=i;return s.next(t=>Bo.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Bo.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,zu())).next(e=>({batchId:a,changes:ju(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Do(t)).next(e=>{let t=Ou();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ou();return this.indexManager.getCollectionParents(e,i).next(a=>Bo.forEach(a,a=>{const o=function(e,t){return new fu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Fl.newInvalidDocument(r)))});let n=Ou();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&dc(s.mutation,r,ol.empty(),To.now()),Nu(t,r)&&(n=n.insert(e,r))}),n})}}class jh{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Bo.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:eh(e.createTime)}}(t)),Bo.resolve()}getNamedQuery(e,t){return Bo.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Nh(e.bundledQuery),readTime:eh(e.readTime)}}(t)),Bo.resolve()}}class Lh{constructor(){this.overlays=new nl(Do.comparator),this.Ir=new Map}getOverlay(e,t){return Bo.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Lu();return Bo.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),Bo.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),Bo.resolve()}getOverlaysForCollection(e,t,n){const r=Lu(),i=t.length+1,s=new Do(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Bo.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new nl((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Lu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Lu(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Bo.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new kc(t,n));let i=this.Ir.get(t);void 0===i&&(i=zu(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class Mh{constructor(){this.sessionToken=ul.EMPTY_BYTE_STRING}getSessionToken(e){return Bo.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Bo.resolve()}}class Uh{constructor(){this.Tr=new sl(Fh.Er),this.dr=new sl(Fh.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Fh(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Fh(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Do(new Ao([])),n=new Fh(t,e),r=new Fh(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Do(new Ao([])),n=new Fh(t,e),r=new Fh(t,e+1);let i=zu();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Fh(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Fh{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Do.comparator(e.key,t.key)||So(e.wr,t.wr)}static Ar(e,t){return So(e.wr,t.wr)||Do.comparator(e.key,t.key)}}class Vh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new sl(Fh.Er)}checkEmpty(e){return Bo.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new _c(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.br=this.br.add(new Fh(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Bo.resolve(s)}lookupMutationBatch(e,t){return Bo.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Bo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Bo.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Bo.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Fh(t,0),r=new Fh(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),Bo.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new sl(So);return t.forEach(e=>{const t=new Fh(e,0),r=new Fh(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),Bo.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Do.isDocumentKey(i)||(i=i.child(""));const s=new Fh(new Do(i),0);let a=new sl(So);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},s),Bo.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){uo(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Bo.forEach(t.mutations,r=>{const i=new Fh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Fh(t,0),r=this.br.firstAfterOrEqual(n);return Bo.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Bo.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zh{constructor(e){this.Mr=e,this.docs=new nl(Do.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Bo.resolve(n?n.document.mutableCopy():Fl.newInvalidDocument(t))}getEntries(e,t){let n=Ru();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Fl.newInvalidDocument(e))}),Bo.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ru();const s=t.path,a=new Do(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Uo(Lo(a),n)<=0||(r.has(a.key)||Nu(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Bo.resolve(i)}getAllFromCollectionGroup(e,t,n,r){lo()}Or(e,t){return Bo.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Bh(this)}getSize(e){return Bo.resolve(this.size)}}class Bh extends Rh{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),Bo.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class $h{constructor(e){this.persistence=e,this.Nr=new Au(e=>cu(e),hu),this.lastRemoteSnapshotVersion=Co.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Uh,this.targetCount=0,this.kr=Ph.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),Bo.resolve()}getLastRemoteSnapshotVersion(e){return Bo.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Bo.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Bo.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Bo.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ph(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Bo.resolve()}updateTargetData(e,t){return this.Kn(t),Bo.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Bo.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Bo.waitFor(i).next(()=>r)}getTargetCount(e){return Bo.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Bo.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Bo.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Bo.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Bo.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Bo.resolve(n)}containsKey(e,t){return Bo.resolve(this.Br.containsKey(t))}}class qh{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ho(0),this.Kr=!1,this.Kr=!0,this.$r=new Mh,this.referenceDelegate=e(this),this.Ur=new $h(this),this.indexManager=new Ch,this.remoteDocumentCache=function(e){return new zh(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Sh(t),this.Gr=new jh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Vh(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){io("MemoryPersistence","Starting transaction:",e);const r=new Hh(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return Bo.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Hh extends Vo{constructor(e){super(),this.currentSequenceNumber=e}}class Wh{constructor(e){this.persistence=e,this.Jr=new Uh,this.Yr=null}static Zr(e){return new Wh(e)}get Xr(){if(this.Yr)return this.Yr;throw lo()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Bo.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Bo.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Bo.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bo.forEach(this.Xr,n=>{const r=Do.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Co.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Bo.or([()=>Bo.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Kh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=zu(),r=zu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Kh(e,t.fromCache,n,r)}}class Gh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Qh{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=Lt()?8:$o(jt())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Gh;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(ro()<=en.DEBUG&&io("QueryEngine","SDK will not create cache indexes for query:",Su(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Bo.resolve()):(ro()<=en.DEBUG&&io("QueryEngine","Query:",Su(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(ro()<=en.DEBUG&&io("QueryEngine","The SDK decides to create cache indexes for query:",Su(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bu(t))):Bo.resolve())}Yi(e,t){if(gu(t))return Bo.resolve(null);let n=bu(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=_u(t,null,"F"),n=bu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=zu(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,_u(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return gu(t)||r.isEqual(Co.min())?Bo.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?Bo.resolve(null):(ro()<=en.DEBUG&&io("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Su(t)),this.rs(e,s,t,jo(r,-1)).next(e=>e))})}ts(e,t){let n=new sl(Cu(e));return t.forEach((t,r)=>{Nu(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return ro()<=en.DEBUG&&io("QueryEngine","Using full collection scan to execute query:",Su(t)),this.Ji.getDocumentsMatchingQuery(e,t,Mo.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Yh{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new nl(So),this._s=new Au(e=>cu(e),hu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Oh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Xh(e,t,n,r){return new Yh(e,t,n,r)}async function Jh(e,t){const n=co(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=zu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function Zh(e){const t=co(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function ed(e,t,n){let r=zu(),i=zu();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ru();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Co.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):io("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{Ps:r,Is:i}})}function td(e,t){const n=co(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function nd(e,t){const n=co(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,Bo.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new kh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function rd(e,t,n){const r=co(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!qo(e))throw e;io("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function id(e,t,n){const r=co(e);let i=Co.min(),s=zu();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=co(e),i=r._s.get(n);return void 0!==i?Bo.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,bu(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Co.min(),n?s:zu())).next(e=>(sd(r,Tu(t),e),{documents:e,Ts:s})))}function sd(e,t,n){let r=e.us.get(t)||Co.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class ad{constructor(){this.activeTargetIds=$u()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class od{constructor(){this.so=new ad,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ad,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ld{_o(e){}shutdown(){}}class ud{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){io("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){io("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let cd=null;function hd(){return null===cd?cd=268435456+Math.round(2147483648*Math.random()):cd++,"0x"+cd.toString(16)}const dd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fd{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const pd="WebChannelConnection";class md extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=hd(),a=this.xo(e,t.toUriEncodedString());io("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,i),this.No(e,a,o,n).then(t=>(io("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw ao("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+to,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=dd[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=hd();return new Promise((s,a)=>{const o=new $a;o.setWithCredentials(!0),o.listenOnce(Ha.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Wa.NO_ERROR:const t=o.getResponseJson();io(pd,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Wa.TIMEOUT:io(pd,`RPC '${e}' ${i} timed out`),a(new fo(ho.DEADLINE_EXCEEDED,"Request time out"));break;case Wa.HTTP_ERROR:const n=o.getStatus();if(io(pd,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ho).indexOf(t)>=0?t:ho.UNKNOWN}(t.status);a(new fo(e,t.message))}else a(new fo(ho.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new fo(ho.UNAVAILABLE,"Connection failed."));break;default:lo()}}finally{io(pd,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);io(pd,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=hd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ya(),a=Qa(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const u=i.join("");io(pd,`Creating RPC '${e}' stream ${r}: ${u}`,o);const c=s.createWebChannel(u,o);let h=!1,d=!1;const f=new fd({Io:t=>{d?io(pd,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(io(pd,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),io(pd,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},To:()=>c.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(c,qa.EventType.OPEN,()=>{d||(io(pd,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),p(c,qa.EventType.CLOSE,()=>{d||(d=!0,io(pd,`RPC '${e}' stream ${r} transport closed`),f.So())}),p(c,qa.EventType.ERROR,t=>{d||(d=!0,ao(pd,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new fo(ho.UNAVAILABLE,"The operation could not be completed")))}),p(c,qa.EventType.MESSAGE,t=>{var n;if(!d){const i=t.data[0];uo(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){io(pd,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Nc[e];if(void 0!==t)return Ic(t)}(t),i=a.message;void 0===n&&(n=ho.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,f.So(new fo(n,i)),c.close()}else io(pd,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}}),p(a,Ga.STAT_EVENT,t=>{t.stat===Ka.PROXY?io(pd,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Ka.NOPROXY&&io(pd,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function gd(){return"undefined"!=typeof document?document:null}function yd(e){return new Qc(e,!0)}class vd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&io("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class bd{constructor(e,t,n,r,i,s,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vd(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===ho.RESOURCE_EXHAUSTED?(so(t.toString()),so("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ho.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new fo(ho.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return io("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(io("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wd extends bd{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:lo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(uo(void 0===t||"string"==typeof t),ul.fromBase64String(t||"")):(uo(void 0===t||t instanceof Buffer||t instanceof Uint8Array),ul.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?ho.UNKNOWN:Ic(e.code);return new fo(t,e.message||"")}(a);n=new zc(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=sh(e,r.document.name),s=eh(r.document.updateTime),a=r.document.createTime?eh(r.document.createTime):Co.min(),o=new Ml({mapValue:{fields:r.document.fields}}),l=Fl.newFoundDocument(i,s,a,o),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Fc(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=sh(e,r.document),s=r.readTime?eh(r.readTime):Co.min(),a=Fl.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Fc([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=sh(e,r.document),s=r.removedTargetIds||[];n=new Fc([],s,i,null)}else{if(!("filter"in t))return lo();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Sc(r,i),a=e.targetId;n=new Vc(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Co.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Co.min():t.readTime?eh(t.readTime):Co.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=lh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=du(r)?{documents:dh(e,r)}:{query:fh(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Jc(e,t.resumeToken);const r=Yc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Co.min())>0){n.readTime=Xc(e,t.snapshotVersion.toTimestamp());const r=Yc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=lh(this.serializer),t.removeTarget=e,this.a_(t)}}class xd extends bd{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return uo(!!e.streamToken),this.lastStreamToken=e.streamToken,uo(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){uo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(uo(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?eh(e.updateTime):eh(t);return n.isEqual(Co.min())&&(n=eh(t)),new ac(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=eh(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=lh(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>hh(this.serializer,e))};this.a_(t)}}class _d extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new fo(ho.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Mo(e,nh(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ho.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new fo(ho.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Lo(e,nh(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ho.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new fo(ho.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ed{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(so(t),this.D_=!1):io("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class kd{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{Dd(this)&&(io("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=co(e);t.L_.add(4),await Nd(t),t.q_.set("Unknown"),t.L_.delete(4),await Sd(t)}(this))})}),this.q_=new Ed(n,r)}}async function Sd(e){if(Dd(e))for(const t of e.B_)await t(!0)}async function Nd(e){for(const t of e.B_)await t(!1)}function Td(e,t){const n=co(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Rd(n)?Pd(n):Jd(n).r_()&&Id(n,t))}function Cd(e,t){const n=co(e),r=Jd(n);n.N_.delete(t),r.r_()&&Ad(n,t),0===n.N_.size&&(r.r_()?r.o_():Dd(n)&&n.q_.set("Unknown"))}function Id(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Co.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Jd(e).A_(t)}function Ad(e,t){e.Q_.xe(t),Jd(e).R_(t)}function Pd(e){e.Q_=new $c({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Jd(e).start(),e.q_.v_()}function Rd(e){return Dd(e)&&!Jd(e).n_()&&e.N_.size>0}function Dd(e){return 0===co(e).L_.size}function Od(e){e.Q_=void 0}async function jd(e){e.q_.set("Online")}async function Ld(e){e.N_.forEach((t,n)=>{Id(e,t)})}async function Md(e,t){Od(e),Rd(e)?(e.q_.M_(t),Pd(e)):e.q_.set("Unknown")}async function Ud(e,t,n){if(e.q_.set("Online"),t instanceof zc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){io("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Fd(e,n)}else if(t instanceof Fc?e.Q_.Ke(t):t instanceof Vc?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Co.min()))try{const t=await Zh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(ul.EMPTY_BYTE_STRING,r.snapshotVersion)),Ad(e,t);const i=new kh(r.target,t,n,r.sequenceNumber);Id(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){io("RemoteStore","Failed to raise snapshot:",t),await Fd(e,t)}}async function Fd(e,t,n){if(!qo(t))throw t;e.L_.add(1),await Nd(e),e.q_.set("Offline"),n||(n=()=>Zh(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{io("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Sd(e)})}function Vd(e,t){return t().catch(n=>Fd(e,n,t))}async function zd(e){const t=co(e),n=Zd(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Bd(t);)try{const e=await td(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,$d(t,e)}catch(e){await Fd(t,e)}qd(t)&&Hd(t)}function Bd(e){return Dd(e)&&e.O_.length<10}function $d(e,t){e.O_.push(t);const n=Zd(e);n.r_()&&n.V_&&n.m_(t.mutations)}function qd(e){return Dd(e)&&!Zd(e).n_()&&e.O_.length>0}function Hd(e){Zd(e).start()}async function Wd(e){Zd(e).p_()}async function Kd(e){const t=Zd(e);for(const n of e.O_)t.m_(n.mutations)}async function Gd(e,t,n){const r=e.O_.shift(),i=Ec.from(r,t,n);await Vd(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await zd(e)}async function Qd(e,t){t&&Zd(e).V_&&await async function(e,t){if(function(e){return Cc(e)&&e!==ho.ABORTED}(t.code)){const n=e.O_.shift();Zd(e).s_(),await Vd(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await zd(e)}}(e,t),qd(e)&&Hd(e)}async function Yd(e,t){const n=co(e);n.asyncQueue.verifyOperationInProgress(),io("RemoteStore","RemoteStore received new credentials");const r=Dd(n);n.L_.add(3),await Nd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Sd(n)}async function Xd(e,t){const n=co(e);t?(n.L_.delete(2),await Sd(n)):t||(n.L_.add(2),await Nd(n),n.q_.set("Unknown"))}function Jd(e){return e.K_||(e.K_=function(e,t,n){const r=co(e);return r.w_(),new wd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:jd.bind(null,e),Ro:Ld.bind(null,e),mo:Md.bind(null,e),d_:Ud.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Rd(e)?Pd(e):e.q_.set("Unknown")):(await e.K_.stop(),Od(e))})),e.K_}function Zd(e){return e.U_||(e.U_=function(e,t,n){const r=co(e);return r.w_(),new xd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Wd.bind(null,e),mo:Qd.bind(null,e),f_:Kd.bind(null,e),g_:Gd.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await zd(e)):(await e.U_.stop(),e.O_.length>0&&(io("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}class ef{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new ef(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fo(ho.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tf(e,t){if(so("AsyncQueue",`${t}: ${e}`),qo(e))return new fo(ho.UNAVAILABLE,`${t}: ${e}`);throw e}class nf{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Do.comparator(t.key,n.key):(e,t)=>Do.comparator(e.key,t.key),this.keyedMap=Ou(),this.sortedSet=new nl(this.comparator)}static emptySet(e){return new nf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new nf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class rf{constructor(){this.W_=new nl(Do.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):lo():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class sf{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new sf(e,t,nf.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class af{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class of{constructor(){this.queries=lf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=co(e),r=n.queries;n.queries=lf(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new fo(ho.ABORTED,"Firestore shutting down"))}}function lf(){return new Au(e=>ku(e),Eu)}async function uf(e,t){const n=co(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new af,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=tf(e,`Initialization of query '${Su(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&ff(n)}async function cf(e,t){const n=co(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hf(e,t){const n=co(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&ff(n)}function df(e,t,n){const r=co(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function ff(e){e.Y_.forEach(e=>{e.next()})}var pf,mf;(mf=pf||(pf={})).ea="default",mf.Cache="cache";class gf{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new sf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=sf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pf.Cache}}class yf{constructor(e){this.key=e}}class vf{constructor(e){this.key=e}}class bf{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=zu(),this.mutatedKeys=zu(),this.Aa=Cu(e),this.Ra=new nf(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new rf,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=Nu(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.ga(u,c)||(n.track({type:2,doc:c}),f=!0,(o&&this.Aa(c,o)>0||l&&this.Aa(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lo()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new sf(this.query,e.Ra,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=zu(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new vf(e))}),this.da.forEach(n=>{e.has(n)||t.push(new yf(n))}),t}ba(e){this.Ta=e.Ts,this.da=zu();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return sf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class wf{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class xf{constructor(e){this.key=e,this.va=!1}}class _f{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Au(e=>ku(e),Eu),this.Ma=new Map,this.xa=new Set,this.Oa=new nl(Do.comparator),this.Na=new Map,this.La=new Uh,this.Ba={},this.ka=new Map,this.qa=Ph.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Ef(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=qf(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Sf(r,t,n,!0),i}async function kf(e,t){const n=qf(e);await Sf(n,t,!0,!1)}async function Sf(e,t,n,r){const i=await nd(e.localStore,bu(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Nf(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Td(e.remoteStore,i),o}async function Nf(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await id(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Uf(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const s=await id(e.localStore,t,!0),a=new bf(t,s.Ts),o=a.ma(s.documents),l=Uc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);Uf(e,n,u.wa);const c=new wf(t,n,a);return e.Fa.set(t,c),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),u.snapshot}async function Tf(e,t,n){const r=co(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(e=>!Eu(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await rd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cd(r.remoteStore,i.targetId),Lf(r,i.targetId)}).catch(zo)):(Lf(r,i.targetId),await rd(r.localStore,i.targetId,!0))}async function Cf(e,t){const n=co(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cd(n.remoteStore,r.targetId))}async function If(e,t){const n=co(e);try{const e=await function(e,t){const n=co(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?u=u.withResumeToken(ul.EMPTY_BYTE_STRING,Co.min()).withLastLimboFreeSnapshotVersion(Co.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(o,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&a.push(n.Ur.updateTargetData(e,u))});let o=Ru(),l=zu();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(ed(e,s,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(Co.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Bo.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(uo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?uo(r.va):e.removedDocuments.size>0&&(uo(r.va),r.va=!1))}),await zf(n,e,t)}catch(e){await zo(e)}}function Af(e,t,n){const r=co(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=co(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&ff(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Pf(e,t,n){const r=co(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new nl(Do.comparator);e=e.insert(s,Fl.newNoDocument(s,Co.min()));const n=zu().add(s),i=new Mc(Co.min(),new Map,new nl(So),e,n);await If(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),Vf(r)}else await rd(r.localStore,t,!1).then(()=>Lf(r,t,n)).catch(zo)}async function Rf(e,t){const n=co(e),r=t.batch.batchId;try{const e=await function(e,t){const n=co(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Bo.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);uo(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=zu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);jf(n,r,null),Of(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zf(n,e)}catch(e){await zo(e)}}async function Df(e,t,n){const r=co(e);try{const e=await function(e,t){const n=co(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(uo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);jf(r,t,n),Of(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await zf(r,e)}catch(n){await zo(n)}}function Of(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function jf(e,t,n){const r=co(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function Lf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Mf(e,t)})}function Mf(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Cd(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Vf(e))}function Uf(e,t,n){for(const r of n)r instanceof yf?(e.La.addReference(r.key,t),Ff(e,r)):r instanceof vf?(io("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Mf(e,r.key)):lo()}function Ff(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(io("SyncEngine","New document in limbo: "+n),e.xa.add(r),Vf(e))}function Vf(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Do(Ao.fromString(t)),r=e.qa.next();e.Na.set(r,new xf(n)),e.Oa=e.Oa.insert(n,r),Td(e.remoteStore,new kh(bu(mu(n.path)),r,"TargetPurposeLimboResolution",Ho.oe))}}async function zf(e,t,n){const r=co(e),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Kh.Wi(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=co(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Bo.forEach(t,t=>Bo.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Bo.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!qo(e))throw e;io("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function Bf(e,t){const n=co(e);if(!n.currentUser.isEqual(t)){io("SyncEngine","User change. New user:",t.toKey());const e=await Jh(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new fo(ho.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await zf(n,e.hs)}}function $f(e,t){const n=co(e),r=n.Na.get(t);if(r&&r.va)return zu().add(r.key);{let e=zu();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function qf(e){const t=co(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=If.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$f.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Pf.bind(null,t),t.Ca.d_=hf.bind(null,t.eventManager),t.Ca.$a=df.bind(null,t.eventManager),t}function Hf(e){const t=co(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Rf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Df.bind(null,t),t}class Wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Xh(this.persistence,new Qh,e.initialUser,this.serializer)}Ga(e){return new qh(Wh.Zr,this.serializer)}Wa(e){return new od}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wf.provider={build:()=>new Wf};class Kf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Af(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bf.bind(null,this.syncEngine),await Xd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new of}createDatastore(e){const t=yd(e.databaseInfo.databaseId),n=function(e){return new md(e)}(e.databaseInfo);return function(e,t,n,r){return new _d(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new kd(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Af(this.syncEngine,e,0),ud.D()?new ud:new ld)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new _f(e,t,n,r,i,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=co(e);io("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Nd(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Kf.provider={build:()=>new Kf};class Gf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):so("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Qf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=eo.UNAUTHENTICATED,this.clientId=ko.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{io("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(io("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Te){const n=tf(Te,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Yf(e,t){e.asyncQueue.verifyOperationInProgress(),io("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Jh(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Xf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Jf(e);io("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Yd(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Yd(t.remoteStore,n)),e._onlineComponents=t}async function Jf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){io("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yf(e,e._uninitializedComponentsProvider._offline)}catch(Te){const n=Te;if(!function(e){return"FirebaseError"===e.name?e.code===ho.FAILED_PRECONDITION||e.code===ho.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),await Yf(e,new Wf)}}else io("FirestoreClient","Using default OfflineComponentProvider"),await Yf(e,new Wf);return e._offlineComponents}async function Zf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(io("FirestoreClient","Using user provided OnlineComponentProvider"),await Xf(e,e._uninitializedComponentsProvider._online)):(io("FirestoreClient","Using default OnlineComponentProvider"),await Xf(e,new Kf))),e._onlineComponents}function ep(e){return Zf(e).then(e=>e.syncEngine)}async function tp(e){const t=await Zf(e),n=t.eventManager;return n.onListen=Ef.bind(null,t.syncEngine),n.onUnlisten=Tf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=kf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Cf.bind(null,t.syncEngine),n}function np(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new po;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Gf({next:o=>{s.Za(),t.enqueueAndForget(()=>cf(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new fo(ho.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new fo(ho.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new gf(mu(n.path),s,{includeMetadataChanges:!0,_a:!0});return uf(e,a)}(await tp(e),e.asyncQueue,t,n,r)),r.promise}function rp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new po;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Gf({next:n=>{s.Za(),t.enqueueAndForget(()=>cf(e,a)),n.fromCache&&"server"===r.source?i.reject(new fo(ho.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new gf(n,s,{includeMetadataChanges:!0,_a:!0});return uf(e,a)}(await tp(e),e.asyncQueue,t,n,r)),r.promise}function ip(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const sp=new Map;function ap(e,t,n){if(!n)throw new fo(ho.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function op(e){if(!Do.isDocumentKey(e))throw new fo(ho.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function lp(e){if(Do.isDocumentKey(e))throw new fo(ho.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function up(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":lo()}function cp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fo(ho.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=up(e);throw new fo(ho.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class hp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new fo(ho.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new fo(ho.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new fo(ho.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ip(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new fo(ho.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new fo(ho.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new fo(ho.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fo(ho.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new fo(ho.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new go;switch(e.type){case"firstParty":return new wo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fo(ho.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sp.get(e);t&&(io("ComponentProvider","Removing Datastore"),sp.delete(e),t.terminate())}(this),Promise.resolve()}}function fp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=cp(e,dp))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=eo.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Tt(JSON.stringify({alg:"none",type:"JWT"})),Tt(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new fo(ho.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new eo(s)}e._authCredentials=new yo(new mo(t,n))}}class pp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pp(this.firestore,e,this._query)}}class mp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mp(this.firestore,e,this._key)}}class gp extends pp{constructor(e,t,n){super(e,t,mu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mp(this.firestore,null,new Do(e))}withConverter(e){return new gp(this.firestore,e,this._path)}}function yp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Gt(e),ap("collection","path",t),e instanceof dp){const n=Ao.fromString(t,...r);return lp(n),new gp(e,null,n)}{if(!(e instanceof mp||e instanceof gp))throw new fo(ho.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ao.fromString(t,...r));return lp(n),new gp(e.firestore,null,n)}}function vp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Gt(e),1===arguments.length&&(t=ko.newId()),ap("doc","path",t),e instanceof dp){const n=Ao.fromString(t,...r);return op(n),new mp(e,null,new Do(n))}{if(!(e instanceof mp||e instanceof gp))throw new fo(ho.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ao.fromString(t,...r));return op(n),new mp(e.firestore,e instanceof gp?e.converter:null,new Do(n))}}class bp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vd(this,"async_queue_retry"),this.Vu=()=>{const e=gd();e&&io("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=gd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=gd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new po;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Ne){if(!qo(Ne))throw Ne;io("AsyncQueue","Operation failed with retryable error: "+Ne)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw so("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=ef.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&lo()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function wp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class xp extends dp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new bp,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bp(e),this._firestoreClient=void 0,await e}}}function _p(e){if(e._terminated)throw new fo(ho.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ep(e),e._firestoreClient}function Ep(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new yl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ip(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Qf(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class kp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kp(ul.fromBase64String(e))}catch(e){throw new fo(ho.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new kp(ul.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Sp{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new fo(ho.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ro(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Np{constructor(e){this._methodName=e}}class Tp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fo(ho.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fo(ho.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return So(this._lat,e._lat)||So(this._long,e._long)}}class Cp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Ip=/^__.*__$/;class Ap{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new gc(e,this.data,this.fieldMask,t,this.fieldTransforms):new mc(e,this.data,t,this.fieldTransforms)}}class Pp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new gc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lo()}}class Dp{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Dp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Rp(this.Cu)&&Ip.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Op{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||yd(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Dp({Cu:e,methodName:t,qu:n,path:Ro.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jp(e){const t=e._freezeSettings(),n=yd(e._databaseId);return new Op(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lp(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);Kp("Data must be an object, but it was:",a,r);const o=Hp(r,a);let l,u;if(s.merge)l=new ol(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Gp(t,r,n);if(!a.contains(i))throw new fo(ho.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Jp(e,i)||e.push(i)}l=new ol(e),u=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=a.fieldTransforms;return new Ap(new Ml(o),l,u)}class Mp extends Np{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mp}}function Up(e,t,n){return new Dp({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Fp extends Np{_toFieldTransform(e){return new sc(e.path,new Xu)}isEqual(e){return e instanceof Fp}}class Vp extends Np{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Up(this,e,!0),n=this.Ku.map(e=>qp(e,t)),r=new Ju(n);return new sc(e.path,r)}isEqual(e){return e instanceof Vp&&zt(this.Ku,e.Ku)}}function zp(e,t,n,r){const i=e.Qu(1,t,n);Kp("Data must be an object, but it was:",i,r);const s=[],a=Ml.empty();el(r,(e,r)=>{const o=Yp(t,e,n);r=Gt(r);const l=i.Nu(o);if(r instanceof Mp)s.push(o);else{const e=qp(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new ol(s);return new Pp(a,o,i.fieldTransforms)}function Bp(e,t,n,r,i,s){const a=e.Qu(1,t,n),o=[Gp(t,r,n)],l=[i];if(s.length%2!=0)throw new fo(ho.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(Gp(t,s[d])),l.push(s[d+1]);const u=[],c=Ml.empty();for(let d=o.length-1;d>=0;--d)if(!Jp(u,o[d])){const e=o[d];let t=l[d];t=Gt(t);const n=a.Nu(e);if(t instanceof Mp)u.push(e);else{const r=qp(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new ol(u);return new Pp(c,h,a.fieldTransforms)}function $p(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qp(n,e.Qu(r?4:3,t))}function qp(e,t){if(Wp(e=Gt(e)))return Kp("Unsupported field value:",t,e),Hp(e,t);if(e instanceof Np)return function(e,t){if(!Rp(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=qp(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Gt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Wu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=To.fromDate(e);return{timestampValue:Xc(t.serializer,n)}}if(e instanceof To){const n=new To(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xc(t.serializer,n)}}if(e instanceof Tp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof kp)return{bytesValue:Jc(t.serializer,e._byteString)};if(e instanceof mp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:th(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Cp)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return qu(t.serializer,e)})}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${up(e)}`)}(e,t)}function Hp(e,t){const n={};return tl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):el(e,(e,r)=>{const i=qp(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Wp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof To||e instanceof Tp||e instanceof kp||e instanceof mp||e instanceof Np||e instanceof Cp)}function Kp(e,t,n){if(!Wp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=up(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Gp(e,t,n){if((t=Gt(t))instanceof Sp)return t._internalPath;if("string"==typeof t)return Yp(e,t);throw Xp("Field path arguments must be of type string or ",e,!1,void 0,n)}const Qp=new RegExp("[~\\*/\\[\\]]");function Yp(e,t,n){if(t.search(Qp)>=0)throw Xp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Sp(...t.split("."))._internalPath}catch(r){throw Xp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Xp(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new fo(ho.INVALID_ARGUMENT,o+e+l)}function Jp(e,t){return e.some(e=>e.isEqual(t))}class Zp{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new em(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class em extends Zp{data(){return super.data()}}function tm(e,t){return"string"==typeof t?Yp(e,t):t instanceof Sp?t._internalPath:t._delegate._internalPath}function nm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fo(ho.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rm{}class im extends rm{}function sm(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof rm&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof lm).length,n=e.filter(e=>e instanceof am).length;if(t>1||t>0&&n>0)throw new fo(ho.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class am extends im{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new am(e,t,n)}_apply(e){const t=this._parse(e);return hm(e._query,t),new pp(e.firestore,e.converter,xu(e._query,t))}_parse(e){const t=jp(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new fo(ho.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){cm(a,s);const t=[];for(const n of a)t.push(um(r,e,n));o={arrayValue:{values:t}}}else o=um(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||cm(a,s),o=$p(n,t,a,"in"===s||"not-in"===s);return Wl.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function om(e,t,n){const r=t,i=tm("where",e);return am._create(i,r,n)}class lm extends rm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lm(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Kl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)hm(n,i),n=xu(n,i)}(e._query,t),new pp(e.firestore,e.converter,xu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function um(e,t,n){if("string"==typeof(n=Gt(n))){if(""===n)throw new fo(ho.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yu(t)&&-1!==n.indexOf("/"))throw new fo(ho.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ao.fromString(n));if(!Do.isDocumentKey(r))throw new fo(ho.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cl(e,new Do(r))}if(n instanceof mp)return Cl(e,n._key);throw new fo(ho.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${up(n)}.`)}function cm(e,t){if(!Array.isArray(e)||0===e.length)throw new fo(ho.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function hm(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new fo(ho.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new fo(ho.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class dm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(wl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw lo()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return el(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>dl(e.doubleValue));return new Cp(i)}convertGeoPoint(e){return new Tp(dl(e.latitude),dl(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ml(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const t=hl(e);return new To(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ao.fromString(e);uo(Eh(n));const r=new vl(n.get(1),n.get(3)),i=new Do(n.popFirst(5));return r.isEqual(t)||so(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function fm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class pm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mm extends Zp{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new gm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(tm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class gm extends mm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ym{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new pm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new gm(this._firestore,this._userDataWriter,n.key,n,new pm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new fo(ho.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new gm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new pm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new gm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:vm(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lo()}}class bm extends dm{constructor(e){super(),this.firestore=e}convertBytes(e){return new kp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mp(this.firestore,null,t)}}function wm(e){e=cp(e,pp);const t=cp(e.firestore,xp),n=_p(t),r=new bm(t);return nm(e._query),rp(n,e._query).then(n=>new ym(t,r,e,n))}function xm(e,t,n){e=cp(e,mp);const r=cp(e.firestore,xp),i=jp(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=Gt(t))||t instanceof Sp?Bp(i,"updateDoc",e._key,t,n,o):zp(i,"updateDoc",e._key,t),Sm(r,[s.toMutation(e._key,oc.exists(!0))])}function _m(e){return Sm(cp(e.firestore,xp),[new wc(e._key,oc.none())])}function Em(e,t){const n=cp(e.firestore,xp),r=vp(e),i=fm(e.converter,t);return Sm(n,[Lp(jp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,oc.exists(!1))]).then(()=>r)}function km(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,a;e=Gt(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||wp(n[l])||(o=n[l],l++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(wp(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let c,h,d;if(e instanceof mp)h=cp(e.firestore,xp),d=mu(e._key.path),c={next:t=>{n[l]&&n[l](Nm(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=cp(e,pp);h=cp(t.firestore,xp),d=t._query;const r=new bm(h);c={next:e=>{n[l]&&n[l](new ym(h,r,t,e))},error:n[l+1],complete:n[l+2]},nm(e._query)}return function(e,t,n,r){const i=new Gf(r),s=new gf(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>uf(await tp(e),s)),()=>{i.Za(),e.asyncQueue.enqueueAndForget(async()=>cf(await tp(e),s))}}(_p(h),d,u,c)}function Sm(e,t){return function(e,t){const n=new po;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Hf(e);try{const e=await function(e,t){const n=co(e),r=To.now(),i=t.reduce((e,t)=>e.add(t.key),zu());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Ru(),l=zu();return n.cs.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=fc(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new gc(e.key,t,Ul(t.value.mapValue),oc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:ju(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new nl(So)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await zf(r,e.changes),await zd(r.remoteStore)}catch(e){const t=tf(e,"Failed to persist write");n.reject(t)}}(await ep(e),t,n)),n.promise}(_p(e),t)}function Nm(e,t,n){const r=n.docs.get(t._key),i=new bm(e);return new mm(e,i,t._key,r,new pm(n.hasPendingWrites,n.fromCache),t.converter)}function Tm(){return new Fp("serverTimestamp")}function Cm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Vp("arrayUnion",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){to=e}(cr),sr(new Qt("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new xp(new vo(e.getProvider("auth-internal")),new _o(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fo(ho.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),fr(Za,"4.7.3",e),fr(Za,"4.7.3","esm2017")}();const Im=hr({apiKey:"AIzaSyAtV-4J--e_EWws5PyN-gIsEjbZBBdE2rc",authDomain:"ubiko-395fd.firebaseapp.com",projectId:"ubiko-395fd",storageBucket:"ubiko-395fd.firebasestorage.app",messagingSenderId:"323799153344",appId:"1:323799153344:web:8897d509f62e569ceb0b25",measurementId:"G-461BNFNVDM"}),Am=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr();const t=ar(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ar(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(zt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ar(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ra,persistence:[qs,Ts,Is]}),r=Dt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>La)return;const r=null===t||void 0===t?void 0:t.token;Ma!==r&&(Ma=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Gt(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Gt(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=Pt("auth");return s&&Wi(n,`http://${s}`),n}(Im),Pm=function(e,t){const n="string"==typeof e?e:t||"(default)",r=ar("object"==typeof e?e:dr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=Pt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&fp(r,...e)}return r}(Im);var Rm=n(579);const Dm=(0,i.createContext)();function Om(){return(0,i.useContext)(Dm)}function jm(e){let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,a]=(0,i.useState)(!0);(0,i.useEffect)(()=>{const e=function(e,t,n,r){return Gt(e).onAuthStateChanged(t,n,r)}(Am,e=>{r(e),a(!1)});return e},[]);const o={currentUser:n,signup:function(e,t,n){return async function(e,t,n){if(or(e.app))return Promise.reject(Dr(e));const r=Ui(e),i=Hi(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hs),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&xs(e),t}),a=await ds._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(Am,e,t).then(e=>_s(e.user,{displayName:n}))},login:function(e,t){return function(e,t,n){return or(e.app)?Promise.reject(Dr(e)):bs(Gt(e),is.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&xs(e),t})}(Am,e,t)},logout:function(){return function(e){return Gt(e).signOut()}(Am)}};return(0,Rm.jsx)(Dm.Provider,{value:o,children:!s&&t})}function Lm(e){let{children:t}=e;const{currentUser:n}=Om();return n?t:(0,Rm.jsx)(ye,{to:"/"})}var Mm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Um=(e,t)=>{const n=(0,i.forwardRef)((n,r)=>{let{color:s="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:u="",children:c,...h}=n;return(0,i.createElement)("svg",{ref:r,...Mm,width:a,height:a,stroke:s,strokeWidth:l?24*Number(o)/Number(a):o,className:["lucide",`lucide-${d=e,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,u].join(" "),...h},[...t.map(e=>{let[t,n]=e;return(0,i.createElement)(t,n)}),...Array.isArray(c)?c:[c]]);var d});return n.displayName=`${e}`,n},Fm=Um("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Vm=Um("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),zm=Um("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Bm=Um("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),$m=Um("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function qm(){const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(!1),[u,c]=(0,i.useState)(!1),[h,d]=(0,i.useState)(!1),{signup:f,login:p}=Om(),m=ne();return(0,Rm.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,Rm.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:o?"Crear Cuenta":"Iniciar Sesi\xf3n"}),(0,Rm.jsx)("p",{className:"text-gray-600",children:o?"\xdanete para compartir gastos con amigos":"Accede a tu cuenta"})]}),(0,Rm.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,Rm.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),!o||s.trim())try{d(!0),o?(await f(e,n,s),Et.success("\xa1Cuenta creada exitosamente!")):(await p(e,n),Et.success("\xa1Bienvenido de vuelta!")),m("/dashboard")}catch(r){Et.error(r.message)}finally{d(!1)}else Et.error("Por favor ingresa tu nombre")},className:"space-y-6",children:[o&&(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre completo"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)(Fm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,Rm.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tu nombre"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo electr\xf3nico"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)(Vm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,Rm.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"tu@email.com",required:!0})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrase\xf1a"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)(zm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,Rm.jsx)("input",{type:u?"text":"password",value:n,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0}),(0,Rm.jsx)("button",{type:"button",onClick:()=>c(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?(0,Rm.jsx)(Bm,{className:"h-5 w-5"}):(0,Rm.jsx)($m,{className:"h-5 w-5"})})]})]}),(0,Rm.jsx)("button",{type:"submit",disabled:h,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Cargando...":o?"Crear Cuenta":"Iniciar Sesi\xf3n"})]}),(0,Rm.jsx)("div",{className:"mt-6 text-center",children:(0,Rm.jsx)("button",{onClick:()=>l(!o),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:o?"\xbfYa tienes cuenta? Inicia sesi\xf3n":"\xbfNo tienes cuenta? Reg\xedstrate"})})]})]})})}const Hm=Um("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Wm=Um("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Km=Um("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Gm=Um("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Qm=Um("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ym=Um("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Xm=Um("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Jm=Um("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Zm=Um("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function eg(){const{currentUser:e,logout:t}=Om(),n=ne(),[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)(!1),[l,u]=(0,i.useState)(""),[c,h]=(0,i.useState)(null),[d,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)({displayName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),[g,y]=(0,i.useState)({current:!1,new:!1,confirm:!1});function v(){f(!1),m({displayName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),y({current:!1,new:!1,confirm:!1})}return(0,i.useEffect)(()=>{if(!e)return;const t=km(sm(yp(Pm,"rooms"),om("members","array-contains",e.uid)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));s(t)});return()=>t()},[e]),(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rm.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Rm.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Rm.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,Rm.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rm.jsx)(Hm,{className:"h-8 w-8 text-blue-600"}),(0,Rm.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Compartir Gastos"})]}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rm.jsxs)("span",{className:"text-sm text-gray-600",children:["Hola, ",(null===e||void 0===e?void 0:e.displayName)||"Usuario"]}),(0,Rm.jsxs)("button",{onClick:function(){m({displayName:(null===e||void 0===e?void 0:e.displayName)||"",email:(null===e||void 0===e?void 0:e.email)||"",currentPassword:"",newPassword:"",confirmPassword:""}),f(!0)},className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,Rm.jsx)(Fm,{className:"h-5 w-5"}),(0,Rm.jsx)("span",{children:"Mi Perfil"})]}),(0,Rm.jsxs)("button",{onClick:async function(){try{await t(),n("/")}catch(e){Et.error("Error al cerrar sesi\xf3n")}},className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,Rm.jsx)(Wm,{className:"h-5 w-5"}),(0,Rm.jsx)("span",{children:"Cerrar Sesi\xf3n"})]})]})]})})}),(0,Rm.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)(Km,{className:"h-8 w-8 text-blue-600"}),(0,Rm.jsxs)("div",{className:"ml-4",children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Salas Activas"}),(0,Rm.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:r.length})]})]})}),(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)(Gm,{className:"h-8 w-8 text-green-600"}),(0,Rm.jsxs)("div",{className:"ml-4",children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Gastos"}),(0,Rm.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:["$",r.reduce((e,t)=>e+(t.totalExpenses||0),0).toFixed(2)]})]})]})}),(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)(Qm,{className:"h-8 w-8 text-purple-600"}),(0,Rm.jsxs)("div",{className:"ml-4",children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Deudas Pendientes"}),(0,Rm.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:r.reduce((e,t)=>e+(t.pendingDebts||0),0)})]})]})})]}),(0,Rm.jsxs)("div",{className:"flex flex-wrap gap-4 mb-8",children:[(0,Rm.jsxs)("button",{onClick:()=>o(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,Rm.jsx)(Ym,{className:"h-5 w-5"}),(0,Rm.jsx)("span",{children:"Crear Nueva Sala"})]}),(0,Rm.jsxs)("button",{onClick:function(){const e=prompt("Ingresa el c\xf3digo de la sala:");e&&n(`/join/${e.toUpperCase()}`)},className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[(0,Rm.jsx)(Km,{className:"h-5 w-5"}),(0,Rm.jsx)("span",{children:"Unirse a Sala"})]})]}),a&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Crear Nueva Sala"}),(0,Rm.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),l.trim())try{const t=Math.random().toString(36).substring(2,8).toUpperCase();await Em(yp(Pm,"rooms"),{name:l,code:t,createdBy:e.uid,members:[e.uid],createdAt:Tm()}),u(""),o(!1),Et.success("Sala creada exitosamente")}catch(n){Et.error("Error al crear la sala")}},children:[(0,Rm.jsx)("input",{type:"text",value:l,onChange:e=>u(e.target.value),placeholder:"Nombre de la sala",className:"w-full p-3 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),(0,Rm.jsxs)("div",{className:"flex space-x-3",children:[(0,Rm.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700",children:"Crear"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>o(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),d&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-96 overflow-y-auto",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Mi Perfil"}),(0,Rm.jsxs)("form",{onSubmit:async function(t){t.preventDefault();try{if(p.displayName!==e.displayName&&(await _s(e,{displayName:p.displayName}),await xm(vp(Pm,"users",e.uid),{displayName:p.displayName})),p.newPassword){if(p.newPassword!==p.confirmPassword)return void Et.error("Las contrase\xf1as nuevas no coinciden");if(p.newPassword.length<6)return void Et.error("La contrase\xf1a debe tener al menos 6 caracteres");if(!p.currentPassword)return void Et.error("Debes ingresar tu contrase\xf1a actual para cambiarla");const t=is.credential(e.email,p.currentPassword);await ws(e,t),await(n=e,r=p.newPassword,Es(Gt(n),null,r)),Et.success("Contrase\xf1a actualizada exitosamente")}v(),p.displayName!==e.displayName&&Et.success("Perfil actualizado exitosamente")}catch(i){console.error("Error updating profile:",i),"auth/wrong-password"===i.code?Et.error("La contrase\xf1a actual es incorrecta"):"auth/weak-password"===i.code?Et.error("La contrase\xf1a es muy d\xe9bil"):Et.error("Error al actualizar el perfil")}var n,r},children:[(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),(0,Rm.jsx)("input",{type:"text",value:p.displayName,onChange:e=>m({...p,displayName:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tu nombre",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,Rm.jsx)("input",{type:"email",value:p.email,className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed",disabled:!0}),(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"El email no se puede cambiar"})]}),(0,Rm.jsxs)("div",{className:"border-t pt-4",children:[(0,Rm.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Cambiar Contrase\xf1a"}),(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Deja en blanco si no quieres cambiar tu contrase\xf1a"}),(0,Rm.jsxs)("div",{className:"space-y-3",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrase\xf1a Actual"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:g.current?"text":"password",value:p.currentPassword,onChange:e=>m({...p,currentPassword:e.target.value}),className:"w-full p-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contrase\xf1a actual"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>y({...g,current:!g.current}),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:g.current?(0,Rm.jsx)(Bm,{className:"h-4 w-4"}):(0,Rm.jsx)($m,{className:"h-4 w-4"})})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva Contrase\xf1a"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:g.new?"text":"password",value:p.newPassword,onChange:e=>m({...p,newPassword:e.target.value}),className:"w-full p-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nueva contrase\xf1a (m\xednimo 6 caracteres)"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>y({...g,new:!g.new}),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:g.new?(0,Rm.jsx)(Bm,{className:"h-4 w-4"}):(0,Rm.jsx)($m,{className:"h-4 w-4"})})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Nueva Contrase\xf1a"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:g.confirm?"text":"password",value:p.confirmPassword,onChange:e=>m({...p,confirmPassword:e.target.value}),className:"w-full p-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirmar nueva contrase\xf1a"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>y({...g,confirm:!g.confirm}),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:g.confirm?(0,Rm.jsx)(Bm,{className:"h-4 w-4"}):(0,Rm.jsx)($m,{className:"h-4 w-4"})})]})]})]})]})]}),(0,Rm.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Rm.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700",children:"Guardar Cambios"}),(0,Rm.jsx)("button",{type:"button",onClick:v,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),(0,Rm.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(t=>{var r;return(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow",children:(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t.name}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsxs)("button",{onClick:()=>{return e=t.code,navigator.clipboard.writeText(e),h(e),Et.success("C\xf3digo copiado al portapapeles"),void setTimeout(()=>h(null),2e3);var e},className:"flex items-center space-x-1 text-sm text-blue-600 hover:text-blue-700",children:[c===t.code?(0,Rm.jsx)(Xm,{className:"h-4 w-4"}):(0,Rm.jsx)(Jm,{className:"h-4 w-4"}),(0,Rm.jsx)("span",{children:t.code})]}),t.createdBy===e.uid&&(0,Rm.jsx)("button",{onClick:e=>{e.stopPropagation(),async function(e,t){if(window.confirm(`\xbfEst\xe1s seguro de que quieres eliminar la sala "${t}"?\n\nEsta acci\xf3n no se puede deshacer y eliminar\xe1 todos los gastos asociados.`))try{const t=sm(yp(Pm,"expenses"),om("roomId","==",e)),n=(await wm(t)).docs.map(e=>_m(vp(Pm,"expenses",e.id)));await Promise.all(n),await _m(vp(Pm,"rooms",e)),Et.success("Sala y gastos eliminados exitosamente")}catch(n){console.error("Error al eliminar la sala:",n),Et.error("Error al eliminar la sala")}}(t.id,t.name)},className:"text-red-600 hover:text-red-800 p-1",title:"Eliminar sala",children:(0,Rm.jsx)(Zm,{className:"h-4 w-4"})})]})]}),(0,Rm.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["Miembros: ",(null===(r=t.members)||void 0===r?void 0:r.length)||0]}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["Total: $",(t.totalExpenses||0).toFixed(2)]})]}),(0,Rm.jsx)("button",{onClick:()=>n(`/room/${t.id}`),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Ver Sala"})]})},t.id)})}),0===r.length&&(0,Rm.jsxs)("div",{className:"text-center py-12",children:[(0,Rm.jsx)(Km,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,Rm.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tienes salas activas"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"Crea una nueva sala o \xfanete a una existente para empezar a compartir gastos"}),(0,Rm.jsx)("button",{onClick:()=>o(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Crear Primera Sala"})]})]})]})}const tg=Um("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ng=Um("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function rg(){var e,t;const{roomId:n}=re(),{currentUser:r}=Om(),s=ne(),[a,o]=(0,i.useState)(null),[l,u]=(0,i.useState)([]),[c,h]=(0,i.useState)([]),[d,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)({description:"",amount:"",paidBy:(null===r||void 0===r?void 0:r.uid)||"",splitBetween:[]}),[g,y]=(0,i.useState)({}),[v,b]=(0,i.useState)(!1),[w,x]=(0,i.useState)(!1),[_,E]=(0,i.useState)(null),[k,S]=(0,i.useState)({}),[N,T]=(0,i.useState)(!1),[C,I]=(0,i.useState)(!1),[A,P]=(0,i.useState)(null),[R,D]=(0,i.useState)(null);function O(e){E(e),x(!0)}function j(e){P(e),I(!0),e.createdBy===r.uid&&D({description:e.description,amount:e.amount.toString(),paidBy:e.paidBy,splitBetween:[...e.splitBetween],memberShares:{...e.memberShares}})}function L(){I(!1),P(null),D(null),y({})}function M(){if(!l.length||!c.length)return[];const e={};c.forEach(t=>{e[t.id]=0}),l.forEach(t=>{const n=t.paidBy,r=parseFloat(t.amount)||0,i=r/t.splitBetween.reduce((e,n)=>{var r;return e+((null===(r=t.memberShares)||void 0===r?void 0:r[n])||1)},0);void 0!==e[n]&&(e[n]+=r),t.splitBetween&&Array.isArray(t.splitBetween)&&t.splitBetween.forEach(n=>{if(void 0!==e[n]){var r;const s=(null===(r=t.memberShares)||void 0===r?void 0:r[n])||1,a=i*s;e[n]-=a}})});const t=Object.entries(e).map(e=>{let[t,n]=e;return{memberId:t,balance:parseFloat(n.toFixed(2)),member:c.find(e=>e.id===t)}});return t}(0,i.useEffect)(()=>{if(!n||!r)return;const e=km(vp(Pm,"rooms",n),e=>{if(e.exists()){const t={id:e.id,...e.data()};o(t),t.members&&Promise.all(t.members.map(async e=>{const t=await function(e){e=cp(e,mp);const t=cp(e.firestore,xp);return np(_p(t),e._key).then(n=>Nm(t,e,n))}(vp(Pm,"users",e));return t.exists()?{id:e,...t.data()}:{id:e,displayName:"Usuario"}})).then(e=>{h(e);const t={};e.forEach(e=>{e.accounts&&(t[e.id]=e.accounts)}),S(t)})}else Et.error("Sala no encontrada"),s("/dashboard")}),t=km(sm(yp(Pm,"expenses"),om("roomId","==",n)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));t.sort((e,t)=>{var n,r,i,s;const a=(null===(n=e.createdAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||e.createdAt||new Date(0);return((null===(i=t.createdAt)||void 0===i||null===(s=i.toDate)||void 0===s?void 0:s.call(i))||t.createdAt||new Date(0))-a}),u(t)});return()=>{e(),t()}},[n,r,s]);const U=function(){if(!l.length||!c.length)return[];const e={};c.forEach(t=>{e[t.id]=0}),l.forEach(t=>{const n=t.paidBy,r=parseFloat(t.amount)||0;void 0!==e[n]&&(e[n]+=r)});const t=Object.entries(e).map(e=>{let[t,n]=e;return{memberId:t,totalPaid:parseFloat(n.toFixed(2)),member:c.find(e=>e.id===t)}});return t}(),F=(M(),function(){const e=M(),t=[],n=e.filter(e=>e.balance<0),r=e.filter(e=>e.balance>0);return n.forEach(e=>{let n=Math.abs(e.balance);r.forEach(r=>{if(n>0&&r.balance>0){const a=Math.min(n,r.balance);var i,s;if(a>0)t.push({from:(null===(i=e.member)||void 0===i?void 0:i.displayName)||"Usuario",fromId:e.memberId,to:(null===(s=r.member)||void 0===s?void 0:s.displayName)||"Usuario",toId:r.memberId,amount:a}),n-=a,r.balance-=a}})}),t}()),V=l.reduce((e,t)=>e+(parseFloat(t.amount)||0),0);return a?(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rm.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Rm.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Rm.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,Rm.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rm.jsxs)("button",{onClick:()=>s("/dashboard"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,Rm.jsx)(tg,{className:"h-5 w-5"}),(0,Rm.jsx)("span",{children:"Volver"})]}),(0,Rm.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:a.name})]}),(0,Rm.jsx)("div",{className:"flex items-center space-x-4",children:(0,Rm.jsxs)("button",{onClick:function(){null!==a&&void 0!==a&&a.code&&(navigator.clipboard.writeText(a.code),b(!0),Et.success("C\xf3digo copiado al portapapeles"),setTimeout(()=>b(!1),2e3))},className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700",children:[v?(0,Rm.jsx)(Xm,{className:"h-4 w-4"}):(0,Rm.jsx)(Jm,{className:"h-4 w-4"}),(0,Rm.jsx)("span",{className:"font-mono",children:a.code})]})})]})})}),(0,Rm.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)(Gm,{className:"h-8 w-8 text-green-600"}),(0,Rm.jsxs)("div",{className:"ml-4",children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Gastos"}),(0,Rm.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:["$",V.toFixed(2)]})]})]})}),(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)(Km,{className:"h-8 w-8 text-blue-600"}),(0,Rm.jsxs)("div",{className:"ml-4",children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Miembros"}),(0,Rm.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.length})]})]})}),(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)(ng,{className:"h-8 w-8 text-orange-600"}),(0,Rm.jsxs)("div",{className:"ml-4",children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Gastos"}),(0,Rm.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:l.length})]})]})}),(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)(Fm,{className:"h-8 w-8 text-purple-600"}),(0,Rm.jsxs)("div",{className:"ml-4",children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Promedio"}),(0,Rm.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:["$",c.length>0?(V/c.length).toFixed(2):"0.00"]})]})]})})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Rm.jsx)("div",{className:"lg:col-span-2",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,Rm.jsx)("div",{className:"p-6 border-b",children:(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Gastos"}),(0,Rm.jsxs)("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,Rm.jsx)(Ym,{className:"h-4 w-4"}),(0,Rm.jsx)("span",{children:"Agregar Gasto"})]})]})}),(0,Rm.jsx)("div",{className:"p-6",children:0===l.length?(0,Rm.jsxs)("div",{className:"text-center py-8",children:[(0,Rm.jsx)(Gm,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,Rm.jsx)("p",{className:"text-gray-600",children:"No hay gastos registrados"})]}):(0,Rm.jsx)("div",{className:"space-y-4",children:l.map(e=>{const t=c.find(t=>t.id===e.paidBy);return(0,Rm.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,Rm.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Rm.jsxs)("div",{className:"flex-1 cursor-pointer",onClick:()=>j(e),children:[(0,Rm.jsx)("h3",{className:"font-medium text-gray-900 hover:text-blue-600",children:e.description}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["Pagado por: ",(null===t||void 0===t?void 0:t.displayName)||"Usuario"]}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["Dividido entre: ",e.splitBetween.length," personas",e.memberShares&&Object.keys(e.memberShares).length>0&&(0,Rm.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",Object.entries(e.memberShares).map(e=>{let[t,n]=e;const r=c.find(e=>e.id===t);return`${(null===r||void 0===r?void 0:r.displayName)||"Usuario"} ${n}x`}).join(", "),")"]})]})]}),(0,Rm.jsxs)("div",{className:"text-right cursor-pointer",onClick:()=>j(e),children:[(0,Rm.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["$",e.amount.toFixed(2)]}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["$",e.splitAmount.toFixed(2)," c/u"]})]}),e.createdBy===r.uid&&(0,Rm.jsx)("button",{onClick:t=>{t.stopPropagation(),async function(e){if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este gasto?"))try{await _m(vp(Pm,"expenses",e)),Et.success("Gasto eliminado")}catch(t){Et.error("Error al eliminar el gasto")}}(e.id)},className:"ml-4 text-red-600 hover:text-red-700",children:(0,Rm.jsx)(Zm,{className:"h-4 w-4"})})]})},e.id)})})})]})}),(0,Rm.jsx)("div",{className:"lg:col-span-1",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,Rm.jsx)("div",{className:"p-6 border-b",children:(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:N?"Deudas Individuales":"Resumen de Pagos"}),(0,Rm.jsxs)("button",{onClick:()=>T(!N),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[(0,Rm.jsx)(Fm,{className:"h-4 w-4"}),(0,Rm.jsx)("span",{children:N?"Ver pagos":"Ver deudas"})]})]})}),(0,Rm.jsx)("div",{className:"p-6",children:N?(0,Rm.jsx)("div",{className:"space-y-3",children:F.length>0?F.map((e,t)=>(0,Rm.jsx)("div",{className:"border rounded-lg p-3 bg-red-50 border-red-200",children:(0,Rm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,Rm.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[(0,Rm.jsx)("strong",{children:e.from})," le debe a ",(0,Rm.jsx)("strong",{children:e.to})]})]}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsxs)("span",{className:"text-sm font-semibold text-red-600",children:["$",e.amount.toFixed(2)]}),k[e.toId]&&k[e.toId].length>0&&(0,Rm.jsx)("button",{onClick:()=>{const t=c.find(t=>t.id===e.toId);O(t)},className:"text-xs text-blue-600 hover:text-blue-800",title:"Ver cuentas para pagar",children:(0,Rm.jsx)(Fm,{className:"h-3 w-3"})})]})]})},t)):(0,Rm.jsxs)("div",{className:"text-center py-4",children:[(0,Rm.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,Rm.jsx)(Xm,{className:"h-6 w-6 text-green-600"})}),(0,Rm.jsx)("p",{className:"text-sm text-gray-600",children:"\xa1Todas las deudas est\xe1n saldadas!"})]})}):(0,Rm.jsx)("div",{className:"space-y-4",children:U.map(e=>{var t;let{memberId:n,totalPaid:i,member:s}=e;return(0,Rm.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Rm.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(null===s||void 0===s?void 0:s.displayName)||"Usuario"}),(0,Rm.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:["$",i.toFixed(2)," pagado"]})]}),k[n]&&k[n].length>0&&(0,Rm.jsx)("div",{className:"mt-2 space-y-1",children:k[n].map((e,t)=>(0,Rm.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 bg-gray-50 p-2 rounded",children:[(0,Rm.jsxs)("span",{children:[(0,Rm.jsxs)("strong",{children:[e.type,":"]})," ",e.info]}),(0,Rm.jsx)("button",{onClick:()=>{return t=e.info,navigator.clipboard.writeText(t),void Et.success("Informaci\xf3n copiada al portapapeles");var t},className:"text-blue-600 hover:text-blue-800",children:(0,Rm.jsx)(Jm,{className:"h-3 w-3"})})]},t))}),(0,Rm.jsx)("div",{className:"mt-2 flex justify-end",children:(0,Rm.jsxs)("button",{onClick:()=>O(s),className:"text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",disabled:n!==r.uid,children:[(0,Rm.jsx)(Fm,{className:"h-3 w-3"}),(0,Rm.jsx)("span",{children:n===r.uid?(null===(t=k[n])||void 0===t?void 0:t.length)>0?"Editar cuentas":"Agregar cuentas":"Ver cuentas"})]})})]},n)})})})]})})]}),d&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Agregar Gasto"}),(0,Rm.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),p.description&&p.amount&&0!==p.splitBetween.length)try{const e=parseFloat(p.amount),t=p.splitBetween.reduce((e,t)=>e+(g[t]||1),0),i=e/t;await Em(yp(Pm,"expenses"),{roomId:n,description:p.description,amount:e,paidBy:p.paidBy,splitBetween:p.splitBetween,splitAmount:i,memberShares:g,totalShares:t,createdBy:r.uid,createdAt:Tm()}),m({description:"",amount:"",paidBy:r.uid,splitBetween:[]}),y({}),f(!1),Et.success("Gasto agregado exitosamente")}catch(t){Et.error("Error al agregar el gasto")}else Et.error("Por favor completa todos los campos")},children:[(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,Rm.jsx)("input",{type:"text",value:p.description,onChange:e=>m({...p,description:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Cena, Transporte, etc.",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto"}),(0,Rm.jsx)("input",{type:"number",step:"0.01",value:p.amount,onChange:e=>m({...p,amount:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pagado por"}),(0,Rm.jsx)("select",{value:p.paidBy,onChange:e=>m({...p,paidBy:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:c.map(e=>(0,Rm.jsx)("option",{value:e.id,children:e.displayName||"Usuario"},e.id))})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dividir entre"}),(0,Rm.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,Rm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rm.jsxs)("label",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"checkbox",checked:p.splitBetween.includes(e.id),onChange:t=>{const n=t.target.checked?[...p.splitBetween,e.id]:p.splitBetween.filter(t=>t!==e.id);if(m({...p,splitBetween:n}),!t.target.checked){const t={...g};delete t[e.id],y(t)}},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,Rm.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.displayName||"Usuario"})]}),p.splitBetween.includes(e.id)&&(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsx)("span",{className:"text-xs text-gray-500",children:"Participaciones:"}),(0,Rm.jsxs)("select",{value:g[e.id]||1,onChange:t=>{const n=parseInt(t.target.value);y({...g,[e.id]:n})},className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,Rm.jsx)("option",{value:1,children:"1x"}),(0,Rm.jsx)("option",{value:2,children:"2x"}),(0,Rm.jsx)("option",{value:3,children:"3x"}),(0,Rm.jsx)("option",{value:4,children:"4x"}),(0,Rm.jsx)("option",{value:5,children:"5x"}),(0,Rm.jsx)("option",{value:6,children:"6x"})]})]})]},e.id))})]})]}),(0,Rm.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Rm.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700",children:"Agregar"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>f(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),C&&A&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-96 overflow-y-auto",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:R?"Editar Gasto":"Detalles del Gasto"}),R?(0,Rm.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),R&&A)if(R.description&&R.amount&&0!==R.splitBetween.length)try{const e=parseFloat(R.amount),t=R.splitBetween.reduce((e,t)=>e+(R.memberShares[t]||1),0),n=e/t;await xm(vp(Pm,"expenses",A.id),{description:R.description,amount:e,paidBy:R.paidBy,splitBetween:R.splitBetween,splitAmount:n,memberShares:R.memberShares,totalShares:t,updatedAt:Tm()}),L(),Et.success("Gasto actualizado exitosamente")}catch(t){Et.error("Error al actualizar el gasto")}else Et.error("Por favor completa todos los campos")},children:[(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,Rm.jsx)("input",{type:"text",value:R.description,onChange:e=>D({...R,description:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Cena, Transporte, etc.",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto"}),(0,Rm.jsx)("input",{type:"number",step:"0.01",value:R.amount,onChange:e=>D({...R,amount:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pagado por"}),(0,Rm.jsx)("select",{value:R.paidBy,onChange:e=>D({...R,paidBy:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:c.map(e=>(0,Rm.jsx)("option",{value:e.id,children:e.displayName||"Usuario"},e.id))})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dividir entre"}),(0,Rm.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,Rm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rm.jsxs)("label",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"checkbox",checked:R.splitBetween.includes(e.id),onChange:t=>{const n=t.target.checked?[...R.splitBetween,e.id]:R.splitBetween.filter(t=>t!==e.id);if(D({...R,splitBetween:n}),!t.target.checked){const t={...R.memberShares};delete t[e.id],D({...R,memberShares:t})}},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,Rm.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.displayName||"Usuario"})]}),R.splitBetween.includes(e.id)&&(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsx)("span",{className:"text-xs text-gray-500",children:"Participaciones:"}),(0,Rm.jsxs)("select",{value:R.memberShares[e.id]||1,onChange:t=>{const n=parseInt(t.target.value);D({...R,memberShares:{...R.memberShares,[e.id]:n}})},className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,Rm.jsx)("option",{value:1,children:"1x"}),(0,Rm.jsx)("option",{value:2,children:"2x"}),(0,Rm.jsx)("option",{value:3,children:"3x"}),(0,Rm.jsx)("option",{value:4,children:"4x"}),(0,Rm.jsx)("option",{value:5,children:"5x"}),(0,Rm.jsx)("option",{value:6,children:"6x"})]})]})]},e.id))})]})]}),(0,Rm.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Rm.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700",children:"Actualizar"}),(0,Rm.jsx)("button",{type:"button",onClick:L,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]}):(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Descripci\xf3n"}),(0,Rm.jsx)("p",{className:"text-lg text-gray-900",children:A.description})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Monto Total"}),(0,Rm.jsxs)("p",{className:"text-2xl font-semibold text-green-600",children:["$",A.amount.toFixed(2)]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Pagado por"}),(0,Rm.jsx)("p",{className:"text-gray-900",children:(null===(e=c.find(e=>e.id===A.paidBy))||void 0===e?void 0:e.displayName)||"Usuario"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Dividido entre"}),(0,Rm.jsx)("div",{className:"space-y-2",children:A.splitBetween.map(e=>{var t;const n=c.find(t=>t.id===e),r=(null===(t=A.memberShares)||void 0===t?void 0:t[e])||1,i=A.amount/A.totalShares*r;return(0,Rm.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded",children:[(0,Rm.jsxs)("span",{className:"text-sm text-gray-900",children:[(null===n||void 0===n?void 0:n.displayName)||"Usuario",r>1&&(0,Rm.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",r,"x)"]})]}),(0,Rm.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",i.toFixed(2)]})]},e)})})]}),(0,Rm.jsxs)("div",{className:"border-t pt-4",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Creado por"}),(0,Rm.jsx)("span",{className:"text-sm text-gray-900",children:(null===(t=c.find(e=>e.id===A.createdBy))||void 0===t?void 0:t.displayName)||"Usuario"})]}),A.createdAt&&(0,Rm.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,Rm.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Fecha"}),(0,Rm.jsx)("span",{className:"text-sm text-gray-900",children:A.createdAt.toDate().toLocaleDateString()})]})]}),(0,Rm.jsxs)("div",{className:"flex space-x-3 mt-6",children:[A.createdBy===r.uid&&(0,Rm.jsx)("button",{onClick:()=>{D({description:A.description,amount:A.amount.toString(),paidBy:A.paidBy,splitBetween:[...A.splitBetween],memberShares:{...A.memberShares}})},className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700",children:"Editar"}),(0,Rm.jsx)("button",{onClick:L,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cerrar"})]})]})]})}),w&&_&&(0,Rm.jsx)(ig,{member:_,accounts:k[_.id]||[],onSave:async function(e){if(_)try{await xm(vp(Pm,"users",_.id),{accounts:e}),S(t=>({...t,[_.id]:e})),x(!1),E(null),Et.success("Cuentas actualizadas correctamente")}catch(t){Et.error("Error al actualizar las cuentas")}},onClose:()=>{x(!1),E(null)},isOwner:_.id===r.uid})]})]}):(0,Rm.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Rm.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando sala..."})]})})}function ig(e){let{member:t,accounts:n,onSave:r,onClose:s,isOwner:a}=e;const[o,l]=(0,i.useState)(n||[]),u=(e,t,n)=>{const r=o.map((r,i)=>i===e?{...r,[t]:n}:r);l(r)};return(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-96 overflow-y-auto",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:a?"Mis Cuentas":`Cuentas de ${t.displayName||"Usuario"}`}),a?(0,Rm.jsxs)("div",{className:"space-y-4",children:[o.map((e,t)=>(0,Rm.jsx)("div",{className:"border rounded-lg p-3",children:(0,Rm.jsxs)("div",{className:"space-y-2",children:[(0,Rm.jsxs)("select",{value:e.type,onChange:e=>u(t,"type",e.target.value),className:"w-full p-2 border border-gray-300 rounded text-sm",children:[(0,Rm.jsx)("option",{value:"",children:"Seleccionar tipo"}),(0,Rm.jsx)("option",{value:"Banco",children:"Banco"}),(0,Rm.jsx)("option",{value:"PayPal",children:"PayPal"}),(0,Rm.jsx)("option",{value:"Venmo",children:"Venmo"}),(0,Rm.jsx)("option",{value:"Zelle",children:"Zelle"}),(0,Rm.jsx)("option",{value:"CashApp",children:"CashApp"}),(0,Rm.jsx)("option",{value:"Bizum",children:"Bizum"}),(0,Rm.jsx)("option",{value:"Otro",children:"Otro"})]}),(0,Rm.jsx)("input",{type:"text",value:e.info,onChange:e=>u(t,"info",e.target.value),placeholder:"N\xfamero de cuenta, email, etc.",className:"w-full p-2 border border-gray-300 rounded text-sm"}),(0,Rm.jsx)("button",{onClick:()=>(e=>{l(o.filter((t,n)=>n!==e))})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"Eliminar"})]})},t)),(0,Rm.jsx)("button",{onClick:()=>{l([...o,{type:"",info:""}])},className:"w-full p-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-600",children:"+ Agregar cuenta"}),(0,Rm.jsxs)("div",{className:"flex space-x-2 mt-6",children:[(0,Rm.jsx)("button",{onClick:()=>{const e=o.filter(e=>e.type.trim()&&e.info.trim());r(e)},className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700",children:"Guardar"}),(0,Rm.jsx)("button",{onClick:s,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]}):(0,Rm.jsxs)("div",{className:"space-y-4",children:[n.length>0?n.map((e,t)=>(0,Rm.jsx)("div",{className:"border rounded-lg p-3 bg-gray-50",children:(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsxs)("span",{className:"text-sm",children:[(0,Rm.jsxs)("strong",{children:[e.type,":"]})," ",e.info]}),(0,Rm.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e.info),Et.success("Informaci\xf3n copiada")},className:"text-blue-600 hover:text-blue-800",children:(0,Rm.jsx)(Jm,{className:"h-4 w-4"})})]})},t)):(0,Rm.jsx)("p",{className:"text-gray-600 text-center py-4",children:"Este usuario no ha agregado cuentas a\xfan"}),(0,Rm.jsx)("button",{onClick:s,className:"w-full bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cerrar"})]})]})})}const sg=Um("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ag=Um("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function og(){var e,t;const{code:n}=re(),{currentUser:r}=Om(),s=ne(),[a,o]=(0,i.useState)(null),[l,u]=(0,i.useState)(!0),[c,h]=(0,i.useState)(!1);function d(){s("/dashboard")}return(0,i.useEffect)(()=>{n&&r&&async function(){try{const e=sm(yp(Pm,"rooms"),om("code","==",n.toUpperCase())),t=await wm(e);if(t.empty)return Et.error("C\xf3digo de sala inv\xe1lido"),void s("/dashboard");const i=t.docs[0],a={id:i.id,...i.data()};if(a.members&&a.members.includes(r.uid))return Et.info("Ya eres miembro de esta sala"),void s(`/room/${a.id}`);o(a)}catch(e){Et.error("Error al buscar la sala"),s("/dashboard")}finally{u(!1)}}()},[n,r,s]),l?(0,Rm.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Rm.jsx)("p",{className:"mt-4 text-gray-600",children:"Verificando c\xf3digo..."})]})}):a?(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rm.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Rm.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Rm.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,Rm.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rm.jsxs)("button",{onClick:d,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,Rm.jsx)(tg,{className:"h-5 w-5"}),(0,Rm.jsx)("span",{children:"Volver"})]}),(0,Rm.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Unirse a Sala"})]})})})}),(0,Rm.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,Rm.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-8 text-white",children:(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)(Km,{className:"h-16 w-16 mx-auto mb-4"}),(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-2",children:a.name}),(0,Rm.jsxs)("p",{className:"text-blue-100",children:["C\xf3digo: ",a.code]})]})}),(0,Rm.jsx)("div",{className:"p-6",children:(0,Rm.jsxs)("div",{className:"space-y-6",children:[(0,Rm.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalles de la Sala"}),(0,Rm.jsxs)("div",{className:"space-y-3",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Nombre:"}),(0,Rm.jsx)("span",{className:"font-medium text-gray-900",children:a.name})]}),(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"C\xf3digo:"}),(0,Rm.jsx)("span",{className:"font-mono font-medium text-gray-900",children:a.code})]}),(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Miembros actuales:"}),(0,Rm.jsx)("span",{className:"font-medium text-gray-900",children:(null===(e=a.members)||void 0===e?void 0:e.length)||0})]}),(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Creada:"}),(0,Rm.jsx)("span",{className:"font-medium text-gray-900",children:null!==(t=a.createdAt)&&void 0!==t&&t.toDate?a.createdAt.toDate().toLocaleDateString():"Reciente"})]})]})]}),(0,Rm.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"\xbfQu\xe9 puedes hacer en esta sala?"}),(0,Rm.jsxs)("div",{className:"space-y-3",children:[(0,Rm.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Rm.jsx)(Xm,{className:"h-5 w-5 text-green-600"}),(0,Rm.jsx)("span",{className:"text-blue-800",children:"Agregar y gestionar gastos"})]}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Rm.jsx)(Xm,{className:"h-5 w-5 text-green-600"}),(0,Rm.jsx)("span",{className:"text-blue-800",children:"Ver balance de deudas en tiempo real"})]}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Rm.jsx)(Xm,{className:"h-5 w-5 text-green-600"}),(0,Rm.jsx)("span",{className:"text-blue-800",children:"Compartir gastos equitativamente"})]}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Rm.jsx)(Xm,{className:"h-5 w-5 text-green-600"}),(0,Rm.jsx)("span",{className:"text-blue-800",children:"Sincronizaci\xf3n autom\xe1tica con todos los miembros"})]})]})]}),(0,Rm.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,Rm.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Rm.jsx)(ng,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-yellow-800",children:"Informaci\xf3n importante"}),(0,Rm.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"Al unirte a esta sala, tendr\xe1s acceso a todos los gastos y podr\xe1s agregar nuevos. Aseg\xfarate de que el c\xf3digo sea correcto antes de continuar."})]})]})}),(0,Rm.jsxs)("div",{className:"flex space-x-4",children:[(0,Rm.jsx)("button",{onClick:async function(){if(a&&r)try{h(!0),await xm(vp(Pm,"rooms",a.id),{members:Cm(r.uid)}),await function(e,t,n){e=cp(e,mp);const r=cp(e.firestore,xp),i=fm(e.converter,t,n);return Sm(r,[Lp(jp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,oc.none())])}(vp(Pm,"users",r.uid),{displayName:r.displayName||"Usuario",email:r.email,uid:r.uid,joinedAt:new Date},{merge:!0}),Et.success("\xa1Te has unido a la sala exitosamente!"),s(`/room/${a.id}`)}catch(e){Et.error("Error al unirse a la sala")}finally{h(!1)}},disabled:c,className:"flex-1 flex items-center justify-center space-x-2 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,Rm.jsx)("span",{children:"Uni\xe9ndose..."})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(sg,{className:"h-5 w-5"}),(0,Rm.jsx)("span",{children:"Unirse a la Sala"})]})}),(0,Rm.jsxs)("button",{onClick:d,className:"flex-1 flex items-center justify-center space-x-2 bg-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:[(0,Rm.jsx)(ag,{className:"h-5 w-5"}),(0,Rm.jsx)("span",{children:"Cancelar"})]})]})]})})]})})]}):null}const lg=function(){return(0,Rm.jsx)(Ee,{children:(0,Rm.jsx)(jm,{children:(0,Rm.jsxs)("div",{className:"App",children:[(0,Rm.jsxs)(we,{children:[(0,Rm.jsx)(ve,{path:"/",element:(0,Rm.jsx)(qm,{})}),(0,Rm.jsx)(ve,{path:"/dashboard",element:(0,Rm.jsx)(Lm,{children:(0,Rm.jsx)(eg,{})})}),(0,Rm.jsx)(ve,{path:"/room/:roomId",element:(0,Rm.jsx)(Lm,{children:(0,Rm.jsx)(rg,{})})}),(0,Rm.jsx)(ve,{path:"/join/:code",element:(0,Rm.jsx)(Lm,{children:(0,Rm.jsx)(og,{})})}),(0,Rm.jsx)(ve,{path:"*",element:(0,Rm.jsx)(ye,{to:"/"})})]}),(0,Rm.jsx)(_t,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:4e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})})})};a.createRoot(document.getElementById("root")).render((0,Rm.jsx)(i.StrictMode,{children:(0,Rm.jsx)(lg,{})}))})();
//# sourceMappingURL=main.bd66b74b.js.map