/*! For license information please see main.952a3409.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,k={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,s)&&!_.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+j(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),T(a,t,s,"",function(e){return e})):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+j(o=e[c],c);l+=T(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,s,u=i+j(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!_.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,D(N);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function N(e,n){m=!1,g&&(g=!1,v(S),S=-1),p=!0;var i=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),x(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,_=!1,E=null,S=-1,C=5,j=-1;function T(){return!(t.unstable_now()-j<C)}function I(){if(null!==E){var e=t.unstable_now();j=e;var n=!0;try{n=E(!0,e)}finally{n?k():(_=!1,E=null)}}else _=!1}if("function"===typeof b)k=function(){b(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=I,k=function(){P.postMessage(null)}}else k=function(){y(I,0)};function D(e){E=e,_||(_=!0,k())}function R(e,n){S=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(S),S=-1):g=!0,R(w,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,D(N))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(Pe){var t=Pe.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(je){var r=je}Reflect.construct(e,[],t)}else{try{t.call()}catch(je){r=je}e.call(t.prototype)}else{try{throw Error()}catch(je){r=je}e()}}catch(je){if(je&&r&&"string"===typeof je.stack){for(var s=je.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case N:return"Portal";case E:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case j:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(Pe){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(he).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,ke=null;function _e(e){if(e=js(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=Is(t),we(e.stateNode,e.type,t))}}function Ee(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function Ie(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ae(e,t){return e(t)}function De(){}var Re=!1;function Oe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ae(e,t,n)}finally{Re=!1,(null!==Ne||null!==ke)&&(De(),Ie())}}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=Is(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Be=!1;if(u)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(Te){Be=!1}function $e(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var qe=!1,He=null,We=!1,Ke=null,Ge={onError:function(e){qe=!0,He=e}};function Qe(e,t,n,r,s,i,a,o,l){qe=!1,He=null,$e.apply(Ge,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(i(188))}function Ze(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Je(s),e;if(a===r)return Je(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?et(e):null}function et(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=et(e);if(null!==t)return t;e=e.sibling}return null}var tt=s.unstable_scheduleCallback,nt=s.unstable_cancelCallback,rt=s.unstable_shouldYield,it=s.unstable_requestPaint,at=s.unstable_now,ot=s.unstable_getCurrentPriorityLevel,lt=s.unstable_ImmediatePriority,ct=s.unstable_UserBlockingPriority,ut=s.unstable_NormalPriority,dt=s.unstable_LowPriority,ht=s.unstable_IdlePriority,ft=null,pt=null;var mt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(gt(e)/yt|0)|0},gt=Math.log,yt=Math.LN2;var vt=64,bt=4194304;function xt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=xt(o):0!==(i&=a)&&(r=xt(i))}else 0!==(a=n&~s)?r=xt(a):0!==i&&(r=xt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-mt(t)),r|=e[n],t&=~s;return r}function Nt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function kt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function _t(){var e=vt;return 0===(4194240&(vt<<=1))&&(vt=64),e}function Et(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function St(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-mt(t)]=n}function Ct(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-mt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var jt=0;function Tt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var It,At,Pt,Dt,Rt,Ot=!1,Lt=[],Mt=null,Ft=null,Ut=null,Bt=new Map,Vt=new Map,zt=[],$t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Bt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vt.delete(t.pointerId)}}function Ht(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=js(t))&&At(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Wt(e){var t=Cs(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void Rt(e.priority,function(){Pt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Kt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=sn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=js(n))&&At(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Gt(e,t,n){Kt(e)&&n.delete(t)}function Qt(){Ot=!1,null!==Mt&&Kt(Mt)&&(Mt=null),null!==Ft&&Kt(Ft)&&(Ft=null),null!==Ut&&Kt(Ut)&&(Ut=null),Bt.forEach(Gt),Vt.forEach(Gt)}function Yt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ot||(Ot=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Qt)))}function Xt(e){function t(t){return Yt(t,e)}if(0<Lt.length){Yt(Lt[0],e);for(var n=1;n<Lt.length;n++){var r=Lt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&Yt(Mt,e),null!==Ft&&Yt(Ft,e),null!==Ut&&Yt(Ut,e),Bt.forEach(t),Vt.forEach(t),n=0;n<zt.length;n++)(r=zt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<zt.length&&null===(n=zt[0]).blockedOn;)Wt(n),null===n.blockedOn&&zt.shift()}var Jt=x.ReactCurrentBatchConfig,Zt=!0;function en(e,t,n,r){var s=jt,i=Jt.transition;Jt.transition=null;try{jt=1,nn(e,t,n,r)}finally{jt=s,Jt.transition=i}}function tn(e,t,n,r){var s=jt,i=Jt.transition;Jt.transition=null;try{jt=4,nn(e,t,n,r)}finally{jt=s,Jt.transition=i}}function nn(e,t,n,r){if(Zt){var s=sn(e,t,n,r);if(null===s)Zr(e,t,r,rn,n),qt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Mt=Ht(Mt,e,t,n,r,s),!0;case"dragenter":return Ft=Ht(Ft,e,t,n,r,s),!0;case"mouseover":return Ut=Ht(Ut,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Bt.set(i,Ht(Bt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vt.set(i,Ht(Vt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(qt(e,r),4&t&&-1<$t.indexOf(e)){for(;null!==s;){var i=js(s);if(null!==i&&It(i),null===(i=sn(e,t,n,r))&&Zr(e,t,r,rn,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var rn=null;function sn(e,t,n,r){if(rn=null,null!==(e=Cs(e=xe(r))))if(null===(t=Ye(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Xe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rn=e,null}function an(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ot()){case lt:return 1;case ct:return 4;case ut:case dt:return 16;case ht:return 536870912;default:return 16}default:return 16}}var on=null,ln=null,cn=null;function un(){if(cn)return cn;var e,t,n=ln,r=n.length,s="value"in on?on.value:on.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return cn=s.slice(e,1<t?1-t:void 0)}function dn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function hn(){return!0}function fn(){return!1}function pn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?hn:fn,this.isPropagationStopped=fn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=hn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=hn)},persist:function(){},isPersistent:hn}),t}var mn,gn,yn,vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bn=pn(vn),xn=M({},vn,{view:0,detail:0}),wn=pn(xn),Nn=M({},xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yn&&(yn&&"mousemove"===e.type?(mn=e.screenX-yn.screenX,gn=e.screenY-yn.screenY):gn=mn=0,yn=e),mn)},movementY:function(e){return"movementY"in e?e.movementY:gn}}),kn=pn(Nn),_n=pn(M({},Nn,{dataTransfer:0})),En=pn(M({},xn,{relatedTarget:0})),Sn=pn(M({},vn,{animationName:0,elapsedTime:0,pseudoElement:0})),Cn=M({},vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jn=pn(Cn),Tn=pn(M({},vn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},An={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pn[e])&&!!t[e]}function Rn(){return Dn}var On=M({},xn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=dn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?An[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rn,charCode:function(e){return"keypress"===e.type?dn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?dn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ln=pn(On),Mn=pn(M({},Nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Fn=pn(M({},xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rn})),Un=pn(M({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bn=M({},Nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vn=pn(Bn),zn=[9,13,27,32],$n=u&&"CompositionEvent"in window,qn=null;u&&"documentMode"in document&&(qn=document.documentMode);var Hn=u&&"TextEvent"in window&&!qn,Wn=u&&(!$n||qn&&8<qn&&11>=qn),Kn=String.fromCharCode(32),Gn=!1;function Qn(e,t){switch(e){case"keyup":return-1!==zn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Xn=!1;var Jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Jn[e.type]:"textarea"===t}function er(e,t,n,r){Ee(r),0<(t=ts(t,"onChange")).length&&(n=new bn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var tr=null,nr=null;function rr(e){Kr(e,0)}function sr(e){if(K(Ts(e)))return e}function ir(e,t){if("change"===e)return t}var ar=!1;if(u){var or;if(u){var lr="oninput"in document;if(!lr){var cr=document.createElement("div");cr.setAttribute("oninput","return;"),lr="function"===typeof cr.oninput}or=lr}else or=!1;ar=or&&(!document.documentMode||9<document.documentMode)}function ur(){tr&&(tr.detachEvent("onpropertychange",dr),nr=tr=null)}function dr(e){if("value"===e.propertyName&&sr(nr)){var t=[];er(t,nr,e,xe(e)),Oe(rr,t)}}function hr(e,t,n){"focusin"===e?(ur(),nr=n,(tr=t).attachEvent("onpropertychange",dr)):"focusout"===e&&ur()}function fr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return sr(nr)}function pr(e,t){if("click"===e)return sr(t)}function mr(e,t){if("input"===e||"change"===e)return sr(t)}var gr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function yr(e,t){if(gr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!gr(e[s],t[s]))return!1}return!0}function vr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function br(e,t){var n,r=vr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vr(r)}}function xr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?xr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function wr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(Le){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function Nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function kr(e){var t=wr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xr(n.ownerDocument.documentElement,n)){if(null!==r&&Nr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=br(n,i);var a=br(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _r=u&&"documentMode"in document&&11>=document.documentMode,Er=null,Sr=null,Cr=null,jr=!1;function Tr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;jr||null==Er||Er!==G(r)||("selectionStart"in(r=Er)&&Nr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Cr&&yr(Cr,r)||(Cr=r,0<(r=ts(Sr,"onSelect")).length&&(t=new bn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Er)))}function Ir(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ar={animationend:Ir("Animation","AnimationEnd"),animationiteration:Ir("Animation","AnimationIteration"),animationstart:Ir("Animation","AnimationStart"),transitionend:Ir("Transition","TransitionEnd")},Pr={},Dr={};function Rr(e){if(Pr[e])return Pr[e];if(!Ar[e])return e;var t,n=Ar[e];for(t in n)if(n.hasOwnProperty(t)&&t in Dr)return Pr[e]=n[t];return e}u&&(Dr=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);var Or=Rr("animationend"),Lr=Rr("animationiteration"),Mr=Rr("animationstart"),Fr=Rr("transitionend"),Ur=new Map,Br="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(e,t){Ur.set(e,t),l(t,[e])}for(var zr=0;zr<Br.length;zr++){var $r=Br[zr];Vr($r.toLowerCase(),"on"+($r[0].toUpperCase()+$r.slice(1)))}Vr(Or,"onAnimationEnd"),Vr(Lr,"onAnimationIteration"),Vr(Mr,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(Fr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hr=new Set("cancel close invalid load scroll toggle".split(" ").concat(qr));function Wr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Qe.apply(this,arguments),qe){if(!qe)throw Error(i(198));var u=He;qe=!1,He=null,We||(We=!0,Ke=u)}}(r,t,void 0,e),e.currentTarget=null}function Kr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Wr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Wr(s,o,c),i=l}}}if(We)throw e=Ke,We=!1,Ke=null,e}function Gr(e,t){var n=t[_s];void 0===n&&(n=t[_s]=new Set);var r=e+"__bubble";n.has(r)||(Jr(t,e,2,!1),n.add(r))}function Qr(e,t,n){var r=0;t&&(r|=4),Jr(n,e,r,t)}var Yr="_reactListening"+Math.random().toString(36).slice(2);function Xr(e){if(!e[Yr]){e[Yr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Hr.has(t)||Qr(t,!1,e),Qr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Yr]||(t[Yr]=!0,Qr("selectionchange",!1,t))}}function Jr(e,t,n,r){switch(an(t)){case 1:var s=en;break;case 4:s=tn;break;default:s=nn}n=s.bind(null,t,n,e),s=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=Cs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Oe(function(){var r=i,s=xe(n),a=[];e:{var o=Ur.get(e);if(void 0!==o){var l=bn,c=e;switch(e){case"keypress":if(0===dn(n))break e;case"keydown":case"keyup":l=Ln;break;case"focusin":c="focus",l=En;break;case"focusout":c="blur",l=En;break;case"beforeblur":case"afterblur":l=En;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=_n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Fn;break;case Or:case Lr:case Mr:l=Sn;break;case Fr:l=Un;break;case"scroll":l=wn;break;case"wheel":l=Vn;break;case"copy":case"cut":case"paste":l=jn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Fe(p,h))&&u.push(es(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!Cs(c)&&!c[ks])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Cs(c):null)&&(c!==(d=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=kn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Mn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Ts(l),f=null==c?o:Ts(c),(o=new u(m,p+"leave",l,n,s)).target=d,o.relatedTarget=f,m=null,Cs(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=ns(f))p++;for(f=0,m=h;m;m=ns(m))f++;for(;0<p-f;)u=ns(u),p--;for(;0<f-p;)h=ns(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=ns(u),h=ns(h)}u=null}else u=null;null!==l&&rs(a,o,l,u,!1),null!==c&&null!==d&&rs(a,d,c,u,!0)}if("select"===(l=(o=r?Ts(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=ir;else if(Zn(o))if(ar)g=mr;else{g=fr;var y=hr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=pr);switch(g&&(g=g(e,r))?er(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?Ts(r):window,e){case"focusin":(Zn(y)||"true"===y.contentEditable)&&(Er=y,Sr=r,Cr=null);break;case"focusout":Cr=Sr=Er=null;break;case"mousedown":jr=!0;break;case"contextmenu":case"mouseup":case"dragend":jr=!1,Tr(a,n,s);break;case"selectionchange":if(_r)break;case"keydown":case"keyup":Tr(a,n,s)}var v;if($n)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Xn?Qn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Wn&&"ko"!==n.locale&&(Xn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Xn&&(v=un()):(ln="value"in(on=s)?on.value:on.textContent,Xn=!0)),0<(y=ts(r,b)).length&&(b=new Tn(b,e,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Yn(n))&&(b.data=v))),(v=Hn?function(e,t){switch(e){case"compositionend":return Yn(t);case"keypress":return 32!==t.which?null:(Gn=!0,Kn);case"textInput":return(e=t.data)===Kn&&Gn?null:e;default:return null}}(e,n):function(e,t){if(Xn)return"compositionend"===e||!$n&&Qn(e,t)?(e=un(),cn=ln=on=null,Xn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=ts(r,"onBeforeInput")).length&&(s=new Tn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Kr(a,t)})}function es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ts(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Fe(e,n))&&r.unshift(es(e,i,s)),null!=(i=Fe(e,t))&&r.push(es(e,i,s))),e=e.return}return r}function ns(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function rs(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Fe(n,i))&&a.unshift(es(n,l,o)):s||null!=(l=Fe(n,i))&&a.push(es(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ss=/\r\n?/g,is=/\u0000|\uFFFD/g;function as(e){return("string"===typeof e?e:""+e).replace(ss,"\n").replace(is,"")}function os(e,t,n){if(t=as(t),as(e)!==t&&n)throw Error(i(425))}function ls(){}var cs=null,us=null;function ds(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var hs="function"===typeof setTimeout?setTimeout:void 0,fs="function"===typeof clearTimeout?clearTimeout:void 0,ps="function"===typeof Promise?Promise:void 0,ms="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ps?function(e){return ps.resolve(null).then(e).catch(gs)}:hs;function gs(e){setTimeout(function(){throw e})}function ys(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Xt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Xt(t)}function vs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function bs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var xs=Math.random().toString(36).slice(2),ws="__reactFiber$"+xs,Ns="__reactProps$"+xs,ks="__reactContainer$"+xs,_s="__reactEvents$"+xs,Es="__reactListeners$"+xs,Ss="__reactHandles$"+xs;function Cs(e){var t=e[ws];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ks]||n[ws]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bs(e);null!==e;){if(n=e[ws])return n;e=bs(e)}return t}n=(e=n).parentNode}return null}function js(e){return!(e=e[ws]||e[ks])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ts(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Is(e){return e[Ns]||null}var As=[],Ps=-1;function Ds(e){return{current:e}}function Rs(e){0>Ps||(e.current=As[Ps],As[Ps]=null,Ps--)}function Os(e,t){Ps++,As[Ps]=e.current,e.current=t}var Ls={},Ms=Ds(Ls),Fs=Ds(!1),Us=Ls;function Bs(e,t){var n=e.type.contextTypes;if(!n)return Ls;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Vs(e){return null!==(e=e.childContextTypes)&&void 0!==e}function zs(){Rs(Fs),Rs(Ms)}function $s(e,t,n){if(Ms.current!==Ls)throw Error(i(168));Os(Ms,t),Os(Fs,n)}function qs(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,$(e)||"Unknown",s));return M({},n,r)}function Hs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ls,Us=Ms.current,Os(Ms,e),Os(Fs,Fs.current),!0}function Ws(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=qs(e,t,Us),r.__reactInternalMemoizedMergedChildContext=e,Rs(Fs),Rs(Ms),Os(Ms,e)):Rs(Fs),Os(Fs,n)}var Ks=null,Gs=!1,Qs=!1;function Ys(e){null===Ks?Ks=[e]:Ks.push(e)}function Xs(){if(!Qs&&null!==Ks){Qs=!0;var e=0,t=jt;try{var n=Ks;for(jt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ks=null,Gs=!1}catch(Se){throw null!==Ks&&(Ks=Ks.slice(e+1)),tt(lt,Xs),Se}finally{jt=t,Qs=!1}}return null}var Js=[],Zs=0,ei=null,ti=0,ni=[],ri=0,si=null,ii=1,ai="";function oi(e,t){Js[Zs++]=ti,Js[Zs++]=ei,ei=e,ti=t}function li(e,t,n){ni[ri++]=ii,ni[ri++]=ai,ni[ri++]=si,si=e;var r=ii;e=ai;var s=32-mt(r)-1;r&=~(1<<s),n+=1;var i=32-mt(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ii=1<<32-mt(t)+s|n<<s|r,ai=i+e}else ii=1<<i|n<<s|r,ai=e}function ci(e){null!==e.return&&(oi(e,1),li(e,1,0))}function ui(e){for(;e===ei;)ei=Js[--Zs],Js[Zs]=null,ti=Js[--Zs],Js[Zs]=null;for(;e===si;)si=ni[--ri],ni[ri]=null,ai=ni[--ri],ni[ri]=null,ii=ni[--ri],ni[ri]=null}var di=null,hi=null,fi=!1,pi=null;function mi(e,t){var n=Bc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function gi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,di=e,hi=vs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,di=e,hi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==si?{id:ii,overflow:ai}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Bc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,di=e,hi=null,!0);default:return!1}}function yi(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function vi(e){if(fi){var t=hi;if(t){var n=t;if(!gi(e,t)){if(yi(e))throw Error(i(418));t=vs(n.nextSibling);var r=di;t&&gi(e,t)?mi(r,n):(e.flags=-4097&e.flags|2,fi=!1,di=e)}}else{if(yi(e))throw Error(i(418));e.flags=-4097&e.flags|2,fi=!1,di=e}}}function bi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;di=e}function xi(e){if(e!==di)return!1;if(!fi)return bi(e),fi=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ds(e.type,e.memoizedProps)),t&&(t=hi)){if(yi(e))throw wi(),Error(i(418));for(;t;)mi(e,t),t=vs(t.nextSibling)}if(bi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){hi=vs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}hi=null}}else hi=di?vs(e.stateNode.nextSibling):null;return!0}function wi(){for(var e=hi;e;)e=vs(e.nextSibling)}function Ni(){hi=di=null,fi=!1}function ki(e){null===pi?pi=[e]:pi.push(e)}var _i=x.ReactCurrentBatchConfig;function Ei(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Si(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ci(e){return(0,e._init)(e._payload)}function ji(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=zc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===P&&Ci(i)===t.type)?((r=s(t,n.props)).ref=Ei(e,t,n),r.return=e,r):((r=$c(n.type,n.key,n.props,null,e.mode,r)).ref=Ei(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=qc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Wc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=$c(t.type,t.key,t.props,null,e.mode,n)).ref=Ei(e,null,t),n.return=e,n;case N:return(t=Kc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=qc(t,e.mode,n,null)).return=e,t;Si(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case P:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:d(e,t,n,r,null);Si(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case P:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,s,null);Si(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(s,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(s,d),fi&&oi(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return fi&&oi(s,m),c}for(d=r(s,d);m<o.length;m++)null!==(g=p(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),fi&&oi(s,m),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(s,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(s,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(s,m),fi&&oi(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return fi&&oi(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),fi&&oi(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Ci(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=Ei(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((i=qc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=$c(a.type,a.key,a.props,null,r.mode,l)).ref=Ei(r,i,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Kc(a,r.mode,l)).return=r,r=i}return o(r);case P:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(O(a))return g(r,i,a,l);Si(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Wc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var Ti=ji(!0),Ii=ji(!1),Ai=Ds(null),Pi=null,Di=null,Ri=null;function Oi(){Ri=Di=Pi=null}function Li(e){var t=Ai.current;Rs(Ai),e._currentValue=t}function Mi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fi(e,t){Pi=e,Ri=Di=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(jo=!0),e.firstContext=null)}function Ui(e){var t=e._currentValue;if(Ri!==e)if(e={context:e,memoizedValue:t,next:null},null===Di){if(null===Pi)throw Error(i(308));Di=e,Pi.dependencies={lanes:0,firstContext:e}}else Di=Di.next=e;return t}var Bi=null;function Vi(e){null===Bi?Bi=[e]:Bi.push(e)}function zi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Vi(t)):(n.next=s.next,s.next=n),t.interleaved=n,$i(e,r)}function $i(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var qi=!1;function Hi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ki(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ml)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,$i(e,n)}return null===(s=r.interleaved)?(t.next=t,Vi(r)):(t.next=s.next,s.next=t),r.interleaved=t,$i(e,n)}function Qi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ct(e,n)}}function Yi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xi(e,t,n,r){var s=e.updateQueue;qi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:qi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Hl|=a,e.lanes=a,e.memoizedState=d}}function Ji(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Zi={},ea=Ds(Zi),ta=Ds(Zi),na=Ds(Zi);function ra(e){if(e===Zi)throw Error(i(174));return e}function sa(e,t){switch(Os(na,t),Os(ta,e),Os(ea,Zi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Rs(ea),Os(ea,t)}function ia(){Rs(ea),Rs(ta),Rs(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=le(t,e.type);t!==n&&(Os(ta,e),Os(ea,n))}function oa(e){ta.current===e&&(Rs(ea),Rs(ta))}var la=Ds(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function da(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var ha=x.ReactCurrentDispatcher,fa=x.ReactCurrentBatchConfig,pa=0,ma=null,ga=null,ya=null,va=!1,ba=!1,xa=0,wa=0;function Na(){throw Error(i(321))}function ka(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gr(e[n],t[n]))return!1;return!0}function _a(e,t,n,r,s,a){if(pa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?oo:lo,e=n(r,s),ba){a=0;do{if(ba=!1,xa=0,25<=a)throw Error(i(301));a+=1,ya=ga=null,t.updateQueue=null,ha.current=co,e=n(r,s)}while(ba)}if(ha.current=ao,t=null!==ga&&null!==ga.next,pa=0,ya=ga=ma=null,va=!1,t)throw Error(i(300));return e}function Ea(){var e=0!==xa;return xa=0,e}function Sa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ma.memoizedState=ya=e:ya=ya.next=e,ya}function Ca(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ya?ma.memoizedState:ya.next;if(null!==t)ya=t,ga=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?ma.memoizedState=ya=e:ya=ya.next=e}return ya}function ja(e,t){return"function"===typeof t?t(e):t}function Ta(e){var t=Ca(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ga,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((pa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ma.lanes|=d,Hl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,gr(r,t.memoizedState)||(jo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,ma.lanes|=a,Hl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ia(e){var t=Ca(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);gr(a,t.memoizedState)||(jo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Aa(){}function Pa(e,t){var n=ma,r=Ca(),s=t(),a=!gr(r.memoizedState,s);if(a&&(r.memoizedState=s,jo=!0),r=r.queue,qa(Oa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Ua(9,Ra.bind(null,n,r,s,t),void 0,null),null===Fl)throw Error(i(349));0!==(30&pa)||Da(n,t,s)}return s}function Da(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ra(e,t,n,r){t.value=n,t.getSnapshot=r,La(t)&&Ma(e)}function Oa(e,t,n){return n(function(){La(t)&&Ma(e)})}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gr(e,n)}catch(Le){return!0}}function Ma(e){var t=$i(e,1);null!==t&&dc(t,e,1,-1)}function Fa(e){var t=Sa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:e},t.queue=e,e=e.dispatch=no.bind(null,ma,e),[t.memoizedState,e]}function Ua(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ba(){return Ca().memoizedState}function Va(e,t,n,r){var s=Sa();ma.flags|=e,s.memoizedState=Ua(1|t,n,void 0,void 0===r?null:r)}function za(e,t,n,r){var s=Ca();r=void 0===r?null:r;var i=void 0;if(null!==ga){var a=ga.memoizedState;if(i=a.destroy,null!==r&&ka(r,a.deps))return void(s.memoizedState=Ua(t,n,i,r))}ma.flags|=e,s.memoizedState=Ua(1|t,n,i,r)}function $a(e,t){return Va(8390656,8,e,t)}function qa(e,t){return za(2048,8,e,t)}function Ha(e,t){return za(4,2,e,t)}function Wa(e,t){return za(4,4,e,t)}function Ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ga(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,za(4,4,Ka.bind(null,t,e),n)}function Qa(){}function Ya(e,t){var n=Ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=Ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ja(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,jo=!0),e.memoizedState=n):(gr(n,t)||(n=_t(),ma.lanes|=n,Hl|=n,e.baseState=!0),t)}function Za(e,t){var n=jt;jt=0!==n&&4>n?n:4,e(!0);var r=fa.transition;fa.transition={};try{e(!1),t()}finally{jt=n,fa.transition=r}}function eo(){return Ca().memoizedState}function to(e,t,n){var r=uc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ro(e))so(t,n);else if(null!==(n=zi(e,t,n,r))){dc(n,e,r,cc()),io(n,t,r)}}function no(e,t,n){var r=uc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ro(e))so(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,gr(o,a)){var l=t.interleaved;return null===l?(s.next=s,Vi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(je){}null!==(n=zi(e,t,s,r))&&(dc(n,e,r,s=cc()),io(n,t,r))}}function ro(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function so(e,t){ba=va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function io(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ct(e,n)}}var ao={readContext:Ui,useCallback:Na,useContext:Na,useEffect:Na,useImperativeHandle:Na,useInsertionEffect:Na,useLayoutEffect:Na,useMemo:Na,useReducer:Na,useRef:Na,useState:Na,useDebugValue:Na,useDeferredValue:Na,useTransition:Na,useMutableSource:Na,useSyncExternalStore:Na,useId:Na,unstable_isNewReconciler:!1},oo={readContext:Ui,useCallback:function(e,t){return Sa().memoizedState=[e,void 0===t?null:t],e},useContext:Ui,useEffect:$a,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Va(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Va(4194308,4,e,t)},useInsertionEffect:function(e,t){return Va(4,2,e,t)},useMemo:function(e,t){var n=Sa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Sa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=to.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Sa().memoizedState=e},useState:Fa,useDebugValue:Qa,useDeferredValue:function(e){return Sa().memoizedState=e},useTransition:function(){var e=Fa(!1),t=e[0];return e=Za.bind(null,e[1]),Sa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,s=Sa();if(fi){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Fl)throw Error(i(349));0!==(30&pa)||Da(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,$a(Oa.bind(null,r,a,e),[e]),r.flags|=2048,Ua(9,Ra.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Sa(),t=Fl.identifierPrefix;if(fi){var n=ai;t=":"+t+"R"+(n=(ii&~(1<<32-mt(ii)-1)).toString(32)+n),0<(n=xa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lo={readContext:Ui,useCallback:Ya,useContext:Ui,useEffect:qa,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Xa,useReducer:Ta,useRef:Ba,useState:function(){return Ta(ja)},useDebugValue:Qa,useDeferredValue:function(e){return Ja(Ca(),ga.memoizedState,e)},useTransition:function(){return[Ta(ja)[0],Ca().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Pa,useId:eo,unstable_isNewReconciler:!1},co={readContext:Ui,useCallback:Ya,useContext:Ui,useEffect:qa,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Xa,useReducer:Ia,useRef:Ba,useState:function(){return Ia(ja)},useDebugValue:Qa,useDeferredValue:function(e){var t=Ca();return null===ga?t.memoizedState=e:Ja(t,ga.memoizedState,e)},useTransition:function(){return[Ia(ja)[0],Ca().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Pa,useId:eo,unstable_isNewReconciler:!1};function uo(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cc(),s=uc(e),i=Ki(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Gi(e,i,s))&&(dc(t,e,s,r),Qi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cc(),s=uc(e),i=Ki(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Gi(e,i,s))&&(dc(t,e,s,r),Qi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cc(),r=uc(e),s=Ki(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Gi(e,s,r))&&(dc(t,e,r,n),Qi(t,e,r))}};function po(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!yr(n,r)||!yr(s,i))}function mo(e,t,n){var r=!1,s=Ls,i=t.contextType;return"object"===typeof i&&null!==i?i=Ui(i):(s=Vs(t)?Us:Ms.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Bs(e,s):Ls),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function yo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Hi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ui(i):(i=Vs(t)?Us:Ms.current,s.context=Bs(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ho(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&fo.enqueueReplaceState(s,s.state,null),Xi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function vo(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var s=n}catch(Me){s="\nError generating stack: "+Me.message+"\n"+Me.stack}return{value:e,source:t,stack:s,digest:null}}function bo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function xo(e,t){try{console.error(t.value)}catch(Pe){setTimeout(function(){throw Pe})}}var wo="function"===typeof WeakMap?WeakMap:Map;function No(e,t,n){(n=Ki(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zl||(Zl=!0,ec=r),xo(0,t)},n}function ko(e,t,n){(n=Ki(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){xo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){xo(0,t),"function"!==typeof r&&(null===tc?tc=new Set([this]):tc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function _o(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new wo;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Rc.bind(null,e,t,n),t.then(e,e))}function Eo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function So(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ki(-1,1)).tag=2,Gi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var Co=x.ReactCurrentOwner,jo=!1;function To(e,t,n,r){t.child=null===e?Ii(t,null,n,r):Ti(t,e.child,n,r)}function Io(e,t,n,r,s){n=n.render;var i=t.ref;return Fi(t,s),r=_a(e,t,n,r,i,s),n=Ea(),null===e||jo?(fi&&n&&ci(t),t.flags|=1,To(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zo(e,t,s))}function Ao(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Vc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=$c(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Po(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:yr)(a,r)&&e.ref===t.ref)return Zo(e,t,s)}return t.flags|=1,(e=zc(i,r)).ref=t.ref,e.return=t,t.child=e}function Po(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(yr(i,r)&&e.ref===t.ref){if(jo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Zo(e,t,s);0!==(131072&e.flags)&&(jo=!0)}}return Oo(e,t,n,r,s)}function Do(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Os(zl,Vl),Vl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Os(zl,Vl),Vl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Os(zl,Vl),Vl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Os(zl,Vl),Vl|=r;return To(e,t,s,n),t.child}function Ro(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Oo(e,t,n,r,s){var i=Vs(n)?Us:Ms.current;return i=Bs(t,i),Fi(t,s),n=_a(e,t,n,r,i,s),r=Ea(),null===e||jo?(fi&&r&&ci(t),t.flags|=1,To(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Zo(e,t,s))}function Lo(e,t,n,r,s){if(Vs(n)){var i=!0;Hs(t)}else i=!1;if(Fi(t,s),null===t.stateNode)Jo(e,t),mo(t,n,r),yo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ui(c):c=Bs(t,c=Vs(n)?Us:Ms.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&go(t,a,r,c),qi=!1;var h=t.memoizedState;a.state=h,Xi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Fs.current||qi?("function"===typeof u&&(ho(t,n,u,r),l=t.memoizedState),(o=qi||po(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Wi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:uo(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ui(l):l=Bs(t,l=Vs(n)?Us:Ms.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&go(t,a,r,l),qi=!1,h=t.memoizedState,a.state=h,Xi(t,r,a,s);var p=t.memoizedState;o!==d||h!==p||Fs.current||qi?("function"===typeof f&&(ho(t,n,f,r),p=t.memoizedState),(c=qi||po(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Mo(e,t,n,r,i,s)}function Mo(e,t,n,r,s,i){Ro(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ws(t,n,!1),Zo(e,t,i);r=t.stateNode,Co.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ti(t,e.child,null,i),t.child=Ti(t,null,o,i)):To(e,t,o,i),t.memoizedState=r.state,s&&Ws(t,n,!0),t.child}function Fo(e){var t=e.stateNode;t.pendingContext?$s(0,t.pendingContext,t.pendingContext!==t.context):t.context&&$s(0,t.context,!1),sa(e,t.containerInfo)}function Uo(e,t,n,r,s){return Ni(),ki(s),t.flags|=256,To(e,t,n,r),t.child}var Bo,Vo,zo,$o,qo={dehydrated:null,treeContext:null,retryLane:0};function Ho(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wo(e,t,n){var r,s=t.pendingProps,a=la.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Os(la,1&a),null===e)return vi(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Hc(l,s,0,null),e=qc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ho(n),t.memoizedState=qo,e):Ko(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Go(e,t,o,r=bo(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Hc({mode:"visible",children:r.children},s,0,null),(a=qc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ti(t,e.child,null,o),t.child.memoizedState=Ho(o),t.memoizedState=qo,a);if(0===(1&t.mode))return Go(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Go(e,t,o,r=bo(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),jo||l){if(null!==(r=Fl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,$i(e,s),dc(r,e,s,-1))}return _c(),Go(e,t,o,r=bo(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Lc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,hi=vs(s.nextSibling),di=t,fi=!0,pi=null,null!==e&&(ni[ri++]=ii,ni[ri++]=ai,ni[ri++]=si,ii=e.id,ai=e.overflow,si=t),t=Ko(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=zc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=zc(r,o):(o=qc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Ho(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=qo,s}return e=(o=e.child).sibling,s=zc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Ko(e,t){return(t=Hc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Go(e,t,n,r){return null!==r&&ki(r),Ti(t,e.child,null,n),(e=Ko(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Qo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Mi(e.return,t,n)}function Yo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Xo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(To(e,t,r.children,n),0!==(2&(r=la.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qo(e,n,t);else if(19===e.tag)Qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Os(la,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Yo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ca(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Yo(t,!0,n,null,i);break;case"together":Yo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Hl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=zc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function el(e,t){if(!fi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nl(e,t,n){var r=t.pendingProps;switch(ui(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tl(t),null;case 1:case 17:return Vs(t.type)&&zs(),tl(t),null;case 3:return r=t.stateNode,ia(),Rs(Fs),Rs(Ms),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(xi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==pi&&(mc(pi),pi=null))),Vo(e,t),tl(t),null;case 5:oa(t);var s=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)zo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return tl(t),null}if(e=ra(ea.current),xi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ws]=t,r[Ns]=a,e=0!==(1&t.mode),n){case"dialog":Gr("cancel",r),Gr("close",r);break;case"iframe":case"object":case"embed":Gr("load",r);break;case"video":case"audio":for(s=0;s<qr.length;s++)Gr(qr[s],r);break;case"source":Gr("error",r);break;case"img":case"image":case"link":Gr("error",r),Gr("load",r);break;case"details":Gr("toggle",r);break;case"input":Y(r,a),Gr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Gr("invalid",r);break;case"textarea":se(r,a),Gr("invalid",r)}for(var l in ye(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&os(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&os(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Gr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=ls)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ws]=t,e[Ns]=r,Bo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Gr("cancel",e),Gr("close",e),s=r;break;case"iframe":case"object":case"embed":Gr("load",e),s=r;break;case"video":case"audio":for(s=0;s<qr.length;s++)Gr(qr[s],e);s=r;break;case"source":Gr("error",e),s=r;break;case"img":case"image":case"link":Gr("error",e),Gr("load",e),s=r;break;case"details":Gr("toggle",e),s=r;break;case"input":Y(e,r),s=Q(e,r),Gr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Gr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Gr("invalid",e)}for(a in ye(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Gr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=ls)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return tl(t),null;case 6:if(e&&null!=t.stateNode)$o(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=ra(na.current),ra(ea.current),xi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ws]=t,(a=r.nodeValue!==n)&&null!==(e=di))switch(e.tag){case 3:os(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&os(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ws]=t,t.stateNode=r}return tl(t),null;case 13:if(Rs(la),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(fi&&null!==hi&&0!==(1&t.mode)&&0===(128&t.flags))wi(),Ni(),t.flags|=98560,a=!1;else if(a=xi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ws]=t}else Ni(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;tl(t),a=!1}else null!==pi&&(mc(pi),pi=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===$l&&($l=3):_c())),null!==t.updateQueue&&(t.flags|=4),tl(t),null);case 4:return ia(),Vo(e,t),null===e&&Xr(t.stateNode.containerInfo),tl(t),null;case 10:return Li(t.type._context),tl(t),null;case 19:if(Rs(la),null===(a=t.memoizedState))return tl(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)el(a,!1);else{if(0!==$l||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ca(e))){for(t.flags|=128,el(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Os(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&at()>Xl&&(t.flags|=128,r=!0,el(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),el(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!fi)return tl(t),null}else 2*at()-a.renderingStartTime>Xl&&1073741824!==n&&(t.flags|=128,r=!0,el(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=at(),t.sibling=null,n=la.current,Os(la,r?1&n|2:1&n),t):(tl(t),null);case 22:case 23:return xc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Vl)&&(tl(t),6&t.subtreeFlags&&(t.flags|=8192)):tl(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function rl(e,t){switch(ui(t),t.tag){case 1:return Vs(t.type)&&zs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),Rs(Fs),Rs(Ms),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oa(t),null;case 13:if(Rs(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));Ni()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Rs(la),null;case 4:return ia(),null;case 10:return Li(t.type._context),null;case 22:case 23:return xc(),null;default:return null}}Bo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Vo=function(){},zo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ra(ea.current);var i,a=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=ls)}for(u in ye(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Gr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var sl=!1,il=!1,al="function"===typeof WeakSet?WeakSet:Set,ol=null;function ll(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(Le){Dc(e,t,Le)}else n.current=null}function cl(e,t,n){try{n()}catch(Le){Dc(e,t,Le)}}var ul=!1;function dl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&cl(t,n,i)}s=s.next}while(s!==r)}}function hl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function pl(e){var t=e.alternate;null!==t&&(e.alternate=null,pl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ws],delete t[Ns],delete t[_s],delete t[Es],delete t[Ss])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ml(e){return 5===e.tag||3===e.tag||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ls));else if(4!==r&&null!==(e=e.child))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}var bl=null,xl=!1;function wl(e,t,n){for(n=n.child;null!==n;)Nl(e,t,n),n=n.sibling}function Nl(e,t,n){if(pt&&"function"===typeof pt.onCommitFiberUnmount)try{pt.onCommitFiberUnmount(ft,n)}catch(Ue){}switch(n.tag){case 5:il||ll(n,t);case 6:var r=bl,s=xl;bl=null,wl(e,t,n),xl=s,null!==(bl=r)&&(xl?(e=bl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):bl.removeChild(n.stateNode));break;case 18:null!==bl&&(xl?(e=bl,n=n.stateNode,8===e.nodeType?ys(e.parentNode,n):1===e.nodeType&&ys(e,n),Xt(e)):ys(bl,n.stateNode));break;case 4:r=bl,s=xl,bl=n.stateNode.containerInfo,xl=!0,wl(e,t,n),bl=r,xl=s;break;case 0:case 11:case 14:case 15:if(!il&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&cl(n,t,a),s=s.next}while(s!==r)}wl(e,t,n);break;case 1:if(!il&&(ll(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(Ue){Dc(n,t,Ue)}wl(e,t,n);break;case 21:wl(e,t,n);break;case 22:1&n.mode?(il=(r=il)||null!==n.memoizedState,wl(e,t,n),il=r):wl(e,t,n);break;default:wl(e,t,n)}}function kl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new al),t.forEach(function(t){var r=Mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function _l(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:bl=l.stateNode,xl=!1;break e;case 3:case 4:bl=l.stateNode.containerInfo,xl=!0;break e}l=l.return}if(null===bl)throw Error(i(160));Nl(a,o,s),bl=null,xl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(je){Dc(s,t,je)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)El(t,e),t=t.sibling}function El(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_l(t,e),Sl(e),4&r){try{dl(3,e,e.return),hl(3,e)}catch(Ce){Dc(e,e.return,Ce)}try{dl(5,e,e.return)}catch(Ce){Dc(e,e.return,Ce)}}break;case 1:_l(t,e),Sl(e),512&r&&null!==n&&ll(n,n.return);break;case 5:if(_l(t,e),Sl(e),512&r&&null!==n&&ll(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(Ce){Dc(e,e.return,Ce)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),ve(l,o);var u=ve(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?me(s,h):"dangerouslySetInnerHTML"===d?ue(s,h):"children"===d?de(s,h):b(s,d,h,u)}switch(l){case"input":J(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ns]=a}catch(Ce){Dc(e,e.return,Ce)}}break;case 6:if(_l(t,e),Sl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(Ce){Dc(e,e.return,Ce)}}break;case 3:if(_l(t,e),Sl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Xt(t.containerInfo)}catch(Ce){Dc(e,e.return,Ce)}break;case 4:default:_l(t,e),Sl(e);break;case 13:_l(t,e),Sl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Yl=at())),4&r&&kl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(il=(u=il)||d,_l(t,e),il=u):_l(t,e),Sl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(ol=e,d=e.child;null!==d;){for(h=ol=d;null!==ol;){switch(p=(f=ol).child,f.tag){case 0:case 11:case 14:case 15:dl(4,f,f.return);break;case 1:ll(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(Ce){Dc(r,n,Ce)}}break;case 5:ll(f,f.return);break;case 22:if(null!==f.memoizedState){Il(h);continue}}null!==p?(p.return=f,ol=p):Il(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(Ce){Dc(e,e.return,Ce)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(Ce){Dc(e,e.return,Ce)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_l(t,e),Sl(e),4&r&&kl(e);case 21:}}function Sl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ml(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),vl(e,gl(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;yl(e,gl(e),a);break;default:throw Error(i(161))}}catch(st){Dc(e,e.return,st)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Cl(e,t,n){ol=e,jl(e,t,n)}function jl(e,t,n){for(var r=0!==(1&e.mode);null!==ol;){var s=ol,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||sl;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||il;o=sl;var c=il;if(sl=a,(il=l)&&!c)for(ol=s;null!==ol;)l=(a=ol).child,22===a.tag&&null!==a.memoizedState?Al(s):null!==l?(l.return=a,ol=l):Al(s);for(;null!==i;)ol=i,jl(i,t,n),i=i.sibling;ol=s,sl=o,il=c}Tl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,ol=i):Tl(e)}}function Tl(e){for(;null!==ol;){var t=ol;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:il||hl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!il)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:uo(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ji(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ji(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Xt(h)}}}break;default:throw Error(i(163))}il||512&t.flags&&fl(t)}catch(f){Dc(t,t.return,f)}}if(t===e){ol=null;break}if(null!==(n=t.sibling)){n.return=t.return,ol=n;break}ol=t.return}}function Il(e){for(;null!==ol;){var t=ol;if(t===e){ol=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ol=n;break}ol=t.return}}function Al(e){for(;null!==ol;){var t=ol;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hl(4,t)}catch(st){Dc(t,n,st)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(st){Dc(t,s,st)}}var i=t.return;try{fl(t)}catch(st){Dc(t,i,st)}break;case 5:var a=t.return;try{fl(t)}catch(st){Dc(t,a,st)}}}catch(st){Dc(t,t.return,st)}if(t===e){ol=null;break}var o=t.sibling;if(null!==o){o.return=t.return,ol=o;break}ol=t.return}}var Pl,Dl=Math.ceil,Rl=x.ReactCurrentDispatcher,Ol=x.ReactCurrentOwner,Ll=x.ReactCurrentBatchConfig,Ml=0,Fl=null,Ul=null,Bl=0,Vl=0,zl=Ds(0),$l=0,ql=null,Hl=0,Wl=0,Kl=0,Gl=null,Ql=null,Yl=0,Xl=1/0,Jl=null,Zl=!1,ec=null,tc=null,nc=!1,rc=null,sc=0,ic=0,ac=null,oc=-1,lc=0;function cc(){return 0!==(6&Ml)?at():-1!==oc?oc:oc=at()}function uc(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Bl?Bl&-Bl:null!==_i.transition?(0===lc&&(lc=_t()),lc):0!==(e=jt)?e:e=void 0===(e=window.event)?16:an(e.type)}function dc(e,t,n,r){if(50<ic)throw ic=0,ac=null,Error(i(185));St(e,n,r),0!==(2&Ml)&&e===Fl||(e===Fl&&(0===(2&Ml)&&(Wl|=n),4===$l&&gc(e,Bl)),hc(e,r),1===n&&0===Ml&&0===(1&t.mode)&&(Xl=at()+500,Gs&&Xs()))}function hc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-mt(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=Nt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=wt(e,e===Fl?Bl:0);if(0===r)null!==n&&nt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&nt(n),1===t)0===e.tag?function(e){Gs=!0,Ys(e)}(yc.bind(null,e)):Ys(yc.bind(null,e)),ms(function(){0===(6&Ml)&&Xs()}),n=null;else{switch(Tt(r)){case 1:n=lt;break;case 4:n=ct;break;case 16:default:n=ut;break;case 536870912:n=ht}n=Fc(n,fc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fc(e,t){if(oc=-1,lc=0,0!==(6&Ml))throw Error(i(327));var n=e.callbackNode;if(Ac()&&e.callbackNode!==n)return null;var r=wt(e,e===Fl?Bl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Ec(e,r);else{t=r;var s=Ml;Ml|=2;var a=kc();for(Fl===e&&Bl===t||(Jl=null,Xl=at()+500,wc(e,t));;)try{Cc();break}catch(Ue){Nc(e,Ue)}Oi(),Rl.current=a,Ml=s,null!==Ul?t=0:(Fl=null,Bl=0,t=$l)}if(0!==t){if(2===t&&(0!==(s=kt(e))&&(r=s,t=pc(e,s))),1===t)throw n=ql,wc(e,0),gc(e,r),hc(e,at()),n;if(6===t)gc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gr(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=Ec(e,r))&&(0!==(a=kt(e))&&(r=a,t=pc(e,a))),1===t))throw n=ql,wc(e,0),gc(e,r),hc(e,at()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Ic(e,Ql,Jl);break;case 3:if(gc(e,r),(130023424&r)===r&&10<(t=Yl+500-at())){if(0!==wt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){cc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=hs(Ic.bind(null,e,Ql,Jl),t);break}Ic(e,Ql,Jl);break;case 4:if(gc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-mt(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=at()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dl(r/1960))-r)){e.timeoutHandle=hs(Ic.bind(null,e,Ql,Jl),r);break}Ic(e,Ql,Jl);break;default:throw Error(i(329))}}}return hc(e,at()),e.callbackNode===n?fc.bind(null,e):null}function pc(e,t){var n=Gl;return e.current.memoizedState.isDehydrated&&(wc(e,t).flags|=256),2!==(e=Ec(e,t))&&(t=Ql,Ql=n,null!==t&&mc(t)),e}function mc(e){null===Ql?Ql=e:Ql.push.apply(Ql,e)}function gc(e,t){for(t&=~Kl,t&=~Wl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-mt(t),r=1<<n;e[n]=-1,t&=~r}}function yc(e){if(0!==(6&Ml))throw Error(i(327));Ac();var t=wt(e,0);if(0===(1&t))return hc(e,at()),null;var n=Ec(e,t);if(0!==e.tag&&2===n){var r=kt(e);0!==r&&(t=r,n=pc(e,r))}if(1===n)throw n=ql,wc(e,0),gc(e,t),hc(e,at()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ic(e,Ql,Jl),hc(e,at()),null}function vc(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Xl=at()+500,Gs&&Xs())}}function bc(e){null!==rc&&0===rc.tag&&0===(6&Ml)&&Ac();var t=Ml;Ml|=1;var n=Ll.transition,r=jt;try{if(Ll.transition=null,jt=1,e)return e()}finally{jt=r,Ll.transition=n,0===(6&(Ml=t))&&Xs()}}function xc(){Vl=zl.current,Rs(zl)}function wc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,fs(n)),null!==Ul)for(n=Ul.return;null!==n;){var r=n;switch(ui(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&zs();break;case 3:ia(),Rs(Fs),Rs(Ms),da();break;case 5:oa(r);break;case 4:ia();break;case 13:case 19:Rs(la);break;case 10:Li(r.type._context);break;case 22:case 23:xc()}n=n.return}if(Fl=e,Ul=e=zc(e.current,null),Bl=Vl=t,$l=0,ql=null,Kl=Wl=Hl=0,Ql=Gl=null,null!==Bi){for(t=0;t<Bi.length;t++)if(null!==(r=(n=Bi[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Bi=null}return e}function Nc(e,t){for(;;){var n=Ul;try{if(Oi(),ha.current=ao,va){for(var r=ma.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}va=!1}if(pa=0,ya=ga=ma=null,ba=!1,xa=0,Ol.current=null,null===n||null===n.return){$l=1,ql=t,Ul=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Bl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Eo(o);if(null!==p){p.flags&=-257,So(p,o,l,0,t),1&p.mode&&_o(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){_o(a,u,t),_c();break e}c=Error(i(426))}else if(fi&&1&l.mode){var y=Eo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),So(y,o,l,0,t),ki(vo(c,l));break e}}a=c=vo(c,l),4!==$l&&($l=2),null===Gl?Gl=[a]:Gl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Yi(a,No(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===tc||!tc.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Yi(a,ko(a,l,t));break e}}a=a.return}while(null!==a)}Tc(n)}catch(x){t=x,Ul===n&&null!==n&&(Ul=n=n.return);continue}break}}function kc(){var e=Rl.current;return Rl.current=ao,null===e?ao:e}function _c(){0!==$l&&3!==$l&&2!==$l||($l=4),null===Fl||0===(268435455&Hl)&&0===(268435455&Wl)||gc(Fl,Bl)}function Ec(e,t){var n=Ml;Ml|=2;var r=kc();for(Fl===e&&Bl===t||(Jl=null,wc(e,t));;)try{Sc();break}catch(Se){Nc(e,Se)}if(Oi(),Ml=n,Rl.current=r,null!==Ul)throw Error(i(261));return Fl=null,Bl=0,$l}function Sc(){for(;null!==Ul;)jc(Ul)}function Cc(){for(;null!==Ul&&!rt();)jc(Ul)}function jc(e){var t=Pl(e.alternate,e,Vl);e.memoizedProps=e.pendingProps,null===t?Tc(e):Ul=t,Ol.current=null}function Tc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=nl(n,t,Vl)))return void(Ul=n)}else{if(null!==(n=rl(n,t)))return n.flags&=32767,void(Ul=n);if(null===e)return $l=6,void(Ul=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ul=t);Ul=t=e}while(null!==t);0===$l&&($l=5)}function Ic(e,t,n){var r=jt,s=Ll.transition;try{Ll.transition=null,jt=1,function(e,t,n,r){do{Ac()}while(null!==rc);if(0!==(6&Ml))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-mt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Fl&&(Ul=Fl=null,Bl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||nc||(nc=!0,Fc(ut,function(){return Ac(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ll.transition,Ll.transition=null;var o=jt;jt=1;var l=Ml;Ml|=4,Ol.current=null,function(e,t){if(cs=Zt,Nr(e=wr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(ze){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(us={focusedElem:e,selectionRange:n},Zt=!1,ol=t;null!==ol;)if(e=(t=ol).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,ol=e;else for(;null!==ol;){t=ol;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:uo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(ze){Dc(t,t.return,ze)}if(null!==(e=t.sibling)){e.return=t.return,ol=e;break}ol=t.return}m=ul,ul=!1}(e,n),El(n,e),kr(us),Zt=!!cs,us=cs=null,e.current=n,Cl(n,e,s),it(),Ml=l,jt=o,Ll.transition=a}else e.current=n;if(nc&&(nc=!1,rc=e,sc=s),a=e.pendingLanes,0===a&&(tc=null),function(e){if(pt&&"function"===typeof pt.onCommitFiberRoot)try{pt.onCommitFiberRoot(ft,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),hc(e,at()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zl)throw Zl=!1,e=ec,ec=null,e;0!==(1&sc)&&0!==e.tag&&Ac(),a=e.pendingLanes,0!==(1&a)?e===ac?ic++:(ic=0,ac=e):ic=0,Xs()}(e,t,n,r)}finally{Ll.transition=s,jt=r}return null}function Ac(){if(null!==rc){var e=Tt(sc),t=Ll.transition,n=jt;try{if(Ll.transition=null,jt=16>e?16:e,null===rc)var r=!1;else{if(e=rc,rc=null,sc=0,0!==(6&Ml))throw Error(i(331));var s=Ml;for(Ml|=4,ol=e.current;null!==ol;){var a=ol,o=a.child;if(0!==(16&ol.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ol=u;null!==ol;){var d=ol;switch(d.tag){case 0:case 11:case 15:dl(8,d,a)}var h=d.child;if(null!==h)h.return=d,ol=h;else for(;null!==ol;){var f=(d=ol).sibling,p=d.return;if(pl(d),d===u){ol=null;break}if(null!==f){f.return=p,ol=f;break}ol=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}ol=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,ol=o;else e:for(;null!==ol;){if(0!==(2048&(a=ol).flags))switch(a.tag){case 0:case 11:case 15:dl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,ol=v;break e}ol=a.return}}var b=e.current;for(ol=b;null!==ol;){var x=(o=ol).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,ol=x;else e:for(o=b;null!==ol;){if(0!==(2048&(l=ol).flags))try{switch(l.tag){case 0:case 11:case 15:hl(9,l)}}catch(N){Dc(l,l.return,N)}if(l===o){ol=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,ol=w;break e}ol=l.return}}if(Ml=s,Xs(),pt&&"function"===typeof pt.onPostCommitFiberRoot)try{pt.onPostCommitFiberRoot(ft,e)}catch(N){}r=!0}return r}finally{jt=n,Ll.transition=t}}return!1}function Pc(e,t,n){e=Gi(e,t=No(0,t=vo(n,t),1),1),t=cc(),null!==e&&(St(e,1,t),hc(e,t))}function Dc(e,t,n){if(3===e.tag)Pc(e,e,n);else for(;null!==t;){if(3===t.tag){Pc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tc||!tc.has(r))){t=Gi(t,e=ko(t,e=vo(n,e),1),1),e=cc(),null!==t&&(St(t,1,e),hc(t,e));break}}t=t.return}}function Rc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cc(),e.pingedLanes|=e.suspendedLanes&n,Fl===e&&(Bl&n)===n&&(4===$l||3===$l&&(130023424&Bl)===Bl&&500>at()-Yl?wc(e,0):Kl|=n),hc(e,t)}function Oc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=bt,0===(130023424&(bt<<=1))&&(bt=4194304)));var n=cc();null!==(e=$i(e,t))&&(St(e,t,n),hc(e,n))}function Lc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Oc(e,n)}function Mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Oc(e,n)}function Fc(e,t){return tt(e,t)}function Uc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bc(e,t,n,r){return new Uc(e,t,n,r)}function Vc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zc(e,t){var n=e.alternate;return null===n?((n=Bc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $c(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Vc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return qc(n.children,s,a,t);case _:o=8,s|=8;break;case E:return(e=Bc(12,n,t,2|s)).elementType=E,e.lanes=a,e;case T:return(e=Bc(13,n,t,s)).elementType=T,e.lanes=a,e;case I:return(e=Bc(19,n,t,s)).elementType=I,e.lanes=a,e;case D:return Hc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case j:o=11;break e;case A:o=14;break e;case P:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Bc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function qc(e,t,n,r){return(e=Bc(7,e,r,t)).lanes=n,e}function Hc(e,t,n,r){return(e=Bc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Wc(e,t,n){return(e=Bc(6,e,null,t)).lanes=n,e}function Kc(e,t,n){return(t=Bc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Et(0),this.expirationTimes=Et(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Et(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Qc(e,t,n,r,s,i,a,o,l){return e=new Gc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Bc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hi(i),e}function Yc(e){if(!e)return Ls;e:{if(Ye(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Vs(n))return qs(e,n,t)}return t}function Xc(e,t,n,r,s,i,a,o,l){return(e=Qc(n,r,!0,e,0,i,0,o,l)).context=Yc(null),n=e.current,(i=Ki(r=cc(),s=uc(n))).callback=void 0!==t&&null!==t?t:null,Gi(n,i,s),e.current.lanes=s,St(e,s,r),hc(e,r),e}function Jc(e,t,n,r){var s=t.current,i=cc(),a=uc(s);return n=Yc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ki(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Gi(s,t,a))&&(dc(e,s,a,i),Qi(e,s,a)),a}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function eu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function tu(e,t){eu(e,t),(e=e.alternate)&&eu(e,t)}Pl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Fs.current)jo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return jo=!1,function(e,t,n){switch(t.tag){case 3:Fo(t),Ni();break;case 5:aa(t);break;case 1:Vs(t.type)&&Hs(t);break;case 4:sa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Os(Ai,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Os(la,1&la.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Wo(e,t,n):(Os(la,1&la.current),null!==(e=Zo(e,t,n))?e.sibling:null);Os(la,1&la.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Xo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Os(la,la.current),r)break;return null;case 22:case 23:return t.lanes=0,Do(e,t,n)}return Zo(e,t,n)}(e,t,n);jo=0!==(131072&e.flags)}else jo=!1,fi&&0!==(1048576&t.flags)&&li(t,ti,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Jo(e,t),e=t.pendingProps;var s=Bs(t,Ms.current);Fi(t,n),s=_a(null,t,r,e,s,n);var a=Ea();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vs(r)?(a=!0,Hs(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Hi(t),s.updater=fo,t.stateNode=s,s._reactInternals=t,yo(t,r,e,n),t=Mo(null,t,r,!0,a,n)):(t.tag=0,fi&&a&&ci(t),To(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Jo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Vc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===j)return 11;if(e===A)return 14}return 2}(r),e=uo(r,e),s){case 0:t=Oo(null,t,r,e,n);break e;case 1:t=Lo(null,t,r,e,n);break e;case 11:t=Io(null,t,r,e,n);break e;case 14:t=Ao(null,t,r,uo(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Oo(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 1:return r=t.type,s=t.pendingProps,Lo(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 3:e:{if(Fo(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Wi(e,t),Xi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Uo(e,t,r,n,s=vo(Error(i(423)),t));break e}if(r!==s){t=Uo(e,t,r,n,s=vo(Error(i(424)),t));break e}for(hi=vs(t.stateNode.containerInfo.firstChild),di=t,fi=!0,pi=null,n=Ii(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ni(),r===s){t=Zo(e,t,n);break e}To(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&vi(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ds(r,s)?o=null:null!==a&&ds(r,a)&&(t.flags|=32),Ro(e,t),To(e,t,o,n),t.child;case 6:return null===e&&vi(t),null;case 13:return Wo(e,t,n);case 4:return sa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ti(t,null,r,n):To(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,Io(e,t,r,s=t.elementType===r?s:uo(r,s),n);case 7:return To(e,t,t.pendingProps,n),t.child;case 8:case 12:return To(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Os(Ai,r._currentValue),r._currentValue=o,null!==a)if(gr(a.value,o)){if(a.children===s.children&&!Fs.current){t=Zo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Ki(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Mi(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Mi(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}To(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Fi(t,n),r=r(s=Ui(s)),t.flags|=1,To(e,t,r,n),t.child;case 14:return s=uo(r=t.type,t.pendingProps),Ao(e,t,r,s=uo(r.type,s),n);case 15:return Po(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:uo(r,s),Jo(e,t),t.tag=1,Vs(r)?(e=!0,Hs(t)):e=!1,Fi(t,n),mo(t,r,s),yo(t,r,s,n),Mo(null,t,r,!0,e,n);case 19:return Xo(e,t,n);case 22:return Do(e,t,n)}throw Error(i(156,t.tag))};var nu="function"===typeof reportError?reportError:function(e){console.error(e)};function ru(e){this._internalRoot=e}function su(e){this._internalRoot=e}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function au(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ou(){}function lu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Zc(a);o.call(e)}}Jc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Zc(a);i.call(e)}}var a=Xc(t,r,e,0,null,!1,0,"",ou);return e._reactRootContainer=a,e[ks]=a.current,Xr(8===e.nodeType?e.parentNode:e),bc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Zc(l);o.call(e)}}var l=Qc(e,0,!1,null,0,!1,0,"",ou);return e._reactRootContainer=l,e[ks]=l.current,Xr(8===e.nodeType?e.parentNode:e),bc(function(){Jc(t,l,n,r)}),l}(n,t,e,s,r);return Zc(a)}su.prototype.render=ru.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Jc(e,t,null,null)},su.prototype.unmount=ru.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;bc(function(){Jc(null,e,null,null)}),t[ks]=null}},su.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zt.length&&0!==t&&t<zt[n].priority;n++);zt.splice(n,0,e),0===n&&Wt(e)}},It=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xt(t.pendingLanes);0!==n&&(Ct(t,1|n),hc(t,at()),0===(6&Ml)&&(Xl=at()+500,Xs()))}break;case 13:bc(function(){var t=$i(e,1);if(null!==t){var n=cc();dc(t,e,1,n)}}),tu(e,1)}},At=function(e){if(13===e.tag){var t=$i(e,134217728);if(null!==t)dc(t,e,134217728,cc());tu(e,134217728)}},Pt=function(e){if(13===e.tag){var t=uc(e),n=$i(e,t);if(null!==n)dc(n,e,t,cc());tu(e,t)}},Dt=function(){return jt},Rt=function(e,t){var n=jt;try{return jt=e,t()}finally{jt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Is(r);if(!s)throw Error(i(90));K(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=vc,De=bc;var cu={usingClientEntryPoint:!1,Events:[js,Ts,Is,Ee,Ie,vc]},uu={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},du={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{ft=hu.inject(du),pt=hu}catch(Te){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!iu(e))throw Error(i(299));var n=!1,r="",s=nu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Qc(e,1,!1,null,0,n,0,r,s),e[ks]=t.current,Xr(8===e.nodeType?e.parentNode:e),new ru(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e){return bc(e)},t.hydrate=function(e,t,n){if(!au(t))throw Error(i(200));return lu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!iu(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=nu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Xc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ks]=t.current,Xr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new su(t)},t.render=function(e,t,n){if(!au(t))throw Error(i(200));return lu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!au(e))throw Error(i(40));return!!e._reactRootContainer&&(bc(function(){lu(null,null,e,!1,function(){e._reactRootContainer=null,e[ks]=null})}),!0)},t.unstable_batchedUpdates=vc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!au(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return lu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(Se){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,s=n(43),i=n.t(s,2),a=n(391),o=n(950),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Se){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,l=r.Pop,h=null,g=y();function y(){return(o.state||{idx:null}).idx}function v(){l=r.Pop;let e=y(),t=null==e?null:e-g;g=e,h&&h({action:l,location:x.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let x={get action(){return l},get location(){return e(i,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(u,v),h=e,()=>{i.removeEventListener(u,v),h=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let s=p(x.location,e,t);n&&n(s,e),g=y()+1;let c=f(s,g),u=x.createHref(s);try{o.pushState(c,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;i.location.assign(u)}a&&h&&h({action:l,location:x.location,delta:1})},replace:function(e,t){l=r.Replace;let s=p(x.location,e,t);n&&n(s,e),g=y();let i=f(s,g),c=x.createHref(s);o.replaceState(i,"",c),a&&h&&h({action:l,location:x.location,delta:0})},go:e=>o.go(e)};return x}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),x(e,t,n,!1)}function x(e,t,n,r){let s=R(("string"===typeof t?g(t):t).pathname||"/",n);if(null==s)return null;let i=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=D(s);a=A(i[o],e,r)}return a}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(d(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=U([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:I(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of N(e.path))s(e,t,r);else s(e,t)}),t}function N(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=N(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const k=/^:[\w-]+$/,_=3,E=2,S=1,C=10,j=-2,T=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=j),t&&(r+=E),n.filter(e=>!T(e)).reduce((e,t)=>e+(k.test(t)?_:""===t?S:C),r)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:U([i,u.pathname]),pathnameBase:B(U([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=U([i,u.pathnameBase]))}return a}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let n=L(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=g(e):(s=c({},e),d(!s.pathname||!s.pathname.includes("?"),O("?","pathname","search",s)),d(!s.pathname||!s.pathname.includes("#"),O("#","pathname","hash",s)),d(!s.search||!s.search.includes("#"),O("#","search","hash",s)));let i,a=""===e||""===s.pathname,o=a?"/":s.pathname;if(null==o)i=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?g(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:V(r),hash:z(s)}}(s,i),u=o&&"/"!==o&&o.endsWith("/"),h=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const U=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],H=(new Set(q),["get",...q]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const K=s.createContext(null);const G=s.createContext(null);const Q=s.createContext(null);const Y=s.createContext(null);const X=s.createContext({outlet:null,matches:[],isDataRoute:!1});const J=s.createContext(null);function Z(){return null!=s.useContext(Y)}function ee(){return Z()||d(!1),s.useContext(Y).location}function te(e){s.useContext(Q).static||s.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=s.useContext(X);return e?function(){let{router:e}=he(ue.UseNavigateStable),t=pe(de.UseNavigateStable),n=s.useRef(!1);return te(()=>{n.current=!0}),s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},s)))},[e,t])}():function(){Z()||d(!1);let e=s.useContext(K),{basename:t,future:n,navigator:r}=s.useContext(Q),{matches:i}=s.useContext(X),{pathname:a}=ee(),o=JSON.stringify(M(i,n.v7_relativeSplatPath)),l=s.useRef(!1);return te(()=>{l.current=!0}),s.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=F(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:U([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,o,a,e])}()}function re(){let{matches:e}=s.useContext(X),t=e[e.length-1];return t?t.params:{}}function se(e,t,n,i){Z()||d(!1);let{navigator:a}=s.useContext(Q),{matches:o}=s.useContext(X),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=ee();if(t){var p;let e="string"===typeof t?g(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),h=e}else h=f;let m=h.pathname||"/",y=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=b(e,{pathname:y});let x=ce(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:U([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:U([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,i);return t&&x?s.createElement(Y.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},x):x}function ie(){let e=function(){var e;let t=s.useContext(J),n=fe(de.UseRouteError),r=pe(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=$(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const ae=s.createElement(ie,null);class oe extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(X.Provider,{value:this.props.routeContext},s.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(K);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(X.Provider,{value:t},r)}function ce(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,r,i)=>{let a,d=!1,h=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ae,c&&(u<0&&0===i?(p="route-fallback",!1||me[p]||(me[p]=!0),d=!0,f=null):u===i&&(d=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?h:d?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(le,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(oe,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function he(e){let t=s.useContext(K);return t||d(!1),t}function fe(e){let t=s.useContext(G);return t||d(!1),t}function pe(e){let t=function(){let e=s.useContext(X);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const me={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ye(e){let{to:t,replace:n,state:r,relative:i}=e;Z()||d(!1);let{future:a,static:o}=s.useContext(Q),{matches:l}=s.useContext(X),{pathname:c}=ee(),u=ne(),h=F(t,M(l,a.v7_relativeSplatPath),c,"path"===i),f=JSON.stringify(h);return s.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:i}),[u,f,i,n,r]),null}function ve(e){d(!1)}function be(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.Pop,navigator:o,static:l=!1,future:c}=e;Z()&&d(!1);let u=t.replace(/^\/*/,"/"),h=s.useMemo(()=>({basename:u,navigator:o,static:l,future:W({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof i&&(i=g(i));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=i,b=s.useMemo(()=>{let e=R(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:y,key:v},navigationType:a}},[u,f,p,m,y,v,a]);return null==b?null:s.createElement(Q.Provider,{value:h},s.createElement(Y.Provider,{children:n,value:b}))}function xe(e){let{children:t,location:n}=e;return se(we(t),n)}new Promise(()=>{});s.Component;function we(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,we(e.props.children,i));e.type!==ve&&d(!1),e.props.index&&e.props.children&&d(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=we(e.props.children,i)),n.push(a)}),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Se){}new Map;const Ne=i.startTransition;l.flushSync,i.useId;function ke(e){let{basename:t,children:n,future:r,window:i}=e,a=s.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),y(function(e,t){let{pathname:n="/",search:r="",hash:s=""}=g(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),p("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:m(t))},function(e,t){h("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=a.current,[c,u]=s.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},f=s.useCallback(e=>{d&&Ne?Ne(()=>u(e)):u(e)},[u,d]);return s.useLayoutEffect(()=>l.listen(f),[l,f]),s.useEffect(()=>ge(r),[r]),s.createElement(be,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var _e,Ee;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_e||(_e={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ee||(Ee={}));let Se={data:""},Ce=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Se,je=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Te=/\/\*[^]*?\*\/|  +/g,Ie=/\n+/g,Ae=(e,t)=>{let n="",r="",s="";for(let i in e){let a=e[i];"@"==i[0]?"i"==i[1]?n=i+" "+a+";":r+="f"==i[1]?Ae(a,i):i+"{"+Ae(a,"k"==i[1]?"":t)+"}":"object"==typeof a?r+=Ae(a,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=a&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ae.p?Ae.p(i,a):i+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+r},Pe={},De=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+De(e[n]);return t}return e},Re=(e,t,n,r,s)=>{let i=De(e),a=Pe[i]||(Pe[i]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(i));if(!Pe[a]){let t=i!==e?e:(e=>{let t,n,r=[{}];for(;t=je.exec(e.replace(Te,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Ie," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Ie," ").trim();return r[0]})(e);Pe[a]=Ae(s?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&Pe.g?Pe.g:null;return n&&(Pe.g=Pe[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Pe[a],t,r,o),a};function Oe(e){let t=this||{},n=e.call?e(t.p):e;return Re(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,s)=>{let i=t[s];if(i&&i.call){let e=i(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":Ae(e,""):!1===e?"":e}return e+r+(null==i?"":i)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,Ce(t.target),t.g,t.o,t.k)}Oe.bind({g:1});let Le,Me,Fe,Ue=Oe.bind({k:1});function Be(e,t){let n=this||{};return function(){let r=arguments;function s(i,a){let o=Object.assign({},i),l=o.className||s.className;n.p=Object.assign({theme:Me&&Me()},o),n.o=/ *go\d+/.test(l),o.className=Oe.apply(n,r)+(l?" "+l:""),t&&(o.ref=a);let c=e;return e[0]&&(c=o.as||e,delete o.as),Fe&&c[0]&&Fe(o),Le(c,o)}return t?t(s):s}}var Ve=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,ze=(()=>{let e=0;return()=>(++e).toString()})(),$e=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),qe=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:n}=t;return qe(e,{type:e.toasts.find(e=>e.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+s}))}}},He=[],We={toasts:[],pausedAt:void 0},Ke=e=>{We=qe(We,e),He.forEach(e=>{e(We)})},Ge={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Qe=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||ze()}}(t,e,n);return Ke({type:2,toast:r}),r.id},Ye=(e,t)=>Qe("blank")(e,t);Ye.error=Qe("error"),Ye.success=Qe("success"),Ye.loading=Qe("loading"),Ye.custom=Qe("custom"),Ye.dismiss=e=>{Ke({type:3,toastId:e})},Ye.remove=e=>Ke({type:4,toastId:e}),Ye.promise=(e,t,n)=>{let r=Ye.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?Ve(t.success,e):void 0;return s?Ye.success(s,{id:r,...n,...null==n?void 0:n.success}):Ye.dismiss(r),e}).catch(e=>{let s=t.error?Ve(t.error,e):void 0;s?Ye.error(s,{id:r,...n,...null==n?void 0:n.error}):Ye.dismiss(r)}),e};var Xe=(e,t)=>{Ke({type:1,toast:{id:e,height:t}})},Je=()=>{Ke({type:5,time:Date.now()})},Ze=new Map,et=e=>{let{toasts:t,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,s.useState)(We),r=(0,s.useRef)(We);(0,s.useEffect)(()=>(r.current!==We&&n(We),He.push(n),()=>{let e=He.indexOf(n);e>-1&&He.splice(e,1)}),[]);let i=t.toasts.map(t=>{var n,r,s;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||Ge[t.type],style:{...e.style,...null==(s=e[t.type])?void 0:s.style,...t.style}}});return{...t,toasts:i}}(e);(0,s.useEffect)(()=>{if(n)return;let e=Date.now(),r=t.map(t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout(()=>Ye.dismiss(t.id),n);t.visible&&Ye.dismiss(t.id)});return()=>{r.forEach(e=>e&&clearTimeout(e))}},[t,n]);let r=(0,s.useCallback)(()=>{n&&Ke({type:6,time:Date.now()})},[n]),i=(0,s.useCallback)((e,n)=>{let{reverseOrder:r=!1,gutter:s=8,defaultPosition:i}=n||{},a=t.filter(t=>(t.position||i)===(e.position||i)&&t.height),o=a.findIndex(t=>t.id===e.id),l=a.filter((e,t)=>t<o&&e.visible).length;return a.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+s,0)},[t]);return(0,s.useEffect)(()=>{t.forEach(e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(Ze.has(e))return;let n=setTimeout(()=>{Ze.delete(e),Ke({type:4,toastId:e})},t);Ze.set(e,n)}(e.id,e.removeDelay);else{let t=Ze.get(e.id);t&&(clearTimeout(t),Ze.delete(e.id))}})},[t]),{toasts:t,handlers:{updateHeight:Xe,startPause:Je,endPause:r,calculateOffset:i}}},tt=Ue`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,nt=Ue`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rt=Ue`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,st=Be("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${nt} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${rt} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,it=Ue`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,at=Be("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${it} 1s linear infinite;
`,ot=Ue`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,lt=Ue`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ct=Be("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ot} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${lt} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ut=Be("div")`
  position: absolute;
`,dt=Be("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ht=Ue`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ft=Be("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ht} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,pt=e=>{let{toast:t}=e,{icon:n,type:r,iconTheme:i}=t;return void 0!==n?"string"==typeof n?s.createElement(ft,null,n):n:"blank"===r?null:s.createElement(dt,null,s.createElement(at,{...i}),"loading"!==r&&s.createElement(ut,null,"error"===r?s.createElement(st,{...i}):s.createElement(ct,{...i})))},mt=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,gt=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,yt=Be("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,vt=Be("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,bt=s.memo(e=>{let{toast:t,position:n,style:r,children:i}=e,a=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,s]=$e()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[mt(n),gt(n)];return{animation:t?`${Ue(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ue(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||n||"top-center",t.visible):{opacity:0},o=s.createElement(pt,{toast:t}),l=s.createElement(vt,{...t.ariaProps},Ve(t.message,t));return s.createElement(yt,{className:t.className,style:{...a,...r,...t.style}},"function"==typeof i?i({icon:o,message:l}):s.createElement(s.Fragment,null,o,l))});!function(e,t,n,r){Ae.p=t,Le=e,Me=n,Fe=r}(s.createElement);var xt=e=>{let{id:t,className:n,style:r,onHeightUpdate:i,children:a}=e,o=s.useCallback(e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;i(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,i]);return s.createElement("div",{ref:o,className:n,style:r},a)},wt=Oe`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Nt=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:r,gutter:i,children:a,containerStyle:o,containerClassName:l}=e,{toasts:c,handlers:u}=et(r);return s.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(e=>{let r=e.position||n,o=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:$e()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}})(r,u.calculateOffset(e,{reverseOrder:t,gutter:i,defaultPosition:n}));return s.createElement(xt,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?wt:"",style:o},"custom"===e.type?Ve(e.message,e):a?a(e):s.createElement(bt,{toast:e,position:r}))}))},kt=Ye;const _t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Et={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_t(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new St;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class St extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ct=function(e){return function(e){const t=_t(e);return Et.encodeByteArray(t,!0)}(e).replace(/\./g,"")},jt=function(e){try{return Et.decodeString(e,!0)}catch(Se){console.error("base64Decode failed: ",Se)}return null};const Tt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,It=()=>{try{return Tt()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Cuentas",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Se){return}const t=e&&jt(e[1]);return t&&JSON.parse(t)})()}catch(Se){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Se}`)}},At=e=>{var t,n;return null===(n=null===(t=It())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Pt=()=>{var e;return null===(e=It())||void 0===e?void 0:e.config},Dt=e=>{var t;return null===(t=It())||void 0===t?void 0:t[`_${e}`]};class Rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ot(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Lt(){return!function(){var e;const t=null===(e=It())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Se){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mt(){try{return"object"===typeof indexedDB}catch(Se){return!1}}class Ft extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ft.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ut.prototype.create)}}class Ut{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(Bt,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new Ft(n,i,t)}}const Bt=/\{\$([^}]+)}/g;function Vt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(zt(n)&&zt(i)){if(!Vt(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function zt(e){return null!==e&&"object"===typeof e}function $t(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function qt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Ht(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Wt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Kt),void 0===r.error&&(r.error=Kt),void 0===r.complete&&(r.complete=Kt);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Se){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Se){"undefined"!==typeof console&&console.error&&console.error(Se)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kt(){}function Gt(e){return e&&e._delegate?e._delegate:e}class Qt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Yt="[DEFAULT]";class Xt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Rt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Se){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Se){if(r)return null;throw Se}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Yt})}catch(Se){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Se){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===Yt?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;return this.component?this.component.multipleInstances?e:Yt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Jt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Xt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Zt=[];var en;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(en||(en={}));const tn={debug:en.DEBUG,verbose:en.VERBOSE,info:en.INFO,warn:en.WARN,error:en.ERROR,silent:en.SILENT},nn=en.INFO,rn={[en.DEBUG]:"log",[en.VERBOSE]:"log",[en.INFO]:"info",[en.WARN]:"warn",[en.ERROR]:"error"},sn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=rn[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...i)};class an{constructor(e){this.name=e,this._logLevel=nn,this._logHandler=sn,this._userLogHandler=null,Zt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in en))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?tn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,en.DEBUG,...t),this._logHandler(this,en.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,en.VERBOSE,...t),this._logHandler(this,en.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,en.INFO,...t),this._logHandler(this,en.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,en.WARN,...t),this._logHandler(this,en.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,en.ERROR,...t),this._logHandler(this,en.ERROR,...t)}}let on,ln;const cn=new WeakMap,un=new WeakMap,dn=new WeakMap,hn=new WeakMap,fn=new WeakMap;let pn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return un.get(e);if("objectStoreNames"===t)return e.objectStoreNames||dn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function mn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ln||(ln=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(vn(this),n),yn(cn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yn(e.apply(vn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(vn(this),t,...r);return dn.set(i,t.sort?t.sort():[t]),yn(i)}}function gn(e){return"function"===typeof e?mn(e):(e instanceof IDBTransaction&&function(e){if(un.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});un.set(e,t)}(e),t=e,(on||(on=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,pn):e);var t}function yn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(yn(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&cn.set(t,e)}).catch(()=>{}),fn.set(t,e),t}(e);if(hn.has(e))return hn.get(e);const t=gn(e);return t!==e&&(hn.set(e,t),fn.set(t,e)),t}const vn=e=>fn.get(e);const bn=["get","getKey","getAll","getAllKeys","count"],xn=["put","add","delete","clear"],wn=new Map;function Nn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(wn.get(t))return wn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=xn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!bn.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return wn.set(t,i),i}pn=(e=>({...e,get:(t,n,r)=>Nn(t,n)||e.get(t,n,r),has:(t,n)=>!!Nn(t,n)||e.has(t,n)}))(pn);class kn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const _n="@firebase/app",En="0.10.13",Sn=new an("@firebase/app"),Cn="@firebase/app-compat",jn="@firebase/analytics-compat",Tn="@firebase/analytics",In="@firebase/app-check-compat",An="@firebase/app-check",Pn="@firebase/auth",Dn="@firebase/auth-compat",Rn="@firebase/database",On="@firebase/data-connect",Ln="@firebase/database-compat",Mn="@firebase/functions",Fn="@firebase/functions-compat",Un="@firebase/installations",Bn="@firebase/installations-compat",Vn="@firebase/messaging",zn="@firebase/messaging-compat",$n="@firebase/performance",qn="@firebase/performance-compat",Hn="@firebase/remote-config",Wn="@firebase/remote-config-compat",Kn="@firebase/storage",Gn="@firebase/storage-compat",Qn="@firebase/firestore",Yn="@firebase/vertexai-preview",Xn="@firebase/firestore-compat",Jn="firebase",Zn="[DEFAULT]",er={[_n]:"fire-core",[Cn]:"fire-core-compat",[Tn]:"fire-analytics",[jn]:"fire-analytics-compat",[An]:"fire-app-check",[In]:"fire-app-check-compat",[Pn]:"fire-auth",[Dn]:"fire-auth-compat",[Rn]:"fire-rtdb",[On]:"fire-data-connect",[Ln]:"fire-rtdb-compat",[Mn]:"fire-fn",[Fn]:"fire-fn-compat",[Un]:"fire-iid",[Bn]:"fire-iid-compat",[Vn]:"fire-fcm",[zn]:"fire-fcm-compat",[$n]:"fire-perf",[qn]:"fire-perf-compat",[Hn]:"fire-rc",[Wn]:"fire-rc-compat",[Kn]:"fire-gcs",[Gn]:"fire-gcs-compat",[Qn]:"fire-fst",[Xn]:"fire-fst-compat",[Yn]:"fire-vertex","fire-js":"fire-js",[Jn]:"fire-js-all"},tr=new Map,nr=new Map,rr=new Map;function sr(e,t){try{e.container.addComponent(t)}catch(Se){Sn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Se)}}function ir(e){const t=e.name;if(rr.has(t))return Sn.debug(`There were multiple attempts to register component ${t}.`),!1;rr.set(t,e);for(const n of tr.values())sr(n,e);for(const n of nr.values())sr(n,e);return!0}function ar(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function or(e){return void 0!==e.settings}const lr=new Ut("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class cr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Qt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}const ur="10.14.1";function dr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Zn,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw lr.create("bad-app-name",{appName:String(s)});if(n||(n=Pt()),!n)throw lr.create("no-options");const i=tr.get(s);if(i){if(Vt(n,i.options)&&Vt(r,i.config))return i;throw lr.create("duplicate-app",{appName:s})}const a=new Jt(s);for(const l of rr.values())a.addComponent(l);const o=new cr(n,r,a);return tr.set(s,o),o}function hr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn;const t=tr.get(e);if(!t&&e===Zn&&Pt())return dr();if(!t)throw lr.create("no-app",{appName:e});return t}function fr(e,t,n){var r;let s=null!==(r=er[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Sn.warn(e.join(" "))}ir(new Qt(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const pr="firebase-heartbeat-store";let mr=null;function gr(){return mr||(mr=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=yn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(yn(a.result),e.oldVersion,e.newVersion,yn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pr)}catch(Se){console.warn(Se)}}}).catch(e=>{throw lr.create("idb-open",{originalErrorMessage:e.message})})),mr}async function yr(e,t){try{const n=(await gr()).transaction(pr,"readwrite"),r=n.objectStore(pr);await r.put(t,vr(e)),await n.done}catch(Se){if(Se instanceof Ft)Sn.warn(Se.message);else{const t=lr.create("idb-set",{originalErrorMessage:null===Se||void 0===Se?void 0:Se.message});Sn.warn(t.message)}}}function vr(e){return`${e.name}!${e.options.appId}`}class br{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xr();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Se){Sn.warn(Se)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=xr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Nr(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Nr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=Ct(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Se){return Sn.warn(Se),""}}}function xr(){return(new Date).toISOString().substring(0,10)}class wr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Mt()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await gr()).transaction(pr),n=await t.objectStore(pr).get(vr(e));return await t.done,n}catch(Se){if(Se instanceof Ft)Sn.warn(Se.message);else{const t=lr.create("idb-get",{originalErrorMessage:null===Se||void 0===Se?void 0:Se.message});Sn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return yr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return yr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Nr(e){return Ct(JSON.stringify({version:2,heartbeats:e})).length}var kr;kr="",ir(new Qt("platform-logger",e=>new kn(e),"PRIVATE")),ir(new Qt("heartbeat",e=>new br(e),"PRIVATE")),fr(_n,En,kr),fr(_n,En,"esm2017"),fr("fire-js","");function _r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Er(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Sr=Er,Cr=new Ut("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),jr=new an("@firebase/auth");function Tr(e){if(jr.logLevel<=en.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];jr.error(`Auth (${ur}): ${e}`,...n)}}function Ir(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Rr(e,...n)}function Ar(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rr(e,...n)}function Pr(e,t,n){const r=Object.assign(Object.assign({},Sr()),{[t]:n});return new Ut("auth","Firebase",r).create(t,{appName:e.name})}function Dr(e){return Pr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Cr.create(e,...n)}function Or(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Rr(t,...r)}}function Lr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Tr(t),new Error(t)}function Mr(e,t){e||Lr(t)}function Fr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ur(){return"http:"===Br()||"https:"===Br()}function Br(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Vr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ur()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class zr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Vr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $r(e,t){Mr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class qr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Wr=new zr(3e4,6e4);function Kr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Gr(e,t,n,r){return Qr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=$t(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),qr.fetch()(Xr(e,e.config.apiHost,n,a),l)})}async function Qr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hr),t);try{const t=new Zr(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw es(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw es(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw es(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw es(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Pr(e,o,a);Ir(e,o)}}catch(Se){if(Se instanceof Ft)throw Se;Ir(e,"network-request-failed",{message:String(Se)})}}async function Yr(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Gr(e,t,n,r,s);return"mfaPendingCredential"in i&&Ir(e,"multi-factor-auth-required",{_serverResponse:i}),i}function Xr(e,t,n,r){const s=`${t}${n}?${r}`;return e.config.emulator?$r(e.config,s):`${e.config.apiScheme}://${s}`}function Jr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ar(this.auth,"network-request-failed")),Wr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function es(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ar(e,t,r);return s.customData._tokenResponse=n,s}function ts(e){return void 0!==e&&void 0!==e.enterprise}class ns{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Jr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function rs(e,t){return Gr(e,"GET","/v2/recaptchaConfig",Kr(e,t))}async function ss(e,t){return Gr(e,"POST","/v1/accounts:lookup",t)}function is(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Se){}}function as(e){return 1e3*Number(e)}function os(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Tr("JWT malformed, contained fewer than 3 sections"),null;try{const e=jt(n);return e?JSON.parse(e):(Tr("Failed to decode base64 JWT payload"),null)}catch(Se){return Tr("Caught error parsing JWT payload as JSON",null===Se||void 0===Se?void 0:Se.toString()),null}}function ls(e){const t=os(e);return Or(t,"internal-error"),Or("undefined"!==typeof t.exp,"internal-error"),Or("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function cs(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Se){throw Se instanceof Ft&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(Se)&&e.auth.currentUser===e&&await e.auth.signOut(),Se}}class us{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Se){return void("auth/network-request-failed"===(null===Se||void 0===Se?void 0:Se.code)&&this.schedule(!0))}this.schedule()}}class ds{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=is(this.lastLoginAt),this.creationTime=is(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hs(e){var t;const n=e.auth,r=await e.getIdToken(),s=await cs(e,ss(n,{idToken:r}));Or(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?fs(i.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ds(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function fs(e){return e.map(e=>{var{providerId:t}=e,n=_r(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class ps{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Or(e.idToken,"internal-error"),Or("undefined"!==typeof e.idToken,"internal-error"),Or("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ls(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Or(0!==e.length,"internal-error");const t=ls(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Or(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Qr(e,{},async()=>{const n=$t({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=Xr(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qr.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new ps;return n&&(Or("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Or("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Or("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ps,this.toJSON())}_performRefresh(){return Lr("not implemented")}}function ms(e,t){Or("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class gs{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=_r(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new us(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ds(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await cs(this,this.stsTokenManager.getToken(this.auth,e));return Or(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Gt(e),r=await n.getIdToken(t),s=os(r);Or(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:is(as(s.auth_time)),issuedAtTime:is(as(s.iat)),expirationTime:is(as(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Gt(e);await hs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Or(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Or(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await hs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(Dr(this.auth));const e=await this.getIdToken();return await cs(this,async function(e,t){return Gr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:N}=t;Or(v&&N,e,"internal-error");const k=ps.fromJSON(this.name,N);Or("string"===typeof v,e,"internal-error"),ms(u,e.name),ms(d,e.name),Or("boolean"===typeof b,e,"internal-error"),Or("boolean"===typeof x,e,"internal-error"),ms(h,e.name),ms(f,e.name),ms(p,e.name),ms(m,e.name),ms(g,e.name),ms(y,e.name);const _=new gs({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(_.providerData=w.map(e=>Object.assign({},e))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ps;r.updateFromServerResponse(t);const s=new gs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await hs(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Or(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?fs(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new ps;a.updateFromIdToken(n);const o=new gs({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new ds(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const ys=new Map;function vs(e){Mr(e instanceof Function,"Expected a class definition");let t=ys.get(e);return t?(Mr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ys.set(e,t),t)}class bs{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bs.type="NONE";const xs=bs;function ws(e,t,n){return`firebase:${e}:${t}:${n}`}class Ns{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=ws(this.userKey,r.apiKey,s),this.fullPersistenceKey=ws("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?gs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ns(vs(xs),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||vs(xs);const i=ws(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=gs._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new Ns(s,e,n)):new Ns(s,e,n)}}function ks(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Cs(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_s(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ts(t))return"Blackberry";if(Is(t))return"Webos";if(Es(t))return"Safari";if((t.includes("chrome/")||Ss(t))&&!t.includes("edge/"))return"Chrome";if(js(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function _s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot();return/firefox\//i.test(e)}function Es(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot();return/crios\//i.test(e)}function Cs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot();return/iemobile/i.test(e)}function js(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot();return/android/i.test(e)}function Ts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot();return/blackberry/i.test(e)}function Is(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot();return/webos/i.test(e)}function As(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ps(){return function(){const e=Ot();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot();return As(e)||js(e)||Is(e)||Ts(e)||/windows phone/i.test(e)||Cs(e)}function Rs(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ks(Ot());break;case"Worker":t=`${ks(Ot())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${ur}/${r}`}class Os{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Se){r(Se)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Se){t.reverse();for(const n of t)try{n()}catch(ct){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Se||void 0===Se?void 0:Se.message})}}}class Ls{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Ms{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Us(this),this.idTokenSubscription=new Us(this),this.beforeStateQueue=new Os(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vs(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ns.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Se){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ss(this,{idToken:e}),n=await gs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(or(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Se){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Se))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Or(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Se){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hs(e)}catch(Se){if("auth/network-request-failed"!==(null===Se||void 0===Se?void 0:Se.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(Dr(this));const t=e?Gt(e):null;return t&&Or(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Or(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(Dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(Dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Gr(e,"GET","/v2/passwordPolicy",Kr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ls(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ut("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Gr(e,"POST","/v2/accounts:revokeToken",Kr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vs(e)||this._popupRedirectResolver;Or(t,this,"argument-error"),this.redirectPersistenceManager=await Ns.create(this,[vs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Or(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Or(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(jr.logLevel<=en.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];jr.warn(`Auth (${ur}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Fs(e){return Gt(e)}class Us{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Wt(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Or(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Bs={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vs(e){return Bs.loadJS(e)}function zs(e){return`__${e}${Math.floor(1e6*Math.random())}`}class $s{constructor(e){this.type="recaptcha-enterprise",this.auth=Fs(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;ts(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{rs(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ns(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&ts(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Bs.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Vs(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function qs(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new $s(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Hs(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await qs(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await qs(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function Ws(e,t,n){const r=Fs(e);Or(r._canInitEmulator,r,"emulator-config-failed"),Or(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Ks(t),{host:a,port:o}=function(e){const t=Ks(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Gs(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Gs(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${i}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ks(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gs(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Qs{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Lr("not implemented")}_getIdTokenResponse(e){return Lr("not implemented")}_linkToIdToken(e,t){return Lr("not implemented")}_getReauthenticationResolver(e){return Lr("not implemented")}}async function Ys(e,t){return Gr(e,"POST","/v1/accounts:signUp",t)}async function Xs(e,t){return Yr(e,"POST","/v1/accounts:signInWithPassword",Kr(e,t))}class Js extends Qs{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Js(e,t,"password")}static _fromEmailAndCode(e,t){return new Js(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Hs(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Xs);case"emailLink":return async function(e,t){return Yr(e,"POST","/v1/accounts:signInWithEmailLink",Kr(e,t))}(e,{email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Hs(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ys);case"emailLink":return async function(e,t){return Yr(e,"POST","/v1/accounts:signInWithEmailLink",Kr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zs(e,t){return Yr(e,"POST","/v1/accounts:signInWithIdp",Kr(e,t))}class ei extends Qs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ei(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=_r(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new ei(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Zs(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Zs(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zs(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$t(t)}return e}}const ti={USER_NOT_FOUND:"user-not-found"};class ni extends Qs{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ni({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ni({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Yr(e,"POST","/v1/accounts:signInWithPhoneNumber",Kr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Yr(e,"POST","/v1/accounts:signInWithPhoneNumber",Kr(e,t));if(n.temporaryProof)throw es(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Yr(e,"POST","/v1/accounts:signInWithPhoneNumber",Kr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ti)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new ni({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class ri{constructor(e){var t,n,r,s,i,a;const o=qt(Ht(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Or(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=qt(Ht(e)).link,n=t?qt(Ht(t)).deep_link_id:null,r=qt(Ht(e)).deep_link_id;return(r?qt(Ht(r)).link:null)||r||n||t||e}(e);try{return new ri(t)}catch(n){return null}}}class si{constructor(){this.providerId=si.PROVIDER_ID}static credential(e,t){return Js._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ri.parseLink(t);return Or(n,"argument-error"),Js._fromEmailAndCode(e,n.code,n.tenantId)}}si.PROVIDER_ID="password",si.EMAIL_PASSWORD_SIGN_IN_METHOD="password",si.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ii{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ai extends ii{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class oi extends ai{constructor(){super("facebook.com")}static credential(e){return ei._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return oi.credential(t.oauthAccessToken)}catch(n){return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com",oi.PROVIDER_ID="facebook.com";class li extends ai{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ei._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return li.credential(n,r)}catch(s){return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com",li.PROVIDER_ID="google.com";class ci extends ai{constructor(){super("github.com")}static credential(e){return ei._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ci.credential(t.oauthAccessToken)}catch(n){return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com",ci.PROVIDER_ID="github.com";class ui extends ai{constructor(){super("twitter.com")}static credential(e,t){return ei._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ui.credential(n,r)}catch(s){return null}}}async function di(e,t){return Yr(e,"POST","/v1/accounts:signUp",Kr(e,t))}ui.TWITTER_SIGN_IN_METHOD="twitter.com",ui.PROVIDER_ID="twitter.com";class hi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await gs._fromIdTokenResponse(e,n,r),i=fi(n);return new hi({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=fi(n);return new hi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function fi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class pi extends Ft{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,pi.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new pi(e,t,n,r)}}function mi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw pi._fromErrorAndOperation(e,n,t,r);throw n})}async function gi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await cs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return hi._forOperation(e,"link",r)}async function yi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(or(r.app))return Promise.reject(Dr(r));const s="reauthenticate";try{const i=await cs(e,mi(r,s,t,e),n);Or(i.idToken,r,"internal-error");const a=os(i.idToken);Or(a,r,"internal-error");const{sub:o}=a;return Or(e.uid===o,r,"user-mismatch"),hi._forOperation(e,s,i)}catch(Se){throw"auth/user-not-found"===(null===Se||void 0===Se?void 0:Se.code)&&Ir(r,"user-mismatch"),Se}}async function vi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(or(e.app))return Promise.reject(Dr(e));const r="signIn",s=await mi(e,r,t),i=await hi._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function bi(e,t){return vi(Fs(e),t)}async function xi(e,t){return yi(Gt(e),t)}async function wi(e){const t=Fs(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ni(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=Gt(e),i={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await cs(s,async function(e,t){return Gr(e,"POST","/v1/accounts:update",t)}(s.auth,i));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const o=s.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}async function ki(e,t,n){const{auth:r}=e,s={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const i=await cs(e,async function(e,t){return Gr(e,"POST","/v1/accounts:update",t)}(r,s));await e._updateTokensIfNecessary(i,!0)}new WeakMap;const _i="__sak";class Ei{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_i,"1"),this.storage.removeItem(_i),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Si extends Ei{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ds(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Ps()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Si.type="LOCAL";const Ci=Si;class ji extends Ei{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ji.type="SESSION";const Ti=ji;class Ii{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ii(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ii.receivers=[];class Pi{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Ai("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Di(){return window}function Ri(){return"undefined"!==typeof Di().WorkerGlobalScope&&"function"===typeof Di().importScripts}const Oi="firebaseLocalStorageDb",Li="firebaseLocalStorage",Mi="fbase_key";class Fi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ui(e,t){return e.transaction([Li],t?"readwrite":"readonly").objectStore(Li)}function Bi(){const e=indexedDB.open(Oi,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Li,{keyPath:Mi})}catch(Se){n(Se)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Li)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Oi);return new Fi(e).toPromise()}(),t(await Bi()))})})}async function Vi(e,t,n){const r=Ui(e,!0).put({[Mi]:t,value:n});return new Fi(r).toPromise()}function zi(e,t){const n=Ui(e,!0).delete(t);return new Fi(n).toPromise()}class $i{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Bi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Se){if(t++>3)throw Se;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ri()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ii._getInstance(Ri()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Pi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bi();return await Vi(e,_i,"1"),await zi(e,_i),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vi(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ui(e,!1).get(t),r=await new Fi(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>zi(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ui(e,!1).getAll();return new Fi(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}$i.type="LOCAL";const qi=$i;zs("rcb"),new zr(3e4,6e4);const Hi="recaptcha";async function Wi(e,t,n){var r;const s=await n.verify();try{let i;if(Or("string"===typeof s,e,"argument-error"),Or(n.type===Hi,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Or("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Gr(e,"POST","/v2/accounts/mfaEnrollment:start",Kr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Or("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Or(n,e,"missing-multi-factor-info");const a=await function(e,t){return Gr(e,"POST","/v2/accounts/mfaSignIn:start",Kr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Gr(e,"POST","/v1/accounts:sendVerificationCode",Kr(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class Ki{constructor(e){this.providerId=Ki.PROVIDER_ID,this.auth=Fs(e)}verifyPhoneNumber(e,t){return Wi(this.auth,e,Gt(t))}static credential(e,t){return ni._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ki.credentialFromTaggedObject(t)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ni._fromTokenResponse(n,r):null}}function Gi(e,t){return t?vs(t):(Or(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ki.PROVIDER_ID="phone",Ki.PHONE_SIGN_IN_METHOD="phone";class Qi extends Qs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Yi(e){return vi(e.auth,new Qi(e),e.bypassAuthState)}function Xi(e){const{auth:t,user:n}=e;return Or(n,t,"internal-error"),yi(n,new Qi(e),e.bypassAuthState)}async function Ji(e){const{auth:t,user:n}=e;return Or(n,t,"internal-error"),gi(n,new Qi(e),e.bypassAuthState)}class Zi{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Se){this.reject(Se)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Se){this.reject(Se)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yi;case"linkViaPopup":case"linkViaRedirect":return Ji;case"reauthViaPopup":case"reauthViaRedirect":return Xi;default:Ir(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ea=new zr(2e3,1e4);class ta extends Zi{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,ta.currentPopupAction&&ta.currentPopupAction.cancel(),ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Or(e,this.auth,"internal-error"),e}async onExecution(){Mr(1===this.filter.length,"Popup operations only handle one event");const e=Ai();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ea.get())};e()}}ta.currentPopupAction=null;const na=new Map;class ra extends Zi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=na.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=aa(t),r=ia(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Se){e=()=>Promise.reject(Se)}na.set(this.auth._key(),e)}return this.bypassAuthState||na.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function sa(e,t){na.set(e._key(),t)}function ia(e){return vs(e._redirectPersistence)}function aa(e){return ws("pendingRedirect",e.config.apiKey,e.name)}async function oa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(or(e.app))return Promise.reject(Dr(e));const r=Fs(e),s=Gi(r,t),i=new ra(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class la{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ua(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ua(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ar(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ca(e))}saveEventToCache(e){this.cachedEventUids.add(ca(e)),this.lastProcessedEventTime=Date.now()}}function ca(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ua(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const da=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ha=/^https?/;async function fa(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Gr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(pa(r))return}catch(n){}Ir(e,"unauthorized-domain")}function pa(e){const t=Fr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!ha.test(n))return!1;if(da.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const ma=new zr(3e4,6e4);function ga(){const e=Di().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ya(e){return new Promise((t,n)=>{var r,s,i;function a(){ga(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ga(),n(Ar(e,"network-request-failed"))},timeout:ma.get()})}if(null===(s=null===(r=Di().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Di().gapi)||void 0===i?void 0:i.load)){const t=zs("iframefcb");return Di()[t]=()=>{gapi.load?a():n(Ar(e,"network-request-failed"))},Vs(`${Bs.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw va=null,e})}let va=null;const ba=new zr(5e3,15e3),xa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Na(e){const t=e.config;Or(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?$r(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:ur},s=wa.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${$t(r).slice(1)}`}async function ka(e){const t=await function(e){return va=va||ya(e),va}(e),n=Di().gapi;return Or(n,e,"internal-error"),t.open({where:document.body,url:Na(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xa,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Ar(e,"network-request-failed"),i=Di().setTimeout(()=>{r(s)},ba.get());function a(){Di().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const _a={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ea{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Se){}}}function Sa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},_a),{width:r.toString(),height:s.toString(),top:i,left:a}),c=Ot().toLowerCase();n&&(o=Ss(c)?"_blank":n),_s(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return As(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Ea(null);const d=window.open(t||"",o,u);Or(d,e,"popup-blocked");try{d.focus()}catch(Se){}return new Ea(d)}const Ca="__/auth/handler",ja="emulator/auth/handler",Ta=encodeURIComponent("fac");async function Ia(e,t,n,r,s,i){Or(e.config.authDomain,e,"auth-domain-config-required"),Or(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ur,eventId:s};if(t instanceof ii){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof ai){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${Ta}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Ca}`;return $r(t,ja)}(e)}?${$t(o).slice(1)}${c}`}const Aa="webStorageSupport";const Pa=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ti,this._completeRedirectFn=oa,this._overrideRedirectResult=sa}async _openPopup(e,t,n,r){var s;Mr(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Sa(e,await Ia(e,t,n,Fr(),r),Ai())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Di().location.href=e}(await Ia(e,t,n,Fr(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Mr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await ka(e),n=new la(e);return t.register("authEvent",t=>{Or(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Aa,{type:Aa},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Aa];void 0!==s&&t(!!s),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fa(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ds()||Es()||As()}};var Da="@firebase/auth",Ra="1.7.9";class Oa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Or(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const La=Dt("authIdTokenMaxAge")||300;let Ma=null;var Fa;!function(e){Bs=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ar("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Fa="Browser",ir(new Qt("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Or(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Fa,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rs(Fa)},c=new Ms(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vs);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ir(new Qt("auth-internal",e=>(e=>new Oa(e))(Fs(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),fr(Da,Ra,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Fa)),fr(Da,Ra,"esm2017");fr("firebase","10.14.1","app");var Ua,Ba,Va="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},za={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=l*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ba=za.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},Ua=za.Integer=r}).apply("undefined"!==typeof Va?Va:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var $a,qa,Ha,Wa,Ka,Ga,Qa,Ya,Xa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ja={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Xa&&Xa];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){s.setTimeout(()=>{throw e},0)}function _(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new S,e=>e.reset());class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,j=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(A)}};var A=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(Pe){k(Pe)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}j=!1};function P(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(Pe){}return e}();function O(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(Me){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,D);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}V.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=$(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,s){if(r&&r.once)return G(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!1,r,s)}function K(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[q]=l=new V(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)G(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!0,r,s)}function Q(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(i=e.g[t],n,r,s))&&(B(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,s)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[q]=null)):B(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var s=t;w(t=new D(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&z(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)B(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function be(){D.call(this,"c")}d(ve,D),d(be,D);var xe={},we=null;function Ne(){return we=we||new ne}function ke(e){D.call(this,xe.La,e)}function _e(e){const t=Ne();re(t,new ke(t))}function Ee(e,t){D.call(this,xe.STAT_EVENT,e),this.stat=t}function Ce(e){const t=Ne();re(t,new Ee(t,e))}function Ie(e,t){D.call(this,xe.Ma,e),this.size=t}function Ae(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function De(){this.g=!0}function Re(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}xe.La="serverreachability",d(ke,D),xe.STAT_EVENT="statevent",d(Ee,D),xe.Ma="timingevent",d(Ie,D),De.prototype.xa=function(){this.g=!1},De.prototype.info=function(){};var Oe,Fe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ue={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Be(){}function Ve(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ze}function ze(){this.i=null,this.g="",this.h=!1}d(Be,pe),Be.prototype.g=function(){return new XMLHttpRequest},Be.prototype.i=function(){return{}},Oe=new Be;var $e={},qe={};function He(e,t,n){e.L=1,e.v=yt(ht(t)),e.m=n,e.P=!0,We(e,null)}function We(e,t){e.F=Date.now(),Qe(e),e.A=ht(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),It(n.i,"t",r),e.C=0,n=e.j.J,e.h=new ze,e.g=vn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=W(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ke(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ge(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?qe:(n=Number(t.substring(n,r)),isNaN(n)?$e:(r+=1)+n>t.length?qe:(t=t.slice(r,r+n),e.C=r+n,t))}function Qe(e){e.S=Date.now()+e.I,Ye(e,e.I)}function Ye(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ae(c(e.ba,e),t)}function Xe(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Je(e){0==e.j.G||e.J||fn(e.j,e)}function Ze(e){Xe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function et(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||it(n.h,e)))if(!e.K&&it(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(je){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),tn(n)}cn(n),Ce(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ae(c(n.Za,n),6e3));if(1>=st(n.h)&&n.ca){try{n.ca()}catch(je){}n.ca=void 0}}else mn(n,11)}else if((e.K||n.g==e)&&hn(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(at(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,gt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=yn(r,r.J?r.ia:null,r.W),a.K){ot(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(Xe(o),Qe(o)),r.g=a}else ln(r);0<n.i.length&&rn(n)}else"stop"!=c[0]&&"close"!=c[0]||mn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?mn(n,7):en(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}_e()}catch(je){}}Ve.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Yt(e)?t.j():this.Y(e)},Ve.prototype.Y=function(e){try{if(e==this.g)e:{const h=Yt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Xt(this.g)))){this.J||4!=h||7==t||_e(),Xe(this);var n=this.g.Z();this.X=n;t:if(Ke(this)){var r=Xt(this.g);e="";var i=r.length,a=4==Yt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ze(this),Je(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ce(12),Ze(this),Je(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,et(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ge(this,o),e==qe){4==h&&(this.s=4,Ce(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==$e){this.s=4,Ce(15),Re(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),et(this,e)}if(Ke(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),un(d),d.M=!0,Ce(11))}}else Re(this.i,this.l,o,"[Invalid Chunked Response]"),Ze(this),Je(this)}else Re(this.i,this.l,o,null),et(this,o);4==h&&Ze(this),this.o&&!this.J&&(4==h?fn(this.j,this):(this.o=!1,Qe(this)))}else(function(e){const t={};e=(e.g&&2<=Yt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=N(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Ze(this),Je(this)}}}catch(Za){}},Ve.prototype.cancel=function(){this.J=!0,Ze(this)},Ve.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(_e(),Ce(17)),Ze(this),this.s=2,Je(this)):Ye(this,this.S-e)};var tt=class{constructor(e,t){this.g=e,this.map=t}};function nt(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function st(e){return e.h?1:e.g?e.g.size:0}function it(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function at(e,t){e.g?e.g.add(t):e.h=t}function ot(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function ct(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}nt.prototype.cancel=function(){if(this.i=lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof dt){this.h=e.h,ft(this,e.j),this.o=e.o,this.g=e.g,pt(this,e.s),this.l=e.l;var t=e.i,n=new St;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),mt(this,n),this.m=e.m}else e&&(t=String(e).match(ut))?(this.h=!1,ft(this,t[1]||"",!0),this.o=vt(t[2]||""),this.g=vt(t[3]||"",!0),pt(this,t[4]),this.l=vt(t[5]||"",!0),mt(this,t[6]||"",!0),this.m=vt(t[7]||"")):(this.h=!1,this.i=new St(null,this.h))}function ht(e){return new dt(e)}function ft(e,t,n){e.j=n?vt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function mt(e,t,n){t instanceof St?(e.i=t,function(e,t){t&&!e.j&&(Ct(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(jt(this,t),It(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=bt(t,_t)),e.i=new St(t,e.h))}function gt(e,t,n){e.i.set(t,n)}function yt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,xt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function xt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(bt(t,wt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(bt(t,wt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(bt(n,"/"==n.charAt(0)?kt:Nt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",bt(n,Et)),e.join("")};var wt=/[#\/\?@]/g,Nt=/[#\?:]/g,kt=/[#\?]/g,_t=/[#\?@]/g,Et=/#/g;function St(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ct(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function jt(e,t){Ct(e),t=At(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return Ct(e),t=At(e,t),e.g.has(t)}function It(e,t,n){jt(e,t),0<n.length&&(e.i=null,e.g.set(At(e,t),h(n)),e.h+=n.length)}function At(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Pt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(Me){}}function Dt(){this.g=new fe}function Rt(e,t,n){const r=n||"";try{ct(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Se){throw t.push(r+"type="+encodeURIComponent("_badmap")),Se}}function Ot(e){this.l=e.Ub||null,this.j=e.eb||!1}function Lt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Mt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ft(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ut(e)}function Ut(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Bt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Vt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Bt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):gt(e,t,n))}function zt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=St.prototype).add=function(e,t){Ct(this),this.i=null,e=At(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Ct(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Ct(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Ct(this);let t=[];if("string"===typeof e)Tt(this,e)&&(t=t.concat(this.g.get(At(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Ct(this),this.i=null,Tt(this,e=At(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(Ot,pe),Ot.prototype.g=function(){return new Lt(this.l,this.j)},Ot.prototype.i=function(e){return function(){return e}}({}),d(Lt,ne),(e=Lt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ut(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ft(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ut(this)),this.g&&(this.readyState=3,Ut(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ft(this):Ut(this),3==this.readyState&&Mt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ft(this))},e.Qa=function(e){this.g&&(this.response=e,Ft(this))},e.ga=function(){this.g&&Ft(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(zt,ne);var $t=/^https?$/i,qt=["POST","PUT"];function Ht(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Wt(e),Gt(e)}function Wt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Kt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Yt(e)||2!=e.Z()))if(e.u&&4==Yt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Yt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(ut)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!$t.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Yt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Wt(e)}}finally{Gt(e)}}}function Gt(e,t){if(e.g){Qt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Se){}}}function Qt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Yt(e){return e.g?e.g.readyState:0}function Xt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Jt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Zt(e){this.Aa=0,this.i=[],this.j=new De,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jt("baseRetryDelayMs",5e3,e),this.cb=Jt("retryDelaySeedMs",1e4,e),this.Wa=Jt("forwardChannelMaxRetries",2,e),this.wa=Jt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new nt(e&&e.concurrentRequestLimit),this.Da=new Dt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function en(e){if(nn(e),3==e.G){var t=e.U++,n=ht(e.I);if(gt(n,"SID",e.K),gt(n,"RID",t),gt(n,"TYPE","terminate"),an(e,n),(t=new Ve(e,e.j,t)).L=2,t.v=yt(ht(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(Le){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Qe(t)}gn(e)}function tn(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function nn(e){tn(e),e.u&&(s.clearTimeout(e.u),e.u=null),hn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function rn(e){if(!rt(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||I(),j||(C(),j=!0),T.add(t,e),e.B=0}}function sn(e,t){var n;n=t?t.l:e.U++;const r=ht(e.I);gt(r,"SID",e.K),gt(r,"RID",n),gt(r,"AID",e.T),an(e,r),e.m&&e.o&&Vt(r,e.m,e.o),n=new Ve(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=on(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),at(e.h,n),He(n,r,t)}function an(e,t){e.H&&v(e.H,function(e,n){gt(t,n,e)}),e.l&&ct({},function(e,n){gt(t,n,e)})}function on(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{Rt(o,e,"req"+n+"_")}catch(Za){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function ln(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||I(),j||(C(),j=!0),T.add(t,e),e.v=0}}function cn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ae(c(e.Fa,e),pn(e,e.v)),e.v++,!0)}function un(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function dn(e){e.g=new Ve(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ht(e.qa);gt(t,"RID","rpc"),gt(t,"SID",e.K),gt(t,"AID",e.T),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&gt(t,"TO",e.ja),gt(t,"TYPE","xmlhttp"),an(e,t),e.m&&e.o&&Vt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=yt(ht(t)),n.m=null,n.P=!0,We(n,e)}function hn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function fn(e,t){var n=null;if(e.g==t){hn(e),un(e),e.g=null;var r=2}else{if(!it(e.h,t))return;n=t.D,ot(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ne(),new Ie(r,n)),rn(e)}else ln(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(st(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ae(c(e.Ga,e,t),pn(e,e.B)),e.B++,!0))}(e,t)||2==r&&cn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:mn(e,5);break;case 4:mn(e,10);break;case 3:mn(e,6);break;default:mn(e,2)}}function pn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function mn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new dt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ft(r,"https"),yt(r),t?function(e,t){const n=new De;if(s.Image){const r=new Image;r.onload=u(Pt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Pt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Pt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Pt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new De;const n=new AbortController,r=setTimeout(()=>{n.abort(),Pt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Pt(0,0,!0,t):Pt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Pt(0,0,!1,t)})}(r.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),gn(e),nn(e)}function gn(e){if(e.G=0,e.ka=[],e.l){const t=lt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function yn(e,t,n){var r=n instanceof dt?ht(n):new dt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),pt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new dt(null);r&&ft(a,r),t&&(a.g=t),i&&pt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&gt(r,n,t),gt(r,"VER",e.la),an(e,r),r}function vn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new zt(new Ot({eb:n})):new zt(e.pa)).Ha(e.J),t}function bn(){}function xn(){}function wn(e,t){ne.call(this),this.g=new Zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _n(this)}function Nn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function kn(){be.call(this),this.status=1}function _n(e){this.g=e}(e=zt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oe.g(),this.v=this.o?me(this.o):me(Oe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Me){return void Ht(this,Me)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(qt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(Me){Ht(this,Me)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Gt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gt(this,!0)),zt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Kt(this):this.bb())},e.bb=function(){Kt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch(Te){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Te){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Zt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ce(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=yn(this,null,this.W),rn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Ve(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=on(this,s,t),gt(n=ht(this.I),"RID",e),gt(n,"CVER",22),this.D&&gt(n,"X-HTTP-Session-Id",this.D),an(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Bt(i)))+"&"+t:this.m&&Vt(n,this.m,i)),at(this.h,s),this.Ua&&gt(n,"TYPE","init"),this.P?(gt(n,"$req",t),gt(n,"SID","null"),s.T=!0,He(s,n,null)):He(s,n,t),this.G=2}}else 3==this.G&&(e?sn(this,e):0==this.i.length||rt(this.h)||sn(this))},e.Fa=function(){if(this.u=null,dn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ae(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),tn(this),dn(this))},e.Za=function(){null!=this.C&&(this.C=null,tn(this),cn(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},xn.prototype.g=function(e,t){return new wn(e,t)},d(wn,ne),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){en(this.g)},wn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new tt(t.Ya++,e)),3==t.G&&rn(t)},wn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,wn.aa.N.call(this)},d(Nn,ve),d(kn,be),d(_n,bn),_n.prototype.ua=function(){re(this.g,"a")},_n.prototype.ta=function(e){re(this.g,new Nn(e))},_n.prototype.sa=function(e){re(this.g,new kn)},_n.prototype.ra=function(){re(this.g,"b")},xn.prototype.createWebChannel=xn.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,Ya=Ja.createWebChannelTransport=function(){return new xn},Qa=Ja.getStatEventTarget=function(){return Ne()},Ga=Ja.Event=xe,Ka=Ja.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,Wa=Ja.ErrorCode=Fe,Ue.COMPLETE="complete",Ha=Ja.EventType=Ue,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,qa=Ja.WebChannel=ge,Ja.FetchXmlHttpFactory=Ot,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,$a=Ja.XhrIo=zt}).apply("undefined"!==typeof Xa?Xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Za="@firebase/firestore";class eo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}eo.UNAUTHENTICATED=new eo(null),eo.GOOGLE_CREDENTIALS=new eo("google-credentials-uid"),eo.FIRST_PARTY=new eo("first-party-uid"),eo.MOCK_USER=new eo("mock-user");let to="10.14.0";const no=new an("@firebase/firestore");function ro(){return no.logLevel}function so(e){if(no.logLevel<=en.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(oo);no.debug(`Firestore (${to}): ${e}`,...s)}}function io(e){if(no.logLevel<=en.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(oo);no.error(`Firestore (${to}): ${e}`,...s)}}function ao(e){if(no.logLevel<=en.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(oo);no.warn(`Firestore (${to}): ${e}`,...s)}}function oo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Ce){return e}}function lo(){const e=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw io(e),new Error(e)}function co(e,t){e||lo()}function uo(e,t){return e}const ho={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fo extends Ft{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class po{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class go{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(eo.UNAUTHENTICATED))}shutdown(){}}class yo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vo{constructor(e){this.t=e,this.currentUser=eo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){co(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new po;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new po,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{so("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(so("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new po)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(so("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(co("string"==typeof t.accessToken),new mo(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return co(null===e||"string"==typeof e),new eo(e)}}class bo{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=eo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xo{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new bo(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(eo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class No{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){co(void 0===this.o);const n=e=>{null!=e.error&&so("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,so("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{so("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):so("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(co("string"==typeof e.token),this.R=e.token,new wo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ko(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class _o{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ko(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function Eo(e,t){return e<t?-1:e>t?1:0}function So(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Co{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fo(ho.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fo(ho.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fo(ho.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fo(ho.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Co.fromMillis(Date.now())}static fromDate(e){return Co.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Co(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Eo(this.nanoseconds,e.nanoseconds):Eo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class jo{constructor(e){this.timestamp=e}static fromTimestamp(e){return new jo(e)}static min(){return new jo(new Co(0,0))}static max(){return new jo(new Co(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class To{constructor(e,t,n){void 0===t?t=0:t>e.length&&lo(),void 0===n?n=e.length-t:n>e.length-t&&lo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===To.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof To?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Io extends To{construct(e,t,n){return new Io(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new fo(ho.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(e=>e.length>0))}return new Io(e)}static emptyPath(){return new Io([])}}const Ao=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Po extends To{construct(e,t,n){return new Po(e,t,n)}static isValidIdentifier(e){return Ao.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Po.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Po(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new fo(ho.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new fo(ho.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new fo(ho.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new fo(ho.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Po(t)}static emptyPath(){return new Po([])}}class Do{constructor(e){this.path=e}static fromPath(e){return new Do(Io.fromString(e))}static fromName(e){return new Do(Io.fromString(e).popFirst(5))}static empty(){return new Do(Io.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Io.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Io.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Do(new Io(e.slice()))}}class Ro{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Ro.UNKNOWN_ID=-1;function Oo(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=jo.fromTimestamp(1e9===r?new Co(n+1,0):new Co(n,r));return new Mo(s,Do.empty(),t)}function Lo(e){return new Mo(e.readTime,e.key,-1)}class Mo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Mo(jo.min(),Do.empty(),-1)}static max(){return new Mo(jo.max(),Do.empty(),-1)}}function Fo(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Do.comparator(e.documentKey,t.documentKey),0!==n?n:Eo(e.largestBatchId,t.largestBatchId))}const Uo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Vo(e){if(e.code!==ho.FAILED_PRECONDITION||e.message!==Uo)throw e;so("LocalStore","Unexpectedly lost primary lease")}class zo{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new zo((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof zo?t:zo.resolve(t)}catch(e){return zo.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):zo.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):zo.reject(t)}static resolve(e){return new zo((t,n)=>{t(e)})}static reject(e){return new zo((t,n)=>{n(e)})}static waitFor(e){return new zo((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=zo.resolve(!1);for(const n of e)t=t.next(e=>e?zo.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new zo((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new zo((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function $o(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qo(e){return"IndexedDbTransactionError"===e.name}class Ho{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Wo(e){return null==e}function Ko(e){return 0===e&&1/e==-1/0}function Go(e){return"number"==typeof e&&Number.isInteger(e)&&!Ko(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Ho.oe=-1;const Qo=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Yo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xo=Yo,Jo=[...Xo,"indexConfiguration","indexState","indexEntries"];function Zo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function el(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function tl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class nl{constructor(e,t){this.comparator=e,this.root=t||sl.EMPTY}insert(e,t){return new nl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sl.BLACK,null,null))}remove(e){return new nl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rl(this.root,e,this.comparator,!0)}}class rl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sl{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:sl.RED,this.left=null!=r?r:sl.EMPTY,this.right=null!=s?s:sl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new sl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return sl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return sl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lo();if(this.right.isRed())throw lo();const e=this.left.check();if(e!==this.right.check())throw lo();return e+(this.isRed()?0:1)}}sl.EMPTY=null,sl.RED=!0,sl.BLACK=!1,sl.EMPTY=new class{constructor(){this.size=0}get key(){throw lo()}get value(){throw lo()}get color(){throw lo()}get left(){throw lo()}get right(){throw lo()}copy(e,t,n,r,s){return this}insert(e,t,n){return new sl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class il{constructor(e){this.comparator=e,this.data=new nl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new al(this.data.getIterator())}getIteratorFrom(e){return new al(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof il))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new il(this.comparator);return t.data=e,t}}class al{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ol{constructor(e){this.fields=e,e.sort(Po.comparator)}static empty(){return new ol([])}unionWith(e){let t=new il(Po.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ol(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ll extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class cl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ll("Invalid base64 string: "+e):e}}(e);return new cl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new cl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Eo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cl.EMPTY_BYTE_STRING=new cl("");const ul=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dl(e){if(co(!!e),"string"==typeof e){let t=0;const n=ul.exec(e);if(co(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:hl(e.seconds),nanos:hl(e.nanos)}}function hl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function fl(e){return"string"==typeof e?cl.fromBase64String(e):cl.fromUint8Array(e)}function pl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ml(e){const t=e.mapValue.fields.__previous_value__;return pl(t)?ml(t):t}function gl(e){const t=dl(e.mapValue.fields.__local_write_time__.timestampValue);return new Co(t.seconds,t.nanos)}class yl{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class vl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vl&&e.projectId===this.projectId&&e.database===this.database}}const bl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?pl(e)?4:Ll(e)?9007199254740991:Rl(e)?10:11:lo()}function wl(e,t){if(e===t)return!0;const n=xl(e);if(n!==xl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return gl(e).isEqual(gl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=dl(e.timestampValue),r=dl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return fl(e.bytesValue).isEqual(fl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return hl(e.geoPointValue.latitude)===hl(t.geoPointValue.latitude)&&hl(e.geoPointValue.longitude)===hl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return hl(e.integerValue)===hl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=hl(e.doubleValue),r=hl(t.doubleValue);return n===r?Ko(n)===Ko(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return So(e.arrayValue.values||[],t.arrayValue.values||[],wl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Zo(n)!==Zo(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!wl(n[s],r[s])))return!1;return!0}(e,t);default:return lo()}}function Nl(e,t){return void 0!==(e.values||[]).find(e=>wl(e,t))}function kl(e,t){if(e===t)return 0;const n=xl(e),r=xl(t);if(n!==r)return Eo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Eo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=hl(e.integerValue||e.doubleValue),r=hl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _l(e.timestampValue,t.timestampValue);case 4:return _l(gl(e),gl(t));case 5:return Eo(e.stringValue,t.stringValue);case 6:return function(e,t){const n=fl(e),r=fl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Eo(n[s],r[s]);if(0!==e)return e}return Eo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Eo(hl(e.latitude),hl(t.latitude));return 0!==n?n:Eo(hl(e.longitude),hl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return El(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=Eo((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:El(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===bl.mapValue&&t===bl.mapValue)return 0;if(e===bl.mapValue)return 1;if(t===bl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Eo(r[a],i[a]);if(0!==e)return e;const t=kl(n[r[a]],s[i[a]]);if(0!==t)return t}return Eo(r.length,i.length)}(e.mapValue,t.mapValue);default:throw lo()}}function _l(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Eo(e,t);const n=dl(e),r=dl(t),s=Eo(n.seconds,r.seconds);return 0!==s?s:Eo(n.nanos,r.nanos)}function El(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=kl(n[s],r[s]);if(e)return e}return Eo(n.length,r.length)}function Sl(e){return Cl(e)}function Cl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=dl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return fl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Do.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Cl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${Cl(e.fields[s])}`;return n+"}"}(e.mapValue):lo()}function jl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Tl(e){return!!e&&"integerValue"in e}function Il(e){return!!e&&"arrayValue"in e}function Al(e){return!!e&&"nullValue"in e}function Pl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Dl(e){return!!e&&"mapValue"in e}function Rl(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ol(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return el(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ol(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ol(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ll(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ml{constructor(e){this.value=e}static empty(){return new Ml({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Dl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(t)}setAll(e){let t=Po.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Ol(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Dl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Dl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){el(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ml(Ol(this.value))}}function Fl(e){const t=[];return el(e.fields,(e,n)=>{const r=new Po([e]);if(Dl(n)){const e=Fl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ol(t)}class Ul{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Ul(e,0,jo.min(),jo.min(),jo.min(),Ml.empty(),0)}static newFoundDocument(e,t,n,r){return new Ul(e,1,t,jo.min(),n,r,0)}static newNoDocument(e,t){return new Ul(e,2,t,jo.min(),jo.min(),Ml.empty(),0)}static newUnknownDocument(e,t){return new Ul(e,3,t,jo.min(),jo.min(),Ml.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(jo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ml.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ml.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jo.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ul&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ul(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bl{constructor(e,t){this.position=e,this.inclusive=t}}function Vl(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?Do.comparator(Do.fromName(a.referenceValue),n.key):kl(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function zl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!wl(e.position[n],t.position[n]))return!1;return!0}class $l{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ql(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Hl{}class Wl extends Hl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ec(e,t,n):"array-contains"===t?new sc(e,n):"in"===t?new ic(e,n):"not-in"===t?new ac(e,n):"array-contains-any"===t?new oc(e,n):new Wl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new tc(e,n):new nc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(kl(t,this.value)):null!==t&&xl(this.value)===xl(t)&&this.matchesComparison(kl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kl extends Hl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Kl(e,t)}matches(e){return Gl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Gl(e){return"and"===e.op}function Ql(e){return Yl(e)&&Gl(e)}function Yl(e){for(const t of e.filters)if(t instanceof Kl)return!1;return!0}function Xl(e){if(e instanceof Wl)return e.field.canonicalString()+e.op.toString()+Sl(e.value);if(Ql(e))return e.filters.map(e=>Xl(e)).join(",");{const t=e.filters.map(e=>Xl(e)).join(",");return`${e.op}(${t})`}}function Jl(e,t){return e instanceof Wl?function(e,t){return t instanceof Wl&&e.op===t.op&&e.field.isEqual(t.field)&&wl(e.value,t.value)}(e,t):e instanceof Kl?function(e,t){return t instanceof Kl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Jl(n,t.filters[r]),!0)}(e,t):void lo()}function Zl(e){return e instanceof Wl?function(e){return`${e.field.canonicalString()} ${e.op} ${Sl(e.value)}`}(e):e instanceof Kl?function(e){return e.op.toString()+" {"+e.getFilters().map(Zl).join(" ,")+"}"}(e):"Filter"}class ec extends Wl{constructor(e,t,n){super(e,t,n),this.key=Do.fromName(n.referenceValue)}matches(e){const t=Do.comparator(e.key,this.key);return this.matchesComparison(t)}}class tc extends Wl{constructor(e,t){super(e,"in",t),this.keys=rc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nc extends Wl{constructor(e,t){super(e,"not-in",t),this.keys=rc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Do.fromName(e.referenceValue))}class sc extends Wl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Il(t)&&Nl(t.arrayValue,this.value)}}class ic extends Wl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Nl(this.value.arrayValue,t)}}class ac extends Wl{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Nl(this.value.arrayValue,t)}}class oc extends Wl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Il(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Nl(this.value.arrayValue,e))}}class lc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function cc(e){return new lc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function uc(e){const t=uo(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Xl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Wo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Sl(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Sl(e)).join(",")),t.ue=e}return t.ue}function dc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ql(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Jl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zl(e.startAt,t.startAt)&&zl(e.endAt,t.endAt)}function hc(e){return Do.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class fc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function pc(e,t,n,r,s,i,a,o){return new fc(e,t,n,r,s,i,a,o)}function mc(e){return new fc(e)}function gc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function yc(e){return null!==e.collectionGroup}function vc(e){const t=uo(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new il(Po.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new $l(r,n))}),e.has(Po.keyField().canonicalString())||t.ce.push(new $l(Po.keyField(),n))}return t.ce}function bc(e){const t=uo(e);return t.le||(t.le=xc(t,vc(e))),t.le}function xc(e,t){if("F"===e.limitType)return cc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new $l(e.field,t)});const n=e.endAt?new Bl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Bl(e.startAt.position,e.startAt.inclusive):null;return cc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function wc(e,t){const n=e.filters.concat([t]);return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Nc(e,t,n){return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function kc(e,t){return dc(bc(e),bc(t))&&e.limitType===t.limitType}function _c(e){return`${uc(bc(e))}|lt:${e.limitType}`}function Ec(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Zl(e)).join(", ")}]`),Wo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Sl(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Sl(e)).join(",")),`Target(${t})`}(bc(e))}; limitType=${e.limitType})`}function Sc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Do.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of vc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Vl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vc(e),t))&&!(e.endAt&&!function(e,t,n){const r=Vl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vc(e),t))}(e,t)}function Cc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function jc(e){return(t,n)=>{let r=!1;for(const s of vc(e)){const e=Tc(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Tc(e,t,n){const r=e.field.isKeyField()?Do.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?kl(r,s):lo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return lo()}}class Ic{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){el(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return tl(this.inner)}size(){return this.innerSize}}const Ac=new nl(Do.comparator);function Pc(){return Ac}const Dc=new nl(Do.comparator);function Rc(){let e=Dc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Oc(e){let t=Dc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Lc(){return Fc()}function Mc(){return Fc()}function Fc(){return new Ic(e=>e.toString(),(e,t)=>e.isEqual(t))}const Uc=new nl(Do.comparator),Bc=new il(Do.comparator);function Vc(){let e=Bc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const zc=new il(Eo);function $c(){return zc}function qc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ko(t)?"-0":t}}function Hc(e){return{integerValue:""+e}}function Wc(e,t){return Go(t)?Hc(t):qc(e,t)}class Kc{constructor(){this._=void 0}}function Gc(e,t,n){return e instanceof Xc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&pl(t)&&(t=ml(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Jc?Zc(e,t):e instanceof eu?tu(e,t):function(e,t){const n=Yc(e,t),r=ru(n)+ru(e.Pe);return Tl(n)&&Tl(e.Pe)?Hc(r):qc(e.serializer,r)}(e,t)}function Qc(e,t,n){return e instanceof Jc?Zc(e,t):e instanceof eu?tu(e,t):n}function Yc(e,t){return e instanceof nu?function(e){return Tl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Xc extends Kc{}class Jc extends Kc{constructor(e){super(),this.elements=e}}function Zc(e,t){const n=su(t);for(const r of e.elements)n.some(e=>wl(e,r))||n.push(r);return{arrayValue:{values:n}}}class eu extends Kc{constructor(e){super(),this.elements=e}}function tu(e,t){let n=su(t);for(const r of e.elements)n=n.filter(e=>!wl(e,r));return{arrayValue:{values:n}}}class nu extends Kc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ru(e){return hl(e.integerValue||e.doubleValue)}function su(e){return Il(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class iu{constructor(e,t){this.field=e,this.transform=t}}class au{constructor(e,t){this.version=e,this.transformResults=t}}class ou{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ou}static exists(e){return new ou(void 0,e)}static updateTime(e){return new ou(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class cu{}function uu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new xu(e.key,ou.none()):new mu(e.key,e.data,ou.none());{const n=e.data,r=Ml.empty();let s=new il(Po.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new gu(e.key,r,new ol(s.toArray()),ou.none())}}function du(e,t,n){e instanceof mu?function(e,t,n){const r=e.value.clone(),s=vu(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof gu?function(e,t,n){if(!lu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=vu(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(yu(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function hu(e,t,n,r){return e instanceof mu?function(e,t,n,r){if(!lu(e.precondition,t))return n;const s=e.value.clone(),i=bu(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof gu?function(e,t,n,r){if(!lu(e.precondition,t))return n;const s=bu(e.fieldTransforms,r,t),i=t.data;return i.setAll(yu(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return lu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function fu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Yc(r.transform,e||null);null!=s&&(null===n&&(n=Ml.empty()),n.set(r.field,s))}return n||null}function pu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&So(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Jc&&t instanceof Jc||e instanceof eu&&t instanceof eu?So(e.elements,t.elements,wl):e instanceof nu&&t instanceof nu?wl(e.Pe,t.Pe):e instanceof Xc&&t instanceof Xc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class mu extends cu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class gu extends cu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yu(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function vu(e,t,n){const r=new Map;co(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Qc(a,o,n[s]))}return r}function bu(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Gc(e,i,t))}return r}class xu extends cu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wu extends cu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&du(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=hu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=hu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Mc();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=uu(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(jo.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vc())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,(e,t)=>pu(e,t))&&So(this.baseMutations,e.baseMutations,(e,t)=>pu(e,t))}}class ku{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){co(e.mutations.length===n.length);let r=Uc;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new ku(e,t,n,r)}}class _u{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Eu{constructor(e,t){this.count=e,this.unchangedNames=t}}var Su,Cu;function ju(e){switch(e){default:return lo();case ho.CANCELLED:case ho.UNKNOWN:case ho.DEADLINE_EXCEEDED:case ho.RESOURCE_EXHAUSTED:case ho.INTERNAL:case ho.UNAVAILABLE:case ho.UNAUTHENTICATED:return!1;case ho.INVALID_ARGUMENT:case ho.NOT_FOUND:case ho.ALREADY_EXISTS:case ho.PERMISSION_DENIED:case ho.FAILED_PRECONDITION:case ho.ABORTED:case ho.OUT_OF_RANGE:case ho.UNIMPLEMENTED:case ho.DATA_LOSS:return!0}}function Tu(e){if(void 0===e)return io("GRPC error has no .code"),ho.UNKNOWN;switch(e){case Su.OK:return ho.OK;case Su.CANCELLED:return ho.CANCELLED;case Su.UNKNOWN:return ho.UNKNOWN;case Su.DEADLINE_EXCEEDED:return ho.DEADLINE_EXCEEDED;case Su.RESOURCE_EXHAUSTED:return ho.RESOURCE_EXHAUSTED;case Su.INTERNAL:return ho.INTERNAL;case Su.UNAVAILABLE:return ho.UNAVAILABLE;case Su.UNAUTHENTICATED:return ho.UNAUTHENTICATED;case Su.INVALID_ARGUMENT:return ho.INVALID_ARGUMENT;case Su.NOT_FOUND:return ho.NOT_FOUND;case Su.ALREADY_EXISTS:return ho.ALREADY_EXISTS;case Su.PERMISSION_DENIED:return ho.PERMISSION_DENIED;case Su.FAILED_PRECONDITION:return ho.FAILED_PRECONDITION;case Su.ABORTED:return ho.ABORTED;case Su.OUT_OF_RANGE:return ho.OUT_OF_RANGE;case Su.UNIMPLEMENTED:return ho.UNIMPLEMENTED;case Su.DATA_LOSS:return ho.DATA_LOSS;default:return lo()}}(Cu=Su||(Su={}))[Cu.OK=0]="OK",Cu[Cu.CANCELLED=1]="CANCELLED",Cu[Cu.UNKNOWN=2]="UNKNOWN",Cu[Cu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cu[Cu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cu[Cu.NOT_FOUND=5]="NOT_FOUND",Cu[Cu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cu[Cu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cu[Cu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cu[Cu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cu[Cu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cu[Cu.ABORTED=10]="ABORTED",Cu[Cu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cu[Cu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cu[Cu.INTERNAL=13]="INTERNAL",Cu[Cu.UNAVAILABLE=14]="UNAVAILABLE",Cu[Cu.DATA_LOSS=15]="DATA_LOSS";let Iu=null;function Au(){return new TextEncoder}const Pu=new Ua([4294967295,4294967295],0);function Du(e){const t=Au().encode(e),n=new Ba;return n.update(t),new Uint8Array(n.digest())}function Ru(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Ua([n,r],0),new Ua([s,i],0)]}class Ou{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Lu(`Invalid padding: ${t}`);if(n<0)throw new Lu(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Lu(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Lu(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ua.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Ua.fromNumber(n)));return 1===r.compare(Pu)&&(r=new Ua([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Du(e),[n,r]=Ru(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Ou(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=Du(e),[n,r]=Ru(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Mu{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Mu(jo.min(),r,new nl(Eo),Pc(),Vc())}}class Fu{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Fu(n,t,Vc(),Vc(),Vc())}}class Uu{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Bu{constructor(e,t){this.targetId=e,this.me=t}}class Vu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class zu{constructor(){this.fe=0,this.ge=Hu(),this.pe=cl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Vc(),t=Vc(),n=Vc();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:lo()}}),new Fu(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Hu()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,co(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $u{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pc(),this.qe=qu(),this.Qe=new nl(Eo)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:lo()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(hc(s))if(0===n){const e=new Do(s.path);this.Ue(t,e,Ul.newNoDocument(e,jo.min()))}else co(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Iu||Iu.et(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=fl(n).toUint8Array()}catch(e){if(e instanceof ll)return ao("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Ou(i,r,s)}catch(e){return ao(e instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&hc(s.target)){const t=new Do(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Ul.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=Vc();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new Mu(e,t,this.Qe,this.ke,n);return this.ke=Pc(),this.qe=qu(),this.Qe=new nl(Eo),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new zu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new il(Eo),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||so("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function qu(){return new nl(Do.comparator)}function Hu(){return new nl(Do.comparator)}const Wu={asc:"ASCENDING",desc:"DESCENDING"},Ku={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gu={and:"AND",or:"OR"};class Qu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yu(e,t){return e.useProto3Json||Wo(t)?t:{value:t}}function Xu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ju(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Zu(e,t){return Xu(e,t.toTimestamp())}function ed(e){return co(!!e),jo.fromTimestamp(function(e){const t=dl(e);return new Co(t.seconds,t.nanos)}(e))}function td(e,t){return nd(e,t).canonicalString()}function nd(e,t){const n=function(e){return new Io(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function rd(e){const t=Io.fromString(e);return co(kd(t)),t}function sd(e,t){return td(e.databaseId,t.path)}function id(e,t){const n=rd(t);if(n.get(1)!==e.databaseId.projectId)throw new fo(ho.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fo(ho.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Do(cd(n))}function ad(e,t){return td(e.databaseId,t)}function od(e){const t=rd(e);return 4===t.length?Io.emptyPath():cd(t)}function ld(e){return new Io(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cd(e){return co(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ud(e,t,n){return{name:sd(e,t),fields:n.value.mapValue.fields}}function dd(e,t){let n;if(t instanceof mu)n={update:ud(e,t.key,t.value)};else if(t instanceof xu)n={delete:sd(e,t.key)};else if(t instanceof gu)n={update:ud(e,t.key,t.data),updateMask:Nd(t.fieldMask)};else{if(!(t instanceof wu))return lo();n={verify:sd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Xc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Jc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof eu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof nu)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw lo()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:lo()}(e,t.precondition)),n}function hd(e,t){return{documents:[ad(e,t.path)]}}function fd(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ad(e,s);const i=function(e){if(0!==e.length)return wd(Kl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:bd(e.field),direction:gd(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Yu(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function pd(e){let t=od(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){co(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=md(e);return t instanceof Kl&&Ql(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new $l(xd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Wo(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Bl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Bl(n,t)}(n.endAt)),pc(t,s,a,i,o,"F",l,c)}function md(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xd(e.unaryFilter.field);return Wl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=xd(e.unaryFilter.field);return Wl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xd(e.unaryFilter.field);return Wl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xd(e.unaryFilter.field);return Wl.create(s,"!=",{nullValue:"NULL_VALUE"});default:return lo()}}(e):void 0!==e.fieldFilter?function(e){return Wl.create(xd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Kl.create(e.compositeFilter.filters.map(e=>md(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return lo()}}(e.compositeFilter.op))}(e):lo()}function gd(e){return Wu[e]}function yd(e){return Ku[e]}function vd(e){return Gu[e]}function bd(e){return{fieldPath:e.canonicalString()}}function xd(e){return Po.fromServerFormat(e.fieldPath)}function wd(e){return e instanceof Wl?function(e){if("=="===e.op){if(Pl(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NAN"}};if(Al(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Pl(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NOT_NAN"}};if(Al(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bd(e.field),op:yd(e.op),value:e.value}}}(e):e instanceof Kl?function(e){const t=e.getFilters().map(e=>wd(e));return 1===t.length?t[0]:{compositeFilter:{op:vd(e.op),filters:t}}}(e):lo()}function Nd(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function kd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class _d{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jo.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:jo.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:cl.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new _d(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _d(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ed{constructor(e){this.ct=e}}function Sd(e){const t=pd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Nc(t,t.limit,"L"):t}class Cd{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(hl(e.integerValue));else if("doubleValue"in e){const n=hl(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Ko(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=dl(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(fl(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Ll(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Rl(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):lo()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(hl(a)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Do.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Cd.vt=new Cd;class jd{constructor(){this.un=new Td}addToCollectionParentIndex(e,t){return this.un.add(t),zo.resolve()}getCollectionParents(e,t){return zo.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return zo.resolve()}deleteFieldIndex(e,t){return zo.resolve()}deleteAllFieldIndexes(e){return zo.resolve()}createTargetIndexes(e,t){return zo.resolve()}getDocumentsMatchingTarget(e,t){return zo.resolve(null)}getIndexType(e,t){return zo.resolve(0)}getFieldIndexes(e,t){return zo.resolve([])}getNextCollectionGroupToUpdate(e){return zo.resolve(null)}getMinOffset(e,t){return zo.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,t){return zo.resolve(Mo.min())}updateCollectionGroup(e,t,n){return zo.resolve()}updateIndexEntries(e,t){return zo.resolve()}}class Td{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new il(Io.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new il(Io.comparator)).toArray()}}new Uint8Array(0);class Id{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Id(e,Id.DEFAULT_COLLECTION_PERCENTILE,Id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Id.DEFAULT_COLLECTION_PERCENTILE=10,Id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Id.DEFAULT=new Id(41943040,Id.DEFAULT_COLLECTION_PERCENTILE,Id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Id.DISABLED=new Id(-1,0,0);class Ad{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ad(0)}static kn(){return new Ad(-1)}}class Pd{constructor(){this.changes=new Ic(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ul.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?zo.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Dd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Rd{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&hu(n.mutation,e,ol.empty(),Co.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Vc()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vc();const r=Lc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Rc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Lc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Vc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Pc();const i=Fc(),a=Fc();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof gu)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),hu(a.mutation,t,a.mutation.getFieldMask(),Co.now())):i.set(t.key,ol.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Dd(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Fc();let r=new nl((e,t)=>e-t),s=Vc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||ol.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Vc()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Mc();l.forEach(e=>{if(!s.has(e)){const r=uu(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return zo.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Do.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):zo.resolve(Lc());let a=-1,o=s;return i.next(t=>zo.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?zo.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,Vc())).next(e=>({batchId:a,changes:Oc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Do(t)).next(e=>{let t=Rc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Rc();return this.indexManager.getCollectionParents(e,s).next(a=>zo.forEach(a,a=>{const o=function(e,t){return new fc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ul.newInvalidDocument(r)))});let n=Rc();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&hu(i.mutation,r,ol.empty(),Co.now()),Sc(t,r)&&(n=n.insert(e,r))}),n})}}class Od{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return zo.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ed(e.createTime)}}(t)),zo.resolve()}getNamedQuery(e,t){return zo.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Sd(e.bundledQuery),readTime:ed(e.readTime)}}(t)),zo.resolve()}}class Ld{constructor(){this.overlays=new nl(Do.comparator),this.Ir=new Map}getOverlay(e,t){return zo.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Lc();return zo.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),zo.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),zo.resolve()}getOverlaysForCollection(e,t,n){const r=Lc(),s=t.length+1,i=new Do(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return zo.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new nl((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Lc(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Lc(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return zo.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new _u(t,n));let s=this.Ir.get(t);void 0===s&&(s=Vc(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class Md{constructor(){this.sessionToken=cl.EMPTY_BYTE_STRING}getSessionToken(e){return zo.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,zo.resolve()}}class Fd{constructor(){this.Tr=new il(Ud.Er),this.dr=new il(Ud.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Ud(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Ud(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Do(new Io([])),n=new Ud(t,e),r=new Ud(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Do(new Io([])),n=new Ud(t,e),r=new Ud(t,e+1);let s=Vc();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Ud(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ud{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Do.comparator(e.key,t.key)||Eo(e.wr,t.wr)}static Ar(e,t){return Eo(e.wr,t.wr)||Do.comparator(e.key,t.key)}}class Bd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new il(Ud.Er)}checkEmpty(e){return zo.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Nu(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new Ud(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return zo.resolve(i)}lookupMutationBatch(e,t){return zo.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return zo.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return zo.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return zo.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ud(t,0),r=new Ud(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),zo.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new il(Eo);return t.forEach(e=>{const t=new Ud(e,0),r=new Ud(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),zo.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Do.isDocumentKey(s)||(s=s.child(""));const i=new Ud(new Do(s),0);let a=new il(Eo);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),zo.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){co(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return zo.forEach(t.mutations,r=>{const s=new Ud(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Ud(t,0),r=this.br.firstAfterOrEqual(n);return zo.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,zo.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vd{constructor(e){this.Mr=e,this.docs=new nl(Do.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return zo.resolve(n?n.document.mutableCopy():Ul.newInvalidDocument(t))}getEntries(e,t){let n=Pc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ul.newInvalidDocument(e))}),zo.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Pc();const i=t.path,a=new Do(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Fo(Lo(a),n)<=0||(r.has(a.key)||Sc(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return zo.resolve(s)}getAllFromCollectionGroup(e,t,n,r){lo()}Or(e,t){return zo.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new zd(this)}getSize(e){return zo.resolve(this.size)}}class zd extends Pd{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),zo.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class $d{constructor(e){this.persistence=e,this.Nr=new Ic(e=>uc(e),dc),this.lastRemoteSnapshotVersion=jo.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Fd,this.targetCount=0,this.kr=Ad.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),zo.resolve()}getLastRemoteSnapshotVersion(e){return zo.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return zo.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),zo.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),zo.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ad(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,zo.resolve()}updateTargetData(e,t){return this.Kn(t),zo.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,zo.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),zo.waitFor(s).next(()=>r)}getTargetCount(e){return zo.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return zo.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),zo.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),zo.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),zo.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return zo.resolve(n)}containsKey(e,t){return zo.resolve(this.Br.containsKey(t))}}class qd{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ho(0),this.Kr=!1,this.Kr=!0,this.$r=new Md,this.referenceDelegate=e(this),this.Ur=new $d(this),this.indexManager=new jd,this.remoteDocumentCache=function(e){return new Vd(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Ed(t),this.Gr=new Od(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ld,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Bd(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){so("MemoryPersistence","Starting transaction:",e);const r=new Hd(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return zo.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Hd extends Bo{constructor(e){super(),this.currentSequenceNumber=e}}class Wd{constructor(e){this.persistence=e,this.Jr=new Fd,this.Yr=null}static Zr(e){return new Wd(e)}get Xr(){if(this.Yr)return this.Yr;throw lo()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),zo.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),zo.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),zo.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return zo.forEach(this.Xr,n=>{const r=Do.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,jo.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return zo.or([()=>zo.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Kd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Vc(),r=Vc();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Kd(e,t.fromCache,n,r)}}class Gd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Qd{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=Lt()?8:$o(Ot())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Gd;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(ro()<=en.DEBUG&&so("QueryEngine","SDK will not create cache indexes for query:",Ec(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),zo.resolve()):(ro()<=en.DEBUG&&so("QueryEngine","Query:",Ec(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(ro()<=en.DEBUG&&so("QueryEngine","The SDK decides to create cache indexes for query:",Ec(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bc(t))):zo.resolve())}Yi(e,t){if(gc(t))return zo.resolve(null);let n=bc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Nc(t,null,"F"),n=bc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Vc(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,Nc(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return gc(t)||r.isEqual(jo.min())?zo.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?zo.resolve(null):(ro()<=en.DEBUG&&so("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ec(t)),this.rs(e,i,t,Oo(r,-1)).next(e=>e))})}ts(e,t){let n=new il(jc(e));return t.forEach((t,r)=>{Sc(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return ro()<=en.DEBUG&&so("QueryEngine","Using full collection scan to execute query:",Ec(t)),this.Ji.getDocumentsMatchingQuery(e,t,Mo.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Yd{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new nl(Eo),this._s=new Ic(e=>uc(e),dc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Xd(e,t,n,r){return new Yd(e,t,n,r)}async function Jd(e,t){const n=uo(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=Vc();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function Zd(e){const t=uo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function eh(e,t,n){let r=Vc(),s=Vc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Pc();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(jo.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):so("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function th(e,t){const n=uo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function nh(e,t){const n=uo(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,zo.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new _d(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function rh(e,t,n){const r=uo(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!qo(e))throw e;so("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(s.target)}function sh(e,t,n){const r=uo(e);let s=jo.min(),i=Vc();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=uo(e),s=r._s.get(n);return void 0!==s?zo.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,bc(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:jo.min(),n?i:Vc())).next(e=>(ih(r,Cc(t),e),{documents:e,Ts:i})))}function ih(e,t,n){let r=e.us.get(t)||jo.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class ah{constructor(){this.activeTargetIds=$c()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oh{constructor(){this.so=new ah,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ah,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lh{_o(e){}shutdown(){}}class ch{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){so("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){so("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uh=null;function dh(){return null===uh?uh=268435456+Math.round(2147483648*Math.random()):uh++,"0x"+uh.toString(16)}const hh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fh{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const ph="WebChannelConnection";class mh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,s){const i=dh(),a=this.xo(e,t.toUriEncodedString());so("RestConnection",`Sending RPC '${e}' ${i}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,s),this.No(e,a,o,n).then(t=>(so("RestConnection",`Received RPC '${e}' ${i}: `,t),t),t=>{throw ao("RestConnection",`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+to,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=hh[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=dh();return new Promise((i,a)=>{const o=new $a;o.setWithCredentials(!0),o.listenOnce(Ha.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Wa.NO_ERROR:const t=o.getResponseJson();so(ph,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case Wa.TIMEOUT:so(ph,`RPC '${e}' ${s} timed out`),a(new fo(ho.DEADLINE_EXCEEDED,"Request time out"));break;case Wa.HTTP_ERROR:const n=o.getStatus();if(so(ph,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ho).indexOf(t)>=0?t:ho.UNKNOWN}(t.status);a(new fo(e,t.message))}else a(new fo(ho.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new fo(ho.UNAVAILABLE,"Connection failed."));break;default:lo()}}finally{so(ph,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);so(ph,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=dh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ya(),a=Qa(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");so(ph,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=i.createWebChannel(c,o);let d=!1,h=!1;const f=new fh({Io:t=>{h?so(ph,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(so(ph,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),so(ph,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,qa.EventType.OPEN,()=>{h||(so(ph,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),p(u,qa.EventType.CLOSE,()=>{h||(h=!0,so(ph,`RPC '${e}' stream ${r} transport closed`),f.So())}),p(u,qa.EventType.ERROR,t=>{h||(h=!0,ao(ph,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new fo(ho.UNAVAILABLE,"The operation could not be completed")))}),p(u,qa.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];co(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){so(ph,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Su[e];if(void 0!==t)return Tu(t)}(t),s=a.message;void 0===n&&(n=ho.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new fo(n,s)),u.close()}else so(ph,`RPC '${e}' stream ${r} received:`,s),f.bo(s)}}),p(a,Ga.STAT_EVENT,t=>{t.stat===Ka.PROXY?so(ph,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Ka.NOPROXY&&so(ph,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function gh(){return"undefined"!=typeof document?document:null}function yh(e){return new Qu(e,!0)}class vh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&so("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class bh{constructor(e,t,n,r,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vh(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===ho.RESOURCE_EXHAUSTED?(io(t.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ho.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new fo(ho.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return so("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(so("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xh extends bh{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:lo()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(co(void 0===t||"string"==typeof t),cl.fromBase64String(t||"")):(co(void 0===t||t instanceof Buffer||t instanceof Uint8Array),cl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?ho.UNKNOWN:Tu(e.code);return new fo(t,e.message||"")}(a);n=new Vu(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=id(e,r.document.name),i=ed(r.document.updateTime),a=r.document.createTime?ed(r.document.createTime):jo.min(),o=new Ml({mapValue:{fields:r.document.fields}}),l=Ul.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Uu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=id(e,r.document),i=r.readTime?ed(r.readTime):jo.min(),a=Ul.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Uu([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=id(e,r.document),i=r.removedTargetIds||[];n=new Uu([],i,s,null)}else{if(!("filter"in t))return lo();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Eu(r,s),a=e.targetId;n=new Bu(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return jo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?jo.min():t.readTime?ed(t.readTime):jo.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=ld(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=hc(r)?{documents:hd(e,r)}:{query:fd(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ju(e,t.resumeToken);const r=Yu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(jo.min())>0){n.readTime=Xu(e,t.snapshotVersion.toTimestamp());const r=Yu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=ld(this.serializer),t.removeTarget=e,this.a_(t)}}class wh extends bh{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return co(!!e.streamToken),this.lastStreamToken=e.streamToken,co(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){co(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(co(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?ed(e.updateTime):ed(t);return n.isEqual(jo.min())&&(n=ed(t)),new au(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ed(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=ld(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>dd(this.serializer,e))};this.a_(t)}}class Nh extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new fo(ho.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Mo(e,nd(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ho.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new fo(ho.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Lo(e,nd(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ho.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new fo(ho.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class kh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(io(t),this.D_=!1):so("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class _h{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{Dh(this)&&(so("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=uo(e);t.L_.add(4),await Sh(t),t.q_.set("Unknown"),t.L_.delete(4),await Eh(t)}(this))})}),this.q_=new kh(n,r)}}async function Eh(e){if(Dh(e))for(const t of e.B_)await t(!0)}async function Sh(e){for(const t of e.B_)await t(!1)}function Ch(e,t){const n=uo(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Ph(n)?Ah(n):Jh(n).r_()&&Th(n,t))}function jh(e,t){const n=uo(e),r=Jh(n);n.N_.delete(t),r.r_()&&Ih(n,t),0===n.N_.size&&(r.r_()?r.o_():Dh(n)&&n.q_.set("Unknown"))}function Th(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(jo.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Jh(e).A_(t)}function Ih(e,t){e.Q_.xe(t),Jh(e).R_(t)}function Ah(e){e.Q_=new $u({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Jh(e).start(),e.q_.v_()}function Ph(e){return Dh(e)&&!Jh(e).n_()&&e.N_.size>0}function Dh(e){return 0===uo(e).L_.size}function Rh(e){e.Q_=void 0}async function Oh(e){e.q_.set("Online")}async function Lh(e){e.N_.forEach((t,n)=>{Th(e,t)})}async function Mh(e,t){Rh(e),Ph(e)?(e.q_.M_(t),Ah(e)):e.q_.set("Unknown")}async function Fh(e,t,n){if(e.q_.set("Online"),t instanceof Vu&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){so("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Uh(e,n)}else if(t instanceof Uu?e.Q_.Ke(t):t instanceof Bu?e.Q_.He(t):e.Q_.We(t),!n.isEqual(jo.min()))try{const t=await Zd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(cl.EMPTY_BYTE_STRING,r.snapshotVersion)),Ih(e,t);const s=new _d(r.target,t,n,r.sequenceNumber);Th(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){so("RemoteStore","Failed to raise snapshot:",t),await Uh(e,t)}}async function Uh(e,t,n){if(!qo(t))throw t;e.L_.add(1),await Sh(e),e.q_.set("Offline"),n||(n=()=>Zd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{so("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Eh(e)})}function Bh(e,t){return t().catch(n=>Uh(e,n,t))}async function Vh(e){const t=uo(e),n=Zh(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;zh(t);)try{const e=await th(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,$h(t,e)}catch(e){await Uh(t,e)}qh(t)&&Hh(t)}function zh(e){return Dh(e)&&e.O_.length<10}function $h(e,t){e.O_.push(t);const n=Zh(e);n.r_()&&n.V_&&n.m_(t.mutations)}function qh(e){return Dh(e)&&!Zh(e).n_()&&e.O_.length>0}function Hh(e){Zh(e).start()}async function Wh(e){Zh(e).p_()}async function Kh(e){const t=Zh(e);for(const n of e.O_)t.m_(n.mutations)}async function Gh(e,t,n){const r=e.O_.shift(),s=ku.from(r,t,n);await Bh(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Vh(e)}async function Qh(e,t){t&&Zh(e).V_&&await async function(e,t){if(function(e){return ju(e)&&e!==ho.ABORTED}(t.code)){const n=e.O_.shift();Zh(e).s_(),await Bh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Vh(e)}}(e,t),qh(e)&&Hh(e)}async function Yh(e,t){const n=uo(e);n.asyncQueue.verifyOperationInProgress(),so("RemoteStore","RemoteStore received new credentials");const r=Dh(n);n.L_.add(3),await Sh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Eh(n)}async function Xh(e,t){const n=uo(e);t?(n.L_.delete(2),await Eh(n)):t||(n.L_.add(2),await Sh(n),n.q_.set("Unknown"))}function Jh(e){return e.K_||(e.K_=function(e,t,n){const r=uo(e);return r.w_(),new xh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Oh.bind(null,e),Ro:Lh.bind(null,e),mo:Mh.bind(null,e),d_:Fh.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Ph(e)?Ah(e):e.q_.set("Unknown")):(await e.K_.stop(),Rh(e))})),e.K_}function Zh(e){return e.U_||(e.U_=function(e,t,n){const r=uo(e);return r.w_(),new wh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Wh.bind(null,e),mo:Qh.bind(null,e),f_:Kh.bind(null,e),g_:Gh.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Vh(e)):(await e.U_.stop(),e.O_.length>0&&(so("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}class ef{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new ef(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fo(ho.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tf(e,t){if(io("AsyncQueue",`${t}: ${e}`),qo(e))return new fo(ho.UNAVAILABLE,`${t}: ${e}`);throw e}class nf{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Do.comparator(t.key,n.key):(e,t)=>Do.comparator(e.key,t.key),this.keyedMap=Rc(),this.sortedSet=new nl(this.comparator)}static emptySet(e){return new nf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new nf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class rf{constructor(){this.W_=new nl(Do.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):lo():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class sf{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new sf(e,t,nf.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class af{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class of{constructor(){this.queries=lf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=uo(e),r=n.queries;n.queries=lf(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new fo(ho.ABORTED,"Firestore shutting down"))}}function lf(){return new Ic(e=>_c(e),kc)}async function cf(e,t){const n=uo(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new af,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=tf(e,`Initialization of query '${Ec(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&ff(n)}async function uf(e,t){const n=uo(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function df(e,t){const n=uo(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&ff(n)}function hf(e,t,n){const r=uo(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function ff(e){e.Y_.forEach(e=>{e.next()})}var pf,mf;(mf=pf||(pf={})).ea="default",mf.Cache="cache";class gf{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new sf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=sf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pf.Cache}}class yf{constructor(e){this.key=e}}class vf{constructor(e){this.key=e}}class bf{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Vc(),this.mutatedKeys=Vc(),this.Aa=jc(e),this.Ra=new nf(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new rf,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Sc(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lo()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==i.length||l?{snapshot:new sf(this.query,e.Ra,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Vc(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new vf(e))}),this.da.forEach(n=>{e.has(n)||t.push(new yf(n))}),t}ba(e){this.Ta=e.Ts,this.da=Vc();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return sf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class xf{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class wf{constructor(e){this.key=e,this.va=!1}}class Nf{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new Ic(e=>_c(e),kc),this.Ma=new Map,this.xa=new Set,this.Oa=new nl(Do.comparator),this.Na=new Map,this.La=new Fd,this.Ba={},this.ka=new Map,this.qa=Ad.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function kf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=qf(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Ef(r,t,n,!0),s}async function _f(e,t){const n=qf(e);await Ef(n,t,!0,!1)}async function Ef(e,t,n,r){const s=await nh(e.localStore,bc(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Sf(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Ch(e.remoteStore,s),o}async function Sf(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await sh(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Ff(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const i=await sh(e.localStore,t,!0),a=new bf(t,i.Ts),o=a.ma(i.documents),l=Fu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Ff(e,n,c.wa);const u=new xf(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Cf(e,t,n){const r=uo(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!kc(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&jh(r.remoteStore,s.targetId),Lf(r,s.targetId)}).catch(Vo)):(Lf(r,s.targetId),await rh(r.localStore,s.targetId,!0))}async function jf(e,t){const n=uo(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jh(n.remoteStore,r.targetId))}async function Tf(e,t){const n=uo(e);try{const e=await function(e,t){const n=uo(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(cl.EMPTY_BYTE_STRING,jo.min()).withLastLimboFreeSnapshotVersion(jo.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Ur.updateTargetData(e,c))});let o=Pc(),l=Vc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(eh(e,i,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(jo.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return zo.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(co(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?co(r.va):e.removedDocuments.size>0&&(co(r.va),r.va=!1))}),await Vf(n,e,t)}catch(e){await Vo(e)}}function If(e,t,n){const r=uo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=uo(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&ff(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Af(e,t,n){const r=uo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new nl(Do.comparator);e=e.insert(i,Ul.newNoDocument(i,jo.min()));const n=Vc().add(i),s=new Mu(jo.min(),new Map,new nl(Eo),e,n);await Tf(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),Bf(r)}else await rh(r.localStore,t,!1).then(()=>Lf(r,t,n)).catch(Vo)}async function Pf(e,t){const n=uo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=uo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=zo.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);co(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Vc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Of(n,r,null),Rf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vf(n,e)}catch(e){await Vo(e)}}async function Df(e,t,n){const r=uo(e);try{const e=await function(e,t){const n=uo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(co(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Of(r,t,n),Rf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Vf(r,e)}catch(n){await Vo(n)}}function Rf(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Of(e,t,n){const r=uo(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function Lf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Mf(e,t)})}function Mf(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(jh(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Bf(e))}function Ff(e,t,n){for(const r of n)r instanceof yf?(e.La.addReference(r.key,t),Uf(e,r)):r instanceof vf?(so("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Mf(e,r.key)):lo()}function Uf(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(so("SyncEngine","New document in limbo: "+n),e.xa.add(r),Bf(e))}function Bf(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Do(Io.fromString(t)),r=e.qa.next();e.Na.set(r,new wf(n)),e.Oa=e.Oa.insert(n,r),Ch(e.remoteStore,new _d(bc(mc(n.path)),r,"TargetPurposeLimboResolution",Ho.oe))}}async function Vf(e,t,n){const r=uo(e),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Kd.Wi(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(e,t){const n=uo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>zo.forEach(t,t=>zo.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>zo.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!qo(e))throw e;so("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function zf(e,t){const n=uo(e);if(!n.currentUser.isEqual(t)){so("SyncEngine","User change. New user:",t.toKey());const e=await Jd(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new fo(ho.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Vf(n,e.hs)}}function $f(e,t){const n=uo(e),r=n.Na.get(t);if(r&&r.va)return Vc().add(r.key);{let e=Vc();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function qf(e){const t=uo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Tf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$f.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Af.bind(null,t),t.Ca.d_=df.bind(null,t.eventManager),t.Ca.$a=hf.bind(null,t.eventManager),t}function Hf(e){const t=uo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Pf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Df.bind(null,t),t}class Wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Xd(this.persistence,new Qd,e.initialUser,this.serializer)}Ga(e){return new qd(Wd.Zr,this.serializer)}Wa(e){return new oh}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wf.provider={build:()=>new Wf};class Kf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>If(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=zf.bind(null,this.syncEngine),await Xh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new of}createDatastore(e){const t=yh(e.databaseInfo.databaseId),n=function(e){return new mh(e)}(e.databaseInfo);return function(e,t,n,r){return new Nh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new _h(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>If(this.syncEngine,e,0),ch.D()?new ch:new lh)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Nf(e,t,n,r,s,i);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=uo(e);so("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Sh(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Kf.provider={build:()=>new Kf};class Gf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Qf{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=eo.UNAUTHENTICATED,this.clientId=_o.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{so("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(so("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Ce){const n=tf(Ce,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Yf(e,t){e.asyncQueue.verifyOperationInProgress(),so("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Jd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Xf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Jf(e);so("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Yh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Yh(t.remoteStore,n)),e._onlineComponents=t}async function Jf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){so("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yf(e,e._uninitializedComponentsProvider._offline)}catch(Ce){const n=Ce;if(!function(e){return"FirebaseError"===e.name?e.code===ho.FAILED_PRECONDITION||e.code===ho.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),await Yf(e,new Wf)}}else so("FirestoreClient","Using default OfflineComponentProvider"),await Yf(e,new Wf);return e._offlineComponents}async function Zf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(so("FirestoreClient","Using user provided OnlineComponentProvider"),await Xf(e,e._uninitializedComponentsProvider._online)):(so("FirestoreClient","Using default OnlineComponentProvider"),await Xf(e,new Kf))),e._onlineComponents}function ep(e){return Zf(e).then(e=>e.syncEngine)}async function tp(e){const t=await Zf(e),n=t.eventManager;return n.onListen=kf.bind(null,t.syncEngine),n.onUnlisten=Cf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_f.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=jf.bind(null,t.syncEngine),n}function np(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new po;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Gf({next:o=>{i.Za(),t.enqueueAndForget(()=>uf(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new fo(ho.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new fo(ho.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new gf(mc(n.path),i,{includeMetadataChanges:!0,_a:!0});return cf(e,a)}(await tp(e),e.asyncQueue,t,n,r)),r.promise}function rp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new po;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Gf({next:n=>{i.Za(),t.enqueueAndForget(()=>uf(e,a)),n.fromCache&&"server"===r.source?s.reject(new fo(ho.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new gf(n,i,{includeMetadataChanges:!0,_a:!0});return cf(e,a)}(await tp(e),e.asyncQueue,t,n,r)),r.promise}function sp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ip=new Map;function ap(e,t,n){if(!n)throw new fo(ho.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function op(e){if(!Do.isDocumentKey(e))throw new fo(ho.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function lp(e){if(Do.isDocumentKey(e))throw new fo(ho.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function cp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":lo()}function up(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fo(ho.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cp(e);throw new fo(ho.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class dp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new fo(ho.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new fo(ho.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new fo(ho.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new fo(ho.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new fo(ho.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new fo(ho.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fo(ho.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new fo(ho.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new go;switch(e.type){case"firstParty":return new xo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fo(ho.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ip.get(e);t&&(so("ComponentProvider","Removing Datastore"),ip.delete(e),t.terminate())}(this),Promise.resolve()}}function fp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=up(e,hp))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==a&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=eo.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ct(JSON.stringify({alg:"none",type:"JWT"})),Ct(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new fo(ho.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new eo(i)}e._authCredentials=new yo(new mo(t,n))}}class pp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pp(this.firestore,e,this._query)}}class mp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mp(this.firestore,e,this._key)}}class gp extends pp{constructor(e,t,n){super(e,t,mc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mp(this.firestore,null,new Do(e))}withConverter(e){return new gp(this.firestore,e,this._path)}}function yp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Gt(e),ap("collection","path",t),e instanceof hp){const n=Io.fromString(t,...r);return lp(n),new gp(e,null,n)}{if(!(e instanceof mp||e instanceof gp))throw new fo(ho.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Io.fromString(t,...r));return lp(n),new gp(e.firestore,null,n)}}function vp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=Gt(e),1===arguments.length&&(t=_o.newId()),ap("doc","path",t),e instanceof hp){const n=Io.fromString(t,...r);return op(n),new mp(e,null,new Do(n))}{if(!(e instanceof mp||e instanceof gp))throw new fo(ho.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Io.fromString(t,...r));return op(n),new mp(e.firestore,e instanceof gp?e.converter:null,new Do(n))}}class bp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vh(this,"async_queue_retry"),this.Vu=()=>{const e=gh();e&&so("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=gh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=gh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new po;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Se){if(!qo(Se))throw Se;so("AsyncQueue","Operation failed with retryable error: "+Se)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw io("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=ef.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&lo()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function xp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class wp extends hp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new bp,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bp(e),this._firestoreClient=void 0,await e}}}function Np(e){if(e._terminated)throw new fo(ho.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||kp(e),e._firestoreClient}function kp(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new yl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,sp(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Qf(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class _p{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _p(cl.fromBase64String(e))}catch(e){throw new fo(ho.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new _p(cl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ep{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new fo(ho.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Po(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sp{constructor(e){this._methodName=e}}class Cp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fo(ho.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fo(ho.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Eo(this._lat,e._lat)||Eo(this._long,e._long)}}class jp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Tp=/^__.*__$/;class Ip{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new gu(e,this.data,this.fieldMask,t,this.fieldTransforms):new mu(e,this.data,t,this.fieldTransforms)}}class Ap{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new gu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Pp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lo()}}class Dp{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Dp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Pp(this.Cu)&&Tp.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Rp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||yh(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Dp({Cu:e,methodName:t,qu:n,path:Po.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Op(e){const t=e._freezeSettings(),n=yh(e._databaseId);return new Rp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lp(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);Kp("Data must be an object, but it was:",a,r);const o=Hp(r,a);let l,c;if(i.merge)l=new ol(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Gp(t,r,n);if(!a.contains(s))throw new fo(ho.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Jp(e,s)||e.push(s)}l=new ol(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Ip(new Ml(o),l,c)}class Mp extends Sp{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mp}}function Fp(e,t,n){return new Dp({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Up extends Sp{_toFieldTransform(e){return new iu(e.path,new Xc)}isEqual(e){return e instanceof Up}}class Bp extends Sp{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Fp(this,e,!0),n=this.Ku.map(e=>qp(e,t)),r=new Jc(n);return new iu(e.path,r)}isEqual(e){return e instanceof Bp&&Vt(this.Ku,e.Ku)}}function Vp(e,t,n,r){const s=e.Qu(1,t,n);Kp("Data must be an object, but it was:",s,r);const i=[],a=Ml.empty();el(r,(e,r)=>{const o=Yp(t,e,n);r=Gt(r);const l=s.Nu(o);if(r instanceof Mp)i.push(o);else{const e=qp(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new ol(i);return new Ap(a,o,s.fieldTransforms)}function zp(e,t,n,r,s,i){const a=e.Qu(1,t,n),o=[Gp(t,r,n)],l=[s];if(i.length%2!=0)throw new fo(ho.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)o.push(Gp(t,i[h])),l.push(i[h+1]);const c=[],u=Ml.empty();for(let h=o.length-1;h>=0;--h)if(!Jp(c,o[h])){const e=o[h];let t=l[h];t=Gt(t);const n=a.Nu(e);if(t instanceof Mp)c.push(e);else{const r=qp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new ol(c);return new Ap(u,d,a.fieldTransforms)}function $p(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qp(n,e.Qu(r?4:3,t))}function qp(e,t){if(Wp(e=Gt(e)))return Kp("Unsupported field value:",t,e),Hp(e,t);if(e instanceof Sp)return function(e,t){if(!Pp(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=qp(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Gt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Wc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Co.fromDate(e);return{timestampValue:Xu(t.serializer,n)}}if(e instanceof Co){const n=new Co(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xu(t.serializer,n)}}if(e instanceof Cp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _p)return{bytesValue:Ju(t.serializer,e._byteString)};if(e instanceof mp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:td(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof jp)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return qc(t.serializer,e)})}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${cp(e)}`)}(e,t)}function Hp(e,t){const n={};return tl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):el(e,(e,r)=>{const s=qp(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Wp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Co||e instanceof Cp||e instanceof _p||e instanceof mp||e instanceof Sp||e instanceof jp)}function Kp(e,t,n){if(!Wp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=cp(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Gp(e,t,n){if((t=Gt(t))instanceof Ep)return t._internalPath;if("string"==typeof t)return Yp(e,t);throw Xp("Field path arguments must be of type string or ",e,!1,void 0,n)}const Qp=new RegExp("[~\\*/\\[\\]]");function Yp(e,t,n){if(t.search(Qp)>=0)throw Xp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ep(...t.split("."))._internalPath}catch(r){throw Xp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Xp(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new fo(ho.INVALID_ARGUMENT,o+e+l)}function Jp(e,t){return e.some(e=>e.isEqual(t))}class Zp{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new em(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class em extends Zp{data(){return super.data()}}function tm(e,t){return"string"==typeof t?Yp(e,t):t instanceof Ep?t._internalPath:t._delegate._internalPath}function nm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fo(ho.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rm{}class sm extends rm{}function im(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof rm&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof lm).length,n=e.filter(e=>e instanceof am).length;if(t>1||t>0&&n>0)throw new fo(ho.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class am extends sm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new am(e,t,n)}_apply(e){const t=this._parse(e);return dm(e._query,t),new pp(e.firestore,e.converter,wc(e._query,t))}_parse(e){const t=Op(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new fo(ho.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){um(a,i);const t=[];for(const n of a)t.push(cm(r,e,n));o={arrayValue:{values:t}}}else o=cm(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||um(a,i),o=$p(n,t,a,"in"===i||"not-in"===i);return Wl.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function om(e,t,n){const r=t,s=tm("where",e);return am._create(s,r,n)}class lm extends rm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lm(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Kl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)dm(n,s),n=wc(n,s)}(e._query,t),new pp(e.firestore,e.converter,wc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function cm(e,t,n){if("string"==typeof(n=Gt(n))){if(""===n)throw new fo(ho.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yc(t)&&-1!==n.indexOf("/"))throw new fo(ho.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Io.fromString(n));if(!Do.isDocumentKey(r))throw new fo(ho.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jl(e,new Do(r))}if(n instanceof mp)return jl(e,n._key);throw new fo(ho.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cp(n)}.`)}function um(e,t){if(!Array.isArray(e)||0===e.length)throw new fo(ho.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function dm(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new fo(ho.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new fo(ho.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class hm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(xl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw lo()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return el(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>hl(e.doubleValue));return new jp(s)}convertGeoPoint(e){return new Cp(hl(e.latitude),hl(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ml(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const t=dl(e);return new Co(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Io.fromString(e);co(kd(n));const r=new vl(n.get(1),n.get(3)),s=new Do(n.popFirst(5));return r.isEqual(t)||io(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function fm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class pm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mm extends Zp{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new gm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(tm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class gm extends mm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ym{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new pm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new gm(this._firestore,this._userDataWriter,n.key,n,new pm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new fo(ho.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new gm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new pm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new gm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:vm(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lo()}}class bm extends hm{constructor(e){super(),this.firestore=e}convertBytes(e){return new _p(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mp(this.firestore,null,t)}}function xm(e,t,n){e=up(e,mp);const r=up(e.firestore,wp),s=Op(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=Gt(t))||t instanceof Ep?zp(s,"updateDoc",e._key,t,n,o):Vp(s,"updateDoc",e._key,t),_m(r,[i.toMutation(e._key,ou.exists(!0))])}function wm(e){return _m(up(e.firestore,wp),[new xu(e._key,ou.none())])}function Nm(e,t){const n=up(e.firestore,wp),r=vp(e),s=fm(e.converter,t);return _m(n,[Lp(Op(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,ou.exists(!1))]).then(()=>r)}function km(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=Gt(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||xp(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(xp(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof mp)d=up(e.firestore,wp),h=mc(e._key.path),u={next:t=>{n[l]&&n[l](Em(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=up(e,pp);d=up(t.firestore,wp),h=t._query;const r=new bm(d);u={next:e=>{n[l]&&n[l](new ym(d,r,t,e))},error:n[l+1],complete:n[l+2]},nm(e._query)}return function(e,t,n,r){const s=new Gf(r),i=new gf(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>cf(await tp(e),i)),()=>{s.Za(),e.asyncQueue.enqueueAndForget(async()=>uf(await tp(e),i))}}(Np(d),h,c,u)}function _m(e,t){return function(e,t){const n=new po;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Hf(e);try{const e=await function(e,t){const n=uo(e),r=Co.now(),s=t.reduce((e,t)=>e.add(t.key),Vc());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Pc(),l=Vc();return n.cs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=fu(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new gu(e.key,t,Fl(t.value.mapValue),ou.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Oc(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new nl(Eo)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Vf(r,e.changes),await Vh(r.remoteStore)}catch(e){const t=tf(e,"Failed to persist write");n.reject(t)}}(await ep(e),t,n)),n.promise}(Np(e),t)}function Em(e,t,n){const r=n.docs.get(t._key),s=new bm(e);return new mm(e,s,t._key,r,new pm(n.hasPendingWrites,n.fromCache),t.converter)}function Sm(){return new Up("serverTimestamp")}function Cm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Bp("arrayUnion",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){to=e}(ur),ir(new Qt("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new wp(new vo(e.getProvider("auth-internal")),new No(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fo(ho.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vl(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),fr(Za,"4.7.3",e),fr(Za,"4.7.3","esm2017")}();const jm=dr({apiKey:"AIzaSyAtV-4J--e_EWws5PyN-gIsEjbZBBdE2rc",authDomain:"ubiko-395fd.firebaseapp.com",projectId:"ubiko-395fd",storageBucket:"ubiko-395fd.firebasestorage.app",messagingSenderId:"323799153344",appId:"1:323799153344:web:8897d509f62e569ceb0b25",measurementId:"G-461BNFNVDM"}),Tm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr();const t=ar(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ar(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Vt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ir(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Pa,persistence:[qi,Ci,Ti]}),r=Dt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>La)return;const r=null===t||void 0===t?void 0:t.token;Ma!==r&&(Ma=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Gt(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Gt(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=At("auth");return i&&Ws(n,`http://${i}`),n}(jm),Im=function(e,t){const n="string"==typeof e?e:t||"(default)",r=ar("object"==typeof e?e:hr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=At(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&fp(r,...e)}return r}(jm);var Am=n(579);const Pm=(0,s.createContext)();function Dm(){return(0,s.useContext)(Pm)}function Rm(e){let{children:t}=e;const[n,r]=(0,s.useState)(null),[i,a]=(0,s.useState)(!0);(0,s.useEffect)(()=>{const e=function(e,t,n,r){return Gt(e).onAuthStateChanged(t,n,r)}(Tm,e=>{r(e),a(!1)});return e},[]);const o={currentUser:n,signup:function(e,t,n){return async function(e,t,n){if(or(e.app))return Promise.reject(Dr(e));const r=Fs(e),s=Hs(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",di),i=await s.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&wi(e),t}),a=await hi._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(Tm,e,t).then(e=>Ni(e.user,{displayName:n}))},login:function(e,t){return function(e,t,n){return or(e.app)?Promise.reject(Dr(e)):bi(Gt(e),si.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&wi(e),t})}(Tm,e,t)},logout:function(){return function(e){return Gt(e).signOut()}(Tm)}};return(0,Am.jsx)(Pm.Provider,{value:o,children:!i&&t})}function Om(e){let{children:t}=e;const{currentUser:n}=Dm();return n?t:(0,Am.jsx)(ye,{to:"/"})}var Lm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Mm=(e,t)=>{const n=(0,s.forwardRef)((n,r)=>{let{color:i="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u,...d}=n;return(0,s.createElement)("svg",{ref:r,...Lm,width:a,height:a,stroke:i,strokeWidth:l?24*Number(o)/Number(a):o,className:["lucide",`lucide-${h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,c].join(" "),...d},[...t.map(e=>{let[t,n]=e;return(0,s.createElement)(t,n)}),...Array.isArray(u)?u:[u]]);var h});return n.displayName=`${e}`,n},Fm=Mm("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Um=Mm("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Bm=Mm("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Vm=Mm("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),zm=Mm("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function $m(){const[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(""),[i,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),{signup:f,login:p}=Dm(),m=ne();return(0,Am.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,Am.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Am.jsxs)("div",{className:"text-center",children:[(0,Am.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:o?"Crear Cuenta":"Iniciar Sesi\xf3n"}),(0,Am.jsx)("p",{className:"text-gray-600",children:o?"\xdanete para compartir gastos con amigos":"Accede a tu cuenta"})]}),(0,Am.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,Am.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),!o||i.trim())try{h(!0),o?(await f(e,n,i),kt.success("\xa1Cuenta creada exitosamente!")):(await p(e,n),kt.success("\xa1Bienvenido de vuelta!")),m("/dashboard")}catch(r){kt.error(r.message)}finally{h(!1)}else kt.error("Por favor ingresa tu nombre")},className:"space-y-6",children:[o&&(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre completo"}),(0,Am.jsxs)("div",{className:"relative",children:[(0,Am.jsx)(Fm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,Am.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tu nombre"})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo electr\xf3nico"}),(0,Am.jsxs)("div",{className:"relative",children:[(0,Am.jsx)(Um,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,Am.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"tu@email.com",required:!0})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrase\xf1a"}),(0,Am.jsxs)("div",{className:"relative",children:[(0,Am.jsx)(Bm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,Am.jsx)("input",{type:c?"text":"password",value:n,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0}),(0,Am.jsx)("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c?(0,Am.jsx)(Vm,{className:"h-5 w-5"}):(0,Am.jsx)(zm,{className:"h-5 w-5"})})]})]}),(0,Am.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Cargando...":o?"Crear Cuenta":"Iniciar Sesi\xf3n"})]}),(0,Am.jsx)("div",{className:"mt-6 text-center",children:(0,Am.jsx)("button",{onClick:()=>l(!o),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:o?"\xbfYa tienes cuenta? Inicia sesi\xf3n":"\xbfNo tienes cuenta? Reg\xedstrate"})})]})]})})}const qm=Mm("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Hm=Mm("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Wm=Mm("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),Km=Mm("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Gm=Mm("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Qm=Mm("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ym=Mm("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Xm=Mm("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Jm=Mm("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Zm=Mm("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),eg=Mm("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),tg=Mm("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ng=Mm("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),rg=Mm("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),sg=Mm("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ig=Mm("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ag=Mm("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),og=Mm("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),lg=Mm("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),cg=Mm("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ug=Mm("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),dg=Mm("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),hg=Mm("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fg=Mm("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function pg(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function mg(e){if(""===e||null===e||void 0===e)return"";const t=Number(e.toString().replace(/\D/g,""));return isNaN(t)?"":t.toLocaleString("es-CO")}function gg(e){if("string"!==typeof e)return e;const t=e.replace(/\./g,"").replace(/,/g,"");return parseInt(t)||0}function yg(e){switch(e){case"savings":return(0,Am.jsx)(qm,{className:"h-5 w-5 text-green-600"});case"debt":return(0,Am.jsx)(Hm,{className:"h-5 w-5 text-red-600"});case"general":return(0,Am.jsx)(Wm,{className:"h-5 w-5 text-blue-600"});case"future":return(0,Am.jsx)(Km,{className:"h-5 w-5 text-orange-600"});default:return(0,Am.jsx)(Wm,{className:"h-5 w-5 text-gray-600"})}}function vg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function bg(e){if(!e)return"";let t;if("string"===typeof e)if(e.includes("T"))t=new Date(e);else{const[n,r,s]=e.split("-");t=new Date(n,r-1,s)}else t=e instanceof Date?e:new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"})}function xg(){const{currentUser:e,logout:t}=Dm(),n=ne(),[r,i]=(0,s.useState)(!1),[a,o]=(0,s.useState)([]),[l,c]=(0,s.useState)([]),[u,d]=(0,s.useState)([]),[h,f]=(0,s.useState)([]),[p,m]=(0,s.useState)(!1),[g,y]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),[x,w]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),[_,E]=(0,s.useState)(1),[S]=(0,s.useState)(10),[C,j]=(0,s.useState)("all"),[T,I]=(0,s.useState)("all"),[A,P]=(0,s.useState)("all"),[D,R]=(0,s.useState)(""),[O,L]=(0,s.useState)(""),[M,F]=(0,s.useState)("all"),[U,B]=(0,s.useState)(null),[V,z]=(0,s.useState)(null),[$,q]=(0,s.useState)(!1),[H,W]=(0,s.useState)(!1),[K,G]=(0,s.useState)(!1),[Q,Y]=(0,s.useState)(null),[X,J]=(0,s.useState)("personal"),[Z,ee]=(0,s.useState)({current:!1,new:!1,confirm:!1}),[te,re]=(0,s.useState)(!1),[se,ie]=(0,s.useState)(!1),[ae,oe]=(0,s.useState)(""),[le,ce]=(0,s.useState)({name:"",description:""}),[ue,de]=(0,s.useState)(!1),[he,fe]=(0,s.useState)({name:"",description:"",targetMonth:""}),[pe,me]=(0,s.useState)(!1),[ge,ye]=(0,s.useState)([]),[ve,be]=(0,s.useState)(null),[xe,we]=(0,s.useState)(!1),[Ne,ke]=(0,s.useState)(null),[_e,Ee]=(0,s.useState)(""),[Se,Ce]=(0,s.useState)("connected"),[je,Te]=(0,s.useState)(!1),[Ie,Ae]=(0,s.useState)({fromBalance:"",toBalance:"",amount:"",description:""}),[Pe,De]=(0,s.useState)(!1),[Re,Oe]=(0,s.useState)(!1),[Le,Me]=(0,s.useState)(!0),[Fe,Ue]=(0,s.useState)({show:!1,title:"",message:"",type:"confirm",onConfirm:null,onCancel:null,confirmText:"Aceptar",cancelText:"Cancelar"}),[Be,Ve]=(0,s.useState)({bank:"",type:"credit",lastFourDigits:"",nickname:"",creditLimit:""}),[ze,$e]=(0,s.useState)({type:"expense",description:"",amount:"",category:"",date:vg(),paymentMethod:"efectivo",balance:"",selectedCard:""}),[qe,He]=(0,s.useState)({name:"",type:"savings",description:"",goal:"",targetMonth:""}),[We,Ke]=(0,s.useState)({type:"expense",description:"",amount:"",category:"",paymentMethod:"efectivo",balance:"principal",frequency:"monthly",dayOfMonth:1,isActive:!0,selectedCard:""}),[Ge,Qe]=(0,s.useState)(!1),[Ye,Xe]=(0,s.useState)({amount:"",description:"",balanceId:""}),[Je,Ze]=(0,s.useState)({displayName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""});function et(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t?(B(t),$e({type:t.type,description:t.description,amount:t.amount.toString(),category:t.category,date:t.date,paymentMethod:t.paymentMethod||"efectivo",balance:t.balance||"",selectedCard:t.selectedCard||""})):(B(null),$e({type:e,description:"",amount:"",category:"",date:vg(),paymentMethod:"efectivo",balance:"",selectedCard:""})),m(!0)}function tt(){m(!1),B(null),q(!1)}function nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(z(e),He({name:e.name,type:e.type,description:e.description,goal:e.goal?e.goal.toString():"",targetMonth:e.targetMonth||""})):(z(null),He({name:"",type:"savings",description:"",goal:"",targetMonth:""})),y(!0)}function rt(){y(!1),z(null),W(!1)}function st(e){Ke({...We,type:e,description:"",amount:"",category:"",paymentMethod:"efectivo",balance:"principal"})}(0,s.useEffect)(()=>{if(!e)return;const t=km(im(yp(Im,"rooms"),om("members","array-contains",e.uid)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));o(t)},e=>{console.error("Error en suscripci\xf3n a salas:",e),kt.error("Error al cargar salas. Verifica tu conexi\xf3n.")}),n=km(im(yp(Im,"personalTransactions"),om("userId","==",e.uid)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()})).sort((e,t)=>{var n,r;const s=e.date?new Date(e.date):new Date(1e3*(null===(n=e.createdAt)||void 0===n?void 0:n.seconds)||0);return(t.date?new Date(t.date):new Date(1e3*(null===(r=t.createdAt)||void 0===r?void 0:r.seconds)||0))-s});c(t)},e=>{console.error("Error en suscripci\xf3n a transacciones:",e),Ce("error"),kt.error("Error al cargar transacciones. Verifica tu conexi\xf3n.")}),r=km(im(yp(Im,"balances"),om("userId","==",e.uid)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));d(t)},e=>{console.error("Error en suscripci\xf3n a balances:",e),kt.error("Error al cargar balances. Verifica tu conexi\xf3n.")}),s=km(im(yp(Im,"recurringTransactions"),om("userId","==",e.uid)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));f(t)},e=>{console.error("Error en suscripci\xf3n a transacciones autom\xe1ticas:",e),kt.error("Error al cargar transacciones autom\xe1ticas. Verifica tu conexi\xf3n.")}),i=km(im(yp(Im,"cards"),om("userId","==",e.uid)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));ye(t)},e=>{console.error("Error en suscripci\xf3n a tarjetas:",e),kt.error("Error al cargar tarjetas. Verifica tu conexi\xf3n.")});return()=>{t(),n(),r(),s(),i()}},[e]),(0,s.useEffect)(()=>{(l.length>0||u.length>0||ge.length>0)&&Me(!1)},[l,u,ge]);const it=l.filter(e=>"income"===e.type).reduce((e,t)=>e+(t.amount||0),0),at=l.filter(e=>"expense"===e.type).filter(e=>{if("efectivo"===e.paymentMethod)return!0;if("tarjeta"===e.paymentMethod&&e.selectedCard){const t=ge.find(t=>t.id===e.selectedCard);if(t&&"debit"===t.type)return!0;if(t&&"credit"===t.type){return!!("Pago Tarjeta de Cr\xe9dito"===e.category)}}return!0}).reduce((e,t)=>e+(t.amount||0),0),ot=it-at,lt=l.filter(e=>"expense"===e.type).filter(e=>{if("efectivo"===e.paymentMethod)return!0;if("tarjeta"===e.paymentMethod&&e.selectedCard){const t=ge.find(t=>t.id===e.selectedCard);if(t&&"debit"===t.type)return!0;if(t&&"credit"===t.type){return!!("Pago Tarjeta de Cr\xe9dito"===e.category)}}return!0}).reduce((e,t)=>{const n=t.paymentMethod||"efectivo";return e[n]=(e[n]||0)+(t.amount||0),e},{}),ct=h.filter(e=>"all"===T||e.type===T),ut=function(e,t){Ue({show:!0,title:e,message:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"confirm",onConfirm:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,onCancel:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,confirmText:arguments.length>5&&void 0!==arguments[5]?arguments[5]:"Aceptar",cancelText:arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Cancelar"})},dt=()=>{Ue({show:!1,title:"",message:"",type:"confirm",onConfirm:null,onCancel:null,confirmText:"Aceptar",cancelText:"Cancelar"})},ht=e=>{j(e),E(1)};function nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.id&&"object"===typeof e?(z(e),He({name:e.name||"",type:e.type||"savings",description:e.description||"",goal:e.goal||""})):(z(null),He({name:"",type:"savings",description:"",goal:""})),y(!0)}function rt(){y(!1),z(null),He({name:"",type:"savings",description:"",goal:""})}function ft(e){be(e),Ve({bank:e.bank,type:e.type,lastFourDigits:e.lastFourDigits,nickname:e.nickname,creditLimit:e.creditLimit||""}),me(!0)}function pt(){me(!1),be(null),Ve({bank:"",type:"credit",lastFourDigits:"",nickname:""})}function mt(e){ke(e),Ee(""),we(!0)}function gt(){Te(!1),Ae({fromBalance:"",toBalance:"",amount:"",description:""})}function yt(){b(!1),Ke({type:"income",amount:"",description:"",category:"",paymentMethod:"efectivo",balance:"principal",frequency:"monthly",dayOfMonth:1,isActive:!0})}function vt(){k(!1),Xe({amount:"",description:"",balanceId:""})}function bt(){w(!1),Ze({displayName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""})}function pt(){me(!1),Ve({bank:"",type:"credit",nickname:"",lastFourDigits:""}),be(null)}function xt(e){P(e),E(1)}function wt(e){F(e),E(1)}function Nt(e){const t=ge.find(t=>t.id===e);if(!t||"credit"!==t.type)return 0;const n=l.filter(t=>t.selectedCard===e&&"expense"===t.type&&"Pago Tarjeta de Cr\xe9dito"!==t.category).reduce((e,t)=>e+(t.amount||0),0),r=l.filter(t=>"expense"===t.type&&"Pago Tarjeta de Cr\xe9dito"===t.category&&t.selectedCard===e).reduce((e,t)=>e+(t.amount||0),0);return n-r}async function _t(e){ut("Eliminar Tarjeta","\xbfEst\xe1s seguro de que quieres eliminar esta tarjeta?","confirm",async()=>{Oe(!0);try{await wm(vp(Im,"cards",e)),kt.success("Tarjeta eliminada")}catch(t){kt.error("Error al eliminar la tarjeta")}finally{Oe(!1)}},null,"Eliminar","Cancelar")}const Et=l.filter(e=>{const t="all"===C||e.type===C;let n=!0;if("today"===A){var r;n=(new Date).toDateString()===new Date(e.date||1e3*(null===(r=e.createdAt)||void 0===r?void 0:r.seconds)).toDateString()}else if("week"===A){var s;const t=new Date;t.setDate(t.getDate()-7);n=new Date(e.date||1e3*(null===(s=e.createdAt)||void 0===s?void 0:s.seconds))>=t}else if("month"===A){var i;const t=new Date;t.setMonth(t.getMonth()-1);n=new Date(e.date||1e3*(null===(i=e.createdAt)||void 0===i?void 0:i.seconds))>=t}else if("custom"===A&&D&&O){var a;const t=new Date(e.date||1e3*(null===(a=e.createdAt)||void 0===a?void 0:a.seconds)),r=new Date(D),s=new Date(O);n=t>=r&&t<=s}let o=!0;"all"!==M&&"expense"===e.type&&(o=e.paymentMethod===M);return t&&n&&o}).sort((e,t)=>{const n=e.date?new Date(e.date):new Date(e.createdAt||0);return(t.date?new Date(t.date):new Date(t.createdAt||0))-n}),St=_*S,Ct=St-S,jt=Et.slice(Ct,St),Tt=Math.ceil(Et.length/S),It=e=>l.filter(t=>t.selectedCard===e&&"expense"===t.type&&"Pago Tarjeta de Cr\xe9dito"!==t.category).reduce((e,t)=>e+(t.amount||0),0),At=ge.map(e=>({...e,totalExpenses:It(e.id)})).filter(e=>e.totalExpenses>0),Pt=u.map(e=>{if("future"===e.type){const t=l.filter(t=>"expense"===t.type&&t.balance===e.id).reduce((e,t)=>e+(t.amount||0),0);return{...e,currentAmount:t}}{const t=l.filter(t=>t.balance===e.id),n=t.filter(e=>"income"===e.type).reduce((e,t)=>e+(t.amount||0),0),r=t.filter(e=>"expense"===e.type).filter(e=>{if("efectivo"===e.paymentMethod)return!0;if("tarjeta"===e.paymentMethod&&e.selectedCard){const t=ge.find(t=>t.id===e.selectedCard);if(t&&"debit"===t.type)return!0;if(t&&"credit"===t.type){return!!("Pago Tarjeta de Cr\xe9dito"===e.category)}}return!0}).reduce((e,t)=>e+(t.amount||0),0),s=n-r;return{...e,currentAmount:s}}}),Dt=[...Pt];return(0,Am.jsxs)("div",{className:"min-h-screen bg-gray-50",children:["error"===Se&&(0,Am.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",children:(0,Am.jsx)("div",{className:"flex",children:(0,Am.jsx)("div",{className:"ml-3",children:(0,Am.jsxs)("p",{className:"text-sm",children:[(0,Am.jsx)("strong",{children:"Error de conexi\xf3n:"})," Hay problemas para conectar con la base de datos. Verifica tu conexi\xf3n a internet y recarga la p\xe1gina."]})})})}),(0,Am.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Am.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Am.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Am.jsx)(Gm,{className:"h-8 w-8 text-blue-600"}),(0,Am.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Gastos"})]}),(0,Am.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Am.jsxs)("span",{className:"text-sm text-gray-600",children:["Hola, ",(null===e||void 0===e?void 0:e.displayName)||"Usuario"]}),(0,Am.jsxs)("button",{onClick:function(){w(!0),Ze({displayName:e.displayName||"",email:e.email||"",currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,Am.jsx)(Fm,{className:"h-5 w-5"}),(0,Am.jsx)("span",{children:"Mi Perfil"})]}),(0,Am.jsxs)("button",{onClick:async function(){try{await t(),n("/login")}catch(e){kt.error("Error al eliminar la transacci\xf3n autom\xe1tica")}},className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,Am.jsx)(Qm,{className:"h-5 w-5"}),(0,Am.jsx)("span",{children:"Cerrar Sesi\xf3n"})]})]})]})})}),(0,Am.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Am.jsx)("div",{className:"mb-8",children:(0,Am.jsx)("div",{className:"border-b border-gray-200",children:(0,Am.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,Am.jsxs)("button",{onClick:()=>J("personal"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 "+("personal"===X?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Am.jsx)(Wm,{className:"h-5 w-5"}),(0,Am.jsx)("span",{children:"Finanzas Personales"})]}),(0,Am.jsxs)("button",{onClick:()=>J("group"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 "+("group"===X?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Am.jsx)(Ym,{className:"h-5 w-5"}),(0,Am.jsx)("span",{children:"Gastos Compartidos"})]})]})})}),"personal"===X?(0,Am.jsxs)("div",{children:[(0,Am.jsx)("div",{className:"mb-8",children:(0,Am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Am.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-lg shadow p-6 border border-green-200",children:(0,Am.jsxs)("div",{className:"flex items-center",children:[(0,Am.jsx)(Xm,{className:"h-8 w-8 text-green-600"}),(0,Am.jsxs)("div",{className:"ml-4",children:[(0,Am.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Ingresos"}),(0,Am.jsx)("p",{className:"text-2xl font-semibold text-green-800",children:pg(it)})]})]})}),(0,Am.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 rounded-lg shadow p-6 border border-red-200",children:(0,Am.jsxs)("div",{className:"flex items-center",children:[(0,Am.jsx)(Jm,{className:"h-8 w-8 text-red-600"}),(0,Am.jsxs)("div",{className:"ml-4",children:[(0,Am.jsx)("p",{className:"text-sm font-medium text-red-700",children:"Egresos"}),(0,Am.jsx)("p",{className:"text-2xl font-semibold text-red-800",children:pg(at)})]})]})}),(0,Am.jsx)("div",{className:`bg-gradient-to-r ${ot>=0?"from-emerald-50 to-emerald-100 border-emerald-200":"from-orange-50 to-orange-100 border-orange-200"} rounded-lg shadow p-6 border`,children:(0,Am.jsxs)("div",{className:"flex items-center",children:[(0,Am.jsx)(Wm,{className:"h-8 w-8 "+(ot>=0?"text-emerald-600":"text-orange-600")}),(0,Am.jsxs)("div",{className:"ml-4",children:[(0,Am.jsx)("p",{className:"text-sm font-medium "+(ot>=0?"text-emerald-700":"text-orange-700"),children:"Balance"}),(0,Am.jsx)("p",{className:"text-2xl font-semibold "+(ot>=0?"text-emerald-800":"text-orange-800"),children:pg(ot)})]})]})})]})}),(Object.keys(lt).length>0||At.length>0)&&(0,Am.jsxs)("div",{className:"mb-8",children:[(0,Am.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Am.jsx)(Zm,{className:"h-5 w-5 mr-2"}),"Egresos por M\xe9todo de Pago"]}),(0,Am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[lt.efectivo>0&&(0,Am.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-lg shadow p-6 border border-green-200",children:(0,Am.jsxs)("div",{className:"flex items-center",children:[(0,Am.jsx)(eg,{className:"h-8 w-8 text-green-600"}),(0,Am.jsxs)("div",{className:"ml-4",children:[(0,Am.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Efectivo"}),(0,Am.jsx)("p",{className:"text-2xl font-semibold text-green-800",children:pg(lt.efectivo)})]})]})}),At.map(e=>(0,Am.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg shadow p-6 border border-blue-200",children:(0,Am.jsxs)("div",{className:"flex items-center",children:[(0,Am.jsx)(Zm,{className:"h-8 w-8 text-blue-600"}),(0,Am.jsxs)("div",{className:"ml-4 flex-1",children:[(0,Am.jsx)("p",{className:"text-sm font-medium text-blue-700",children:e.nickname}),(0,Am.jsxs)("p",{className:"text-xs text-blue-600 mb-1",children:[e.bank," (****",e.lastFourDigits,")"]}),(0,Am.jsx)("p",{className:"text-2xl font-semibold text-blue-800",children:pg(e.totalExpenses)}),(0,Am.jsx)("div",{className:"flex items-center mt-1",children:(0,Am.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("credit"===e.type?"bg-blue-200 text-blue-800":"bg-green-200 text-green-800"),children:"credit"===e.type?"Cr\xe9dito":"D\xe9bito"})})]})]})},e.id))]})]}),(0,Am.jsxs)("div",{className:"mb-8",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones R\xe1pidas"}),(0,Am.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,Am.jsxs)("button",{onClick:()=>et("income"),disabled:$,className:`group flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 transform ${$?"bg-emerald-400 cursor-not-allowed":"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 hover:scale-105 hover:shadow-lg"} text-white shadow-md`,children:[$?(0,Am.jsx)(tg,{className:"h-5 w-5 animate-spin"}):(0,Am.jsx)(Xm,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),(0,Am.jsx)("span",{children:$?"Procesando...":"Agregar Ingreso"})]}),(0,Am.jsxs)("button",{onClick:()=>et("expense"),disabled:$,className:`group flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 transform ${$?"bg-red-400 cursor-not-allowed":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 hover:scale-105 hover:shadow-lg"} text-white shadow-md`,children:[$?(0,Am.jsx)(tg,{className:"h-5 w-5 animate-spin"}):(0,Am.jsx)(Jm,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),(0,Am.jsx)("span",{children:$?"Procesando...":"Agregar Egreso"})]}),(0,Am.jsxs)("button",{onClick:function(){Te(!0),Ae({fromBalance:"",toBalance:"",amount:"",description:""})},disabled:Pe,className:`group flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 transform ${Pe?"bg-blue-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 hover:scale-105 hover:shadow-lg"} text-white shadow-md`,children:[Pe?(0,Am.jsx)(tg,{className:"h-5 w-5 animate-spin"}):(0,Am.jsx)(ng,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),(0,Am.jsx)("span",{children:Pe?"Procesando...":"Transferir"})]}),(0,Am.jsxs)("button",{onClick:function(){me(!0)},className:"group flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 transform bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 hover:scale-105 hover:shadow-lg text-white shadow-md",children:[(0,Am.jsx)(Zm,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),(0,Am.jsx)("span",{children:"Mis Tarjetas"})]}),(0,Am.jsxs)("button",{onClick:()=>de(!0),className:"group flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 transform bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 hover:scale-105 hover:shadow-lg text-white shadow-md",children:[(0,Am.jsx)(Km,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),(0,Am.jsx)("span",{children:"Balance Futuro"})]}),(0,Am.jsxs)("button",{onClick:nt,disabled:H,className:`group flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-200 transform ${H?"bg-purple-400 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 hover:scale-105 hover:shadow-lg"} text-white shadow-md`,children:[H?(0,Am.jsx)(tg,{className:"h-5 w-5 animate-spin"}):(0,Am.jsx)(qm,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),(0,Am.jsx)("span",{children:H?"Creando...":"Crear Balance"})]}),(0,Am.jsxs)("button",{onClick:()=>st("income"),className:"group flex items-center space-x-2 px-6 py-3 rounded-xl font-medium bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 text-white shadow-md hover:scale-105 hover:shadow-lg transition-all duration-200 transform",children:[(0,Am.jsx)(rg,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),(0,Am.jsx)("span",{children:"Ingreso Autom\xe1tico"})]}),(0,Am.jsxs)("button",{onClick:()=>st("expense"),className:"group flex items-center space-x-2 px-6 py-3 rounded-xl font-medium bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-md hover:scale-105 hover:shadow-lg transition-all duration-200 transform",children:[(0,Am.jsx)(sg,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),(0,Am.jsx)("span",{children:"Egreso Autom\xe1tico"})]})]})]}),Dt.length>0&&(0,Am.jsxs)("div",{className:"mb-8",children:[(0,Am.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Am.jsx)(ig,{className:"h-5 w-5 mr-2"}),"Mis Balances"]}),(0,Am.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Dt.map(e=>(0,Am.jsxs)("div",{className:"p-6 rounded-xl shadow-lg border-2 transition-all duration-200 hover:shadow-xl hover:scale-105 "+("savings"===e.type?"bg-gradient-to-br from-green-50 to-green-100 border-green-200 hover:border-green-300":"debt"===e.type?"bg-gradient-to-br from-red-50 to-red-100 border-red-200 hover:border-red-300":"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 hover:border-blue-300"),children:[(0,Am.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-2",children:[yg(e.type),(0,Am.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name})]}),"general"!==e.type&&(0,Am.jsxs)(Am.Fragment,{children:[(0,Am.jsx)("button",{onClick:()=>function(e){k(!0),Xe({amount:"",description:"",balanceId:e.id})}(e),className:"ml-2 px-3 py-1 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 text-xs font-semibold",title:"Abonar a este balance",children:"Abonar"}),(0,Am.jsx)("button",{onClick:()=>nt(e),className:"group p-2 rounded-lg hover:bg-blue-100 transition-all duration-200 transform hover:scale-110",title:"Editar balance",children:(0,Am.jsx)(ag,{className:"h-4 w-4 text-blue-600 group-hover:text-blue-700"})}),(0,Am.jsx)("button",{onClick:()=>async function(e){ut("Eliminar Balance","\xbfEst\xe1s seguro de que quieres eliminar este balance?","confirm",async()=>{try{await wm(vp(Im,"balances",e)),kt.success("Balance eliminado")}catch(t){kt.error("Error al eliminar el balance")}},null,"Eliminar","Cancelar")}(e.id),className:"group p-2 rounded-lg hover:bg-red-100 transition-all duration-200 transform hover:scale-110",title:"Eliminar balance",children:(0,Am.jsx)(og,{className:"h-4 w-4 text-red-600 group-hover:text-red-700"})})]})]}),(0,Am.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),"future"===e.type&&e.targetMonth&&(0,Am.jsxs)("p",{className:"text-xs text-orange-600 mb-2 font-medium",children:["\ud83d\udcc5 Pago programado para: ",e.targetMonth]}),(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsx)("span",{className:"text-lg font-bold text-gray-900",children:pg(e.currentAmount||0)}),e.goal&&(0,Am.jsxs)("span",{className:"text-sm text-gray-500",children:["Meta: ",pg(e.goal)]})]}),e.goal&&(0,Am.jsx)("div",{className:"mt-2",children:(0,Am.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Am.jsx)("div",{className:"h-2 rounded-full "+("savings"===e.type?"bg-green-500":"debt"===e.type?"bg-red-500":"bg-blue-500"),style:{width:`${Math.min(100,(e.currentAmount||0)/e.goal*100)}%`}})})})]},e.id))})]}),ge.length>0&&(0,Am.jsxs)("div",{className:"mb-8",children:[(0,Am.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Am.jsx)(Zm,{className:"h-5 w-5 mr-2"}),"Mis Tarjetas"]}),(0,Am.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ge.map(e=>(0,Am.jsxs)("div",{className:"p-6 rounded-xl shadow-lg border-2 transition-all duration-200 hover:shadow-xl hover:scale-105 "+("credit"===e.type?"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 hover:border-purple-300":"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 hover:border-blue-300"),children:[(0,Am.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Am.jsx)(Zm,{className:"h-5 w-5 "+("credit"===e.type?"text-purple-600":"text-blue-600")}),(0,Am.jsx)("h4",{className:"font-semibold text-gray-900",children:e.nickname})]}),(0,Am.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Am.jsx)("button",{onClick:()=>ft(e),className:"group p-2 rounded-lg hover:bg-blue-100 transition-all duration-200 transform hover:scale-110",title:"Editar tarjeta",children:(0,Am.jsx)(ag,{className:"h-4 w-4 text-blue-600 group-hover:text-blue-700"})}),(0,Am.jsx)("button",{onClick:()=>_t(e.id),className:"group p-2 rounded-lg hover:bg-red-100 transition-all duration-200 transform hover:scale-110",title:"Eliminar tarjeta",children:(0,Am.jsx)(og,{className:"h-4 w-4 text-red-600 group-hover:text-red-700"})})]})]}),(0,Am.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[e.bank," \u2022\u2022\u2022\u2022 ",e.lastFourDigits]}),(0,Am.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,Am.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium "+("credit"===e.type?"bg-purple-200 text-purple-800":"bg-blue-200 text-blue-800"),children:"credit"===e.type?"Cr\xe9dito":"D\xe9bito"})}),(0,Am.jsxs)("div",{className:"space-y-1",children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsx)("span",{className:"text-sm text-gray-600",children:"Gasto total:"}),(0,Am.jsx)("span",{className:"text-lg font-bold text-gray-900",children:pg(It(e.id))})]}),"credit"===e.type&&e.creditLimit&&(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsx)("span",{className:"text-sm text-gray-600",children:"L\xedmite:"}),(0,Am.jsx)("span",{className:"text-sm font-medium text-purple-600",children:pg(parseInt(e.creditLimit))})]}),"credit"===e.type&&Nt(e.id)>0&&(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsx)("span",{className:"text-sm text-gray-600",children:"Pendiente:"}),(0,Am.jsx)("span",{className:"text-sm font-medium text-red-600",children:pg(Nt(e.id))})]})]}),"credit"===e.type&&(0,Am.jsx)("div",{className:"mt-3",children:(0,Am.jsx)("button",{onClick:()=>mt(e),className:"w-full px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm font-semibold transition-colors duration-200",title:"Pagar tarjeta",children:"Pagar"})})]},e.id))})]}),(0,Am.jsxs)("div",{className:"mb-8",children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Am.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Am.jsx)(Km,{className:"h-5 w-5 mr-2"}),"Transacciones Recientes"]}),(0,Am.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Am.jsxs)("div",{className:"relative",children:[(0,Am.jsxs)("select",{value:C,onChange:e=>ht(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm text-gray-700 hover:border-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none transition-colors duration-200",children:[(0,Am.jsx)("option",{value:"all",children:"Todas"}),(0,Am.jsx)("option",{value:"income",children:"Solo Ingresos"}),(0,Am.jsx)("option",{value:"expense",children:"Solo Egresos"})]}),(0,Am.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,Am.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Am.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,Am.jsxs)("div",{className:"relative",children:[(0,Am.jsxs)("select",{value:A,onChange:e=>xt(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm text-gray-700 hover:border-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none transition-colors duration-200",children:[(0,Am.jsx)("option",{value:"all",children:"Todas las fechas"}),(0,Am.jsx)("option",{value:"today",children:"Hoy"}),(0,Am.jsx)("option",{value:"week",children:"Esta semana"}),(0,Am.jsx)("option",{value:"month",children:"Este mes"}),(0,Am.jsx)("option",{value:"year",children:"Este a\xf1o"}),(0,Am.jsx)("option",{value:"custom",children:"Rango personalizado"})]}),(0,Am.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,Am.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Am.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,Am.jsxs)("div",{className:"relative",children:[(0,Am.jsxs)("select",{value:M,onChange:e=>wt(e.target.value),className:"appearance-none border rounded-lg px-3 py-2 pr-8 text-sm focus:ring-1 focus:outline-none transition-colors duration-200 "+("income"===C?"bg-gray-50 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white border-gray-300 text-gray-700 hover:border-gray-400 focus:border-blue-500 focus:ring-blue-500"),disabled:"income"===C,children:[(0,Am.jsx)("option",{value:"all",children:"Todos los m\xe9todos"}),(0,Am.jsx)("option",{value:"efectivo",children:"Efectivo"}),(0,Am.jsx)("option",{value:"tarjeta",children:"Tarjeta"})]}),(0,Am.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,Am.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Am.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),("all"!==C||"all"!==A||"all"!==M)&&(0,Am.jsxs)("button",{onClick:()=>{ht("all"),xt("all"),wt("all"),R(""),L("")},className:"flex items-center space-x-1 px-3 py-2 bg-gray-50 hover:bg-gray-100 text-gray-600 hover:text-gray-700 rounded-lg text-sm font-medium transition-colors duration-200 border border-gray-200 hover:border-gray-300",children:[(0,Am.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Am.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,Am.jsx)("span",{children:"Limpiar"})]})]})]}),"custom"===A&&(0,Am.jsx)("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border",children:(0,Am.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,Am.jsxs)("div",{className:"flex-1 min-w-48",children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha inicio"}),(0,Am.jsx)("input",{type:"date",value:D,onChange:e=>{R(e.target.value),E(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Am.jsxs)("div",{className:"flex-1 min-w-48",children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha fin"}),(0,Am.jsx)("input",{type:"date",value:O,onChange:e=>{L(e.target.value),E(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Am.jsx)("button",{onClick:()=>{R(""),L(""),E(1)},className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Limpiar"})]})}),(0,Am.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:["Mostrando ",Et.length," transacci\xf3n",1!==Et.length?"es":"","all"!==A&&D&&O&&(0,Am.jsxs)("span",{children:[" del ",bg(D)," al ",bg(O)]}),"all"!==M&&"expense"===C&&(0,Am.jsxs)("span",{children:[" pagadas con ","efectivo"===M?"\ud83d\udcb5 efectivo":"\ud83d\udcb3 tarjeta"]})]}),0===Et.length?(0,Am.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Am.jsx)(Km,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,Am.jsx)("p",{children:"No hay transacciones registradas"})]}):(0,Am.jsx)("div",{className:"space-y-3",children:jt.map(e=>{const t="Pago Tarjeta de Cr\xe9dito"===e.category,n=!0===e.isCreditExpense,r="Transferencia"===e.category;return(0,Am.jsx)("div",{className:"p-4 rounded-lg border-l-4 "+("income"===e.type?r?"bg-blue-50 border-blue-400":"bg-green-50 border-green-400":t||n?"bg-orange-50 border-orange-400":r?"bg-blue-50 border-blue-400":"bg-red-50 border-red-400"),children:(0,Am.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Am.jsxs)("div",{className:"flex-1",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:["income"===e.type?r?(0,Am.jsx)(ng,{className:"h-4 w-4 text-blue-600"}):(0,Am.jsx)(Xm,{className:"h-4 w-4 text-green-600"}):t||n?(0,Am.jsx)(Zm,{className:"h-4 w-4 text-orange-600"}):r?(0,Am.jsx)(ng,{className:"h-4 w-4 text-blue-600"}):(0,Am.jsx)(Jm,{className:"h-4 w-4 text-red-600"}),(0,Am.jsx)("span",{className:"font-medium text-gray-900",children:e.description}),(0,Am.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("income"===e.type?r?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800":t||n?"bg-orange-100 text-orange-800":r?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:e.category})]}),(0,Am.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,Am.jsx)("span",{children:bg(e.date)}),e.paymentMethod&&(0,Am.jsxs)("span",{className:"flex items-center space-x-1",children:["efectivo"===e.paymentMethod&&(0,Am.jsx)(eg,{className:"h-3 w-3"}),"tarjeta"===e.paymentMethod&&(0,Am.jsx)(Zm,{className:"h-3 w-3"}),(0,Am.jsx)("span",{className:"capitalize",children:e.paymentMethod})]})]})]}),(0,Am.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Am.jsxs)("div",{className:"text-right",children:[(0,Am.jsxs)("span",{className:"text-lg font-semibold "+("income"===e.type?r?"text-blue-600":"text-green-600":t||n?"text-orange-600":r?"text-blue-600":"text-red-600"),children:["income"===e.type?"+":"-",pg(e.amount)]}),t&&(0,Am.jsx)("p",{className:"text-xs text-orange-600 font-medium",children:"Pago realizado"}),n&&!t&&(0,Am.jsx)("p",{className:"text-xs text-orange-600 font-medium",children:"Gasto con tarjeta de cr\xe9dito"}),r&&(0,Am.jsx)("p",{className:"text-xs text-blue-600 font-medium",children:"Transferencia"})]}),(0,Am.jsxs)("div",{className:"flex space-x-1",children:[(0,Am.jsx)("button",{onClick:()=>et(e.type,e),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Editar transacci\xf3n",children:(0,Am.jsx)(ag,{className:"h-4 w-4"})}),(0,Am.jsx)("button",{onClick:()=>async function(e){ut("Eliminar Transacci\xf3n","\xbfEst\xe1s seguro de que quieres eliminar esta transacci\xf3n?","confirm",async()=>{try{await wm(vp(Im,"personalTransactions",e)),kt.success("Transacci\xf3n eliminada")}catch(t){kt.error("Error al eliminar la transacci\xf3n")}},null,"Eliminar","Cancelar")}(e.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Eliminar transacci\xf3n",children:(0,Am.jsx)(og,{className:"h-4 w-4"})})]})]})]})},e.id)})}),Tt>1&&(0,Am.jsxs)("div",{className:"mt-6",children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Am.jsxs)("div",{className:"text-sm text-gray-600",children:["Mostrando ",Ct+1," a ",Math.min(St,Et.length)," de ",Et.length," transacciones"]}),(0,Am.jsxs)("div",{className:"text-sm text-gray-500",children:["P\xe1gina ",_," de ",Tt]})]}),(0,Am.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,Am.jsx)("button",{onClick:()=>E(1),disabled:1===_,className:"px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Primera"}),(0,Am.jsx)("button",{onClick:()=>E(Math.max(1,_-1)),disabled:1===_,className:"p-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,Am.jsx)(lg,{className:"h-4 w-4"})}),(0,Am.jsx)("div",{className:"flex space-x-1",children:Array.from({length:Math.min(5,Tt)},(e,t)=>{let n;return n=Tt<=5||_<=3?t+1:_>=Tt-2?Tt-4+t:_-2+t,(0,Am.jsx)("button",{onClick:()=>E(n),className:"px-3 py-2 text-sm rounded-lg "+(_===n?"bg-blue-600 text-white":"border border-gray-300 text-gray-600 hover:bg-gray-50"),children:n},n)})}),(0,Am.jsx)("button",{onClick:()=>E(Math.min(Tt,_+1)),disabled:_===Tt,className:"p-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,Am.jsx)(cg,{className:"h-4 w-4"})}),(0,Am.jsx)("button",{onClick:()=>E(Tt),disabled:_===Tt,className:"px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"\xdaltima"})]})]})]}),(0,Am.jsxs)("div",{className:"mb-8",children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Am.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Am.jsx)(rg,{className:"h-5 w-5 mr-2"}),"Transacciones Autom\xe1ticas"]}),(0,Am.jsx)("div",{className:"flex space-x-2",children:(0,Am.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Am.jsx)("option",{value:"all",children:"Todas"}),(0,Am.jsx)("option",{value:"income",children:"Solo Ingresos"}),(0,Am.jsx)("option",{value:"expense",children:"Solo Egresos"})]})})]}),0===ct.length?(0,Am.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Am.jsx)(rg,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,Am.jsx)("p",{children:"No hay transacciones autom\xe1ticas configuradas"})]}):(0,Am.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ct.map(e=>(0,Am.jsx)("div",{className:"p-4 rounded-lg border-l-4 "+("income"===e.type?"bg-green-50 border-green-400":"bg-red-50 border-red-400"),children:(0,Am.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Am.jsxs)("div",{className:"flex-1",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:["income"===e.type?(0,Am.jsx)(Xm,{className:"h-4 w-4 text-green-600"}):(0,Am.jsx)(Jm,{className:"h-4 w-4 text-red-600"}),(0,Am.jsx)("span",{className:"font-medium text-gray-900",children:e.description}),(0,Am.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isActive?"Activo":"Inactivo"})]}),(0,Am.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Am.jsx)(Km,{className:"h-3 w-3"}),(0,Am.jsxs)("span",{children:["D\xeda ",e.dayOfMonth," de cada mes"]})]}),e.paymentMethod&&(0,Am.jsxs)("div",{className:"flex items-center space-x-1",children:["efectivo"===e.paymentMethod&&(0,Am.jsx)(eg,{className:"h-3 w-3"}),"tarjeta"===e.paymentMethod&&(0,Am.jsx)(Zm,{className:"h-3 w-3"}),(0,Am.jsx)("span",{className:"capitalize",children:e.paymentMethod})]})]})]}),(0,Am.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Am.jsxs)("span",{className:"text-lg font-semibold "+("income"===e.type?"text-green-600":"text-red-600"),children:["income"===e.type?"+":"-",pg(e.amount)]}),(0,Am.jsxs)("div",{className:"flex space-x-1",children:[(0,Am.jsx)("button",{onClick:()=>async function(e,t){try{await xm(vp(Im,"recurringTransactions",e),{isActive:!t}),kt.success(t?"Transacci\xf3n autom\xe1tica pausada":"Transacci\xf3n autom\xe1tica activada")}catch(n){kt.error("Error al cambiar el estado")}}(e.id,!e.isActive),className:"p-1 rounded transition-colors "+(e.isActive?"text-green-600 hover:text-green-700":"text-gray-400 hover:text-green-600"),title:e.isActive?"Desactivar":"Activar",children:(0,Am.jsx)(ug,{className:"h-4 w-4"})}),(0,Am.jsx)("button",{onClick:()=>async function(e){ut("Eliminar Transacci\xf3n Autom\xe1tica","\xbfEst\xe1s seguro de que quieres eliminar esta transacci\xf3n autom\xe1tica?","confirm",async()=>{try{await wm(vp(Im,"recurringTransactions",e)),kt.success("Transacci\xf3n autom\xe1tica eliminada")}catch(t){kt.error("Error al eliminar la transacci\xf3n autom\xe1tica")}},null,"Eliminar","Cancelar")}(e.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Eliminar transacci\xf3n autom\xe1tica",children:(0,Am.jsx)(og,{className:"h-4 w-4"})})]})]})]})},e.id))})]})]}):(0,Am.jsxs)("div",{children:[(0,Am.jsxs)("div",{className:"mb-8",children:[(0,Am.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Am.jsx)(Ym,{className:"h-5 w-5 mr-2"}),"Salas de Gastos Compartidos"]}),0===a.length?(0,Am.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Am.jsx)(Ym,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,Am.jsx)("p",{children:"No tienes salas de gastos compartidos"}),(0,Am.jsx)("p",{className:"text-sm",children:"\xdanete a una sala o crea una nueva para comenzar"})]}):(0,Am.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(e=>{var t;return(0,Am.jsxs)("div",{className:"p-6 rounded-xl shadow-lg border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-blue-100 hover:shadow-xl hover:scale-105 transition-all duration-200",children:[(0,Am.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Am.jsx)(Ym,{className:"h-6 w-6 text-blue-600"}),(0,Am.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name})]}),(0,Am.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[(null===(t=e.members)||void 0===t?void 0:t.length)||0," miembros"]})]}),(0,Am.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsxs)("span",{className:"text-sm text-gray-500",children:["Creado: ",e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleDateString("es-CO"):"N/A"]}),(0,Am.jsx)("button",{onClick:()=>n(`/room/${e.id}`),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Entrar"})]})]},e.id)})})]}),(0,Am.jsxs)("div",{className:"mb-8",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones de Salas"}),(0,Am.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,Am.jsxs)("button",{onClick:()=>re(!0),className:"group flex items-center space-x-2 px-6 py-3 rounded-xl font-medium bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white shadow-md hover:scale-105 hover:shadow-lg transition-all duration-200 transform",children:[(0,Am.jsx)(Ym,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),(0,Am.jsx)("span",{children:"Unirse a Sala"})]}),(0,Am.jsxs)("button",{onClick:()=>ie(!0),className:"group flex items-center space-x-2 px-6 py-3 rounded-xl font-medium bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white shadow-md hover:scale-105 hover:shadow-lg transition-all duration-200 transform",children:[(0,Am.jsx)(dg,{className:"h-5 w-5 group-hover:scale-110 transition-transform duration-200"}),(0,Am.jsx)("span",{children:"Crear Nueva Sala"})]})]})]})]}),x&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Mi Perfil"}),(0,Am.jsxs)("form",{onSubmit:async function t(n){n.preventDefault();try{if(Je.displayName!==e.displayName&&await t(e,Je.displayName),Je.newPassword){if(Je.newPassword.length<6)return void kt.error("La nueva contrase\xf1a debe tener al menos 6 caracteres");if(Je.newPassword!==Je.confirmPassword)return void kt.error("Las contrase\xf1as no coinciden");if(!Je.currentPassword)return void kt.error("Debes proporcionar tu contrase\xf1a actual");const t=si.credential(e.email,Je.currentPassword);await xi(e,t),await(r=e,s=Je.newPassword,ki(Gt(r),null,s))}kt.success("Perfil actualizado exitosamente"),bt()}catch(i){"auth/wrong-password"===i.code?kt.error("La contrase\xf1a actual es incorrecta"):kt.error("Error al actualizar el perfil")}var r,s},children:[(0,Am.jsxs)("div",{className:"space-y-4",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de Usuario"}),(0,Am.jsx)("input",{type:"text",value:Je.displayName,onChange:e=>Ze({...Je,displayName:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tu nombre de usuario",required:!0})]}),(0,Am.jsxs)("div",{className:"border-t pt-4",children:[(0,Am.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Cambiar Contrase\xf1a"}),(0,Am.jsxs)("div",{className:"space-y-3",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrase\xf1a Actual"}),(0,Am.jsxs)("div",{className:"relative",children:[(0,Am.jsx)("input",{type:Z.current?"text":"password",value:Je.currentPassword,onChange:e=>Ze({...Je,currentPassword:e.target.value}),className:"w-full p-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contrase\xf1a actual"}),(0,Am.jsx)("button",{type:"button",onClick:()=>ee({...Z,current:!Z.current}),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:Z.current?(0,Am.jsx)(Vm,{className:"h-4 w-4"}):(0,Am.jsx)(zm,{className:"h-4 w-4"})})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva Contrase\xf1a"}),(0,Am.jsxs)("div",{className:"relative",children:[(0,Am.jsx)("input",{type:Z.new?"text":"password",value:Je.newPassword,onChange:e=>Ze({...Je,newPassword:e.target.value}),className:"w-full p-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nueva contrase\xf1a (m\xednimo 6 caracteres)"}),(0,Am.jsx)("button",{type:"button",onClick:()=>ee({...Z,new:!Z.new}),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:Z.new?(0,Am.jsx)(Vm,{className:"h-4 w-4"}):(0,Am.jsx)(zm,{className:"h-4 w-4"})})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Nueva Contrase\xf1a"}),(0,Am.jsxs)("div",{className:"relative",children:[(0,Am.jsx)("input",{type:Z.confirm?"text":"password",value:Je.confirmPassword,onChange:e=>Ze({...Je,confirmPassword:e.target.value}),className:"w-full p-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirmar nueva contrase\xf1a"}),(0,Am.jsx)("button",{type:"button",onClick:()=>ee({...Z,confirm:!Z.confirm}),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:Z.confirm?(0,Am.jsx)(Vm,{className:"h-4 w-4"}):(0,Am.jsx)(zm,{className:"h-4 w-4"})})]})]})]})]})]}),(0,Am.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Am.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700",children:"Guardar Cambios"}),(0,Am.jsx)("button",{type:"button",onClick:bt,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),p&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-4 sm:p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold mb-3",children:U?"Editar "+("income"===ze.type?"Ingreso":"Egreso"):"Agregar "+("income"===ze.type?"Ingreso":"Egreso")}),(0,Am.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),!$)if(ze.description&&ze.amount&&ze.category)if("tarjeta"!==ze.paymentMethod||ze.selectedCard){q(!0);try{const t="expense"===ze.type&&"tarjeta"===ze.paymentMethod&&ze.selectedCard;let n=null;if(t){const e=ge.find(e=>e.id===ze.selectedCard);n=e?e.type:null}const r={userId:e.uid,type:ze.type,description:ze.description,amount:parseFloat(ze.amount),category:ze.category,date:ze.date,paymentMethod:ze.paymentMethod,balance:ze.balance||null,selectedCard:ze.selectedCard||null,isCreditExpense:t&&"credit"===n,updatedAt:Sm()};U?(await xm(vp(Im,"personalTransactions",U.id),r),kt.success("Transacci\xf3n actualizada exitosamente")):(r.createdAt=Sm(),await Nm(yp(Im,"personalTransactions"),r),kt.success(("income"===ze.type?"Ingreso":"Egreso")+" agregado exitosamente")),tt()}catch(n){kt.error(U?"Error al actualizar la transacci\xf3n":"Error al agregar la transacci\xf3n")}finally{q(!1)}}else kt.error("Por favor selecciona una tarjeta");else kt.error("Por favor completa todos los campos")},children:[(0,Am.jsxs)("div",{className:"space-y-3",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tipo"}),(0,Am.jsxs)("select",{value:ze.type,onChange:e=>$e({...ze,type:e.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Am.jsx)("option",{value:"income",children:"Ingreso"}),(0,Am.jsx)("option",{value:"expense",children:"Egreso"})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),(0,Am.jsx)("input",{type:"text",value:ze.description,onChange:e=>$e({...ze,description:e.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Salario, Compras, etc.",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Monto (COP)"}),(0,Am.jsx)("input",{type:"text",inputMode:"numeric",value:mg(ze.amount),onChange:e=>{const t=gg(e.target.value);/^\d*$/.test(t)&&$e({...ze,amount:t})},className:"w-full p-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categor\xeda"}),(0,Am.jsxs)("select",{value:ze.category,onChange:e=>$e({...ze,category:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,Am.jsx)("option",{value:"",children:"Seleccionar categor\xeda"}),"income"===ze.type?(0,Am.jsxs)(Am.Fragment,{children:[(0,Am.jsx)("option",{value:"Salario",children:"Salario"}),(0,Am.jsx)("option",{value:"Freelance",children:"Freelance"}),(0,Am.jsx)("option",{value:"Inversiones",children:"Inversiones"}),(0,Am.jsx)("option",{value:"Ventas",children:"Ventas"}),(0,Am.jsx)("option",{value:"Otros ingresos",children:"Otros ingresos"})]}):(0,Am.jsxs)(Am.Fragment,{children:[(0,Am.jsx)("option",{value:"Alimentaci\xf3n",children:"Alimentaci\xf3n"}),(0,Am.jsx)("option",{value:"Transporte",children:"Transporte"}),(0,Am.jsx)("option",{value:"Servicios",children:"Servicios"}),(0,Am.jsx)("option",{value:"Entretenimiento",children:"Entretenimiento"}),(0,Am.jsx)("option",{value:"Salud",children:"Salud"}),(0,Am.jsx)("option",{value:"Educaci\xf3n",children:"Educaci\xf3n"}),(0,Am.jsx)("option",{value:"Compras",children:"Compras"}),(0,Am.jsx)("option",{value:"Otros gastos",children:"Otros gastos"})]})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha"}),(0,Am.jsx)("input",{type:"date",value:ze.date,onChange:e=>$e({...ze,date:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),"expense"===ze.type&&(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xe9todo de Pago"}),(0,Am.jsxs)("select",{value:ze.paymentMethod,onChange:e=>$e({...ze,paymentMethod:e.target.value,selectedCard:""}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Am.jsx)("option",{value:"efectivo",children:"\ud83d\udcb5 Efectivo"}),(0,Am.jsx)("option",{value:"tarjeta",children:"\ud83d\udcb3 Tarjeta"})]}),"tarjeta"===ze.paymentMethod&&(0,Am.jsxs)("div",{className:"mt-2",children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccionar Tarjeta"}),(0,Am.jsxs)("select",{value:ze.selectedCard||"",onChange:e=>$e({...ze,selectedCard:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,Am.jsx)("option",{value:"",children:"Seleccionar tarjeta"}),ge.map(e=>(0,Am.jsxs)("option",{value:e.id,children:[(e.type,"\ud83d\udcb3")," ",e.bank," - ",e.nickname," (****",e.lastFourDigits,")"]},e.id))]}),0===ge.length&&(0,Am.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:["No tienes tarjetas registradas. ",(0,Am.jsx)("button",{type:"button",onClick:()=>me(!0),className:"underline",children:"Agregar tarjeta"})]}),ze.selectedCard&&(0,Am.jsxs)("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,Am.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Am.jsx)(Zm,{className:"h-4 w-4 text-blue-600"}),(0,Am.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Gasto acumulado con esta tarjeta:"})]}),(0,Am.jsx)("span",{className:"text-sm font-semibold text-blue-900",children:pg(It(ze.selectedCard))})]}),It(ze.selectedCard)>0&&(0,Am.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"Este monto se sumar\xe1 al total actual"})]})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asignar a Balance (Opcional)"}),(0,Am.jsxs)("select",{value:ze.balance,onChange:e=>$e({...ze,balance:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Am.jsx)("option",{value:"",children:"Sin asignar"}),Dt.map(e=>(0,Am.jsxs)("option",{value:e.id,children:["future"===e.type?"\ud83d\udcc5 ":"savings"===e.type?"\ud83d\udc37 ":"debt"===e.type?"\u26a0\ufe0f ":"\ud83d\udcb0 ",e.name]},e.id))]}),(0,Am.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Selecciona un balance para asignar esta transacci\xf3n (\xfatil para balances futuros)"})]})]}),(0,Am.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Am.jsxs)("button",{type:"submit",disabled:$,className:"flex-1 flex items-center justify-center space-x-2 text-white py-2 px-4 rounded-lg transition-colors "+($?("income"===ze.type?"bg-emerald-400":"bg-red-400")+" cursor-not-allowed":"income"===ze.type?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700"),children:[$&&(0,Am.jsx)(tg,{className:"h-4 w-4 animate-spin"}),(0,Am.jsx)("span",{children:$?U?"Actualizando...":"Agregando...":U?"Actualizar "+("income"===ze.type?"Ingreso":"Egreso"):"Agregar "+("income"===ze.type?"Ingreso":"Egreso")})]}),(0,Am.jsx)("button",{type:"button",onClick:tt,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),g&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold mb-4",children:V?"Editar Balance":"Crear Nuevo Balance"}),(0,Am.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),!H)if(qe.name&&qe.description){W(!0);try{if(V){const e={name:qe.name,type:qe.type,description:qe.description,goal:qe.goal?parseFloat(qe.goal):null,updatedAt:Sm()};"future"===qe.type&&qe.targetMonth&&(e.targetMonth=qe.targetMonth),await xm(vp(Im,"balances",V.id),e),kt.success("Balance actualizado exitosamente")}else{const t={userId:e.uid,name:qe.name,type:qe.type,description:qe.description,goal:qe.goal?parseFloat(qe.goal):null,currentAmount:0,createdAt:Sm()};"future"===qe.type&&qe.targetMonth&&(t.targetMonth=qe.targetMonth),await Nm(yp(Im,"balances"),t),kt.success("Balance creado exitosamente")}rt()}catch(n){kt.error(V?"Error al actualizar el balance":"Error al crear el balance")}finally{W(!1)}}else kt.error("Por favor completa todos los campos obligatorios")},children:[(0,Am.jsxs)("div",{className:"space-y-4",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Balance"}),(0,Am.jsx)("input",{type:"text",value:qe.name,onChange:e=>He({...qe,name:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Vacaciones, Emergencias, etc.",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Balance"}),(0,Am.jsxs)("select",{value:qe.type,onChange:e=>He({...qe,type:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Am.jsx)("option",{value:"savings",children:"\ud83d\udc37 Ahorro"}),(0,Am.jsx)("option",{value:"debt",children:"\u26a0\ufe0f Deuda"}),(0,Am.jsx)("option",{value:"future",children:"\ud83d\udcc5 Balance Futuro"})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,Am.jsx)("textarea",{value:qe.description,onChange:e=>He({...qe,description:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe el prop\xf3sito de este balance...",rows:"3",required:!0})]}),"future"===qe.type?(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mes de Pago"}),(0,Am.jsx)("input",{type:"month",value:qe.targetMonth,onChange:e=>He({...qe,targetMonth:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),(0,Am.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Selecciona el mes en que planeas pagar estos gastos de tarjeta de cr\xe9dito"})]}):(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta (Opcional)"}),(0,Am.jsx)("input",{type:"text",inputMode:"numeric",value:mg(qe.goal),onChange:e=>{const t=gg(e.target.value);/^\d*$/.test(t)&&He({...qe,goal:t})},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"}),(0,Am.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"savings"===qe.type?"Cantidad que quieres ahorrar":"debt"===qe.type?"Cantidad de la deuda total":"Meta financiera para este balance"})]})]}),(0,Am.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Am.jsxs)("button",{type:"submit",disabled:H,className:"flex-1 flex items-center justify-center space-x-2 text-white py-2 px-4 rounded-lg transition-colors "+(H?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"),children:[H&&(0,Am.jsx)(tg,{className:"h-4 w-4 animate-spin"}),(0,Am.jsx)("span",{children:H?V?"Actualizando...":"Creando...":V?"Actualizar Balance":"Crear Balance"})]}),(0,Am.jsx)("button",{type:"button",onClick:rt,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),v&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Am.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Crear ","income"===We.type?"Ingreso":"Egreso"," Autom\xe1tico"]}),(0,Am.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),We.description&&We.amount&&We.category)if("tarjeta"!==We.paymentMethod||We.selectedCard)try{await Nm(yp(Im,"recurringTransactions"),{userId:e.uid,type:We.type,description:We.description,amount:parseFloat(We.amount),category:We.category,paymentMethod:We.paymentMethod,frequency:We.frequency,dayOfMonth:parseInt(We.dayOfMonth),isActive:We.isActive,selectedCard:We.selectedCard||null,createdAt:Sm(),lastExecuted:null}),yt(),kt.success(("income"===We.type?"Ingreso":"Egreso")+" autom\xe1tico creado exitosamente")}catch(n){kt.error("Error al crear la transacci\xf3n autom\xe1tica")}else kt.error("Por favor selecciona una tarjeta");else kt.error("Por favor completa todos los campos")},children:[(0,Am.jsxs)("div",{className:"space-y-4",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),(0,Am.jsxs)("select",{value:We.type,onChange:e=>Ke({...We,type:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Am.jsx)("option",{value:"income",children:"Ingreso"}),(0,Am.jsx)("option",{value:"expense",children:"Egreso"})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,Am.jsx)("input",{type:"text",value:We.description,onChange:e=>Ke({...We,description:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Salario, Arriendo, Servicios...",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto (COP)"}),(0,Am.jsx)("input",{type:"text",inputMode:"numeric",value:mg(We.amount),onChange:e=>{const t=gg(e.target.value);/^\d*$/.test(t)&&Ke({...We,amount:t})},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categor\xeda"}),(0,Am.jsxs)("select",{value:We.category,onChange:e=>Ke({...We,category:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,Am.jsx)("option",{value:"",children:"Selecciona una categor\xeda"}),"income"===We.type?(0,Am.jsxs)(Am.Fragment,{children:[(0,Am.jsx)("option",{value:"Salario",children:"Salario"}),(0,Am.jsx)("option",{value:"Freelance",children:"Freelance"}),(0,Am.jsx)("option",{value:"Inversiones",children:"Inversiones"}),(0,Am.jsx)("option",{value:"Otros ingresos",children:"Otros ingresos"})]}):(0,Am.jsxs)(Am.Fragment,{children:[(0,Am.jsx)("option",{value:"Arriendo",children:"Arriendo"}),(0,Am.jsx)("option",{value:"Servicios",children:"Servicios p\xfablicos"}),(0,Am.jsx)("option",{value:"Internet",children:"Internet"}),(0,Am.jsx)("option",{value:"Celular",children:"Celular"}),(0,Am.jsx)("option",{value:"Gimnasio",children:"Gimnasio"}),(0,Am.jsx)("option",{value:"Suscripciones",children:"Suscripciones"}),(0,Am.jsx)("option",{value:"Otros gastos",children:"Otros gastos"})]})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D\xeda del mes para ejecutar"}),(0,Am.jsx)("input",{type:"number",min:"1",max:"28",value:We.dayOfMonth,onChange:e=>Ke({...We,dayOfMonth:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),(0,Am.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Recomendado: d\xeda 1-28 para que funcione en todos los meses"})]}),"expense"===We.type&&(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xe9todo de Pago"}),(0,Am.jsxs)("select",{value:We.paymentMethod,onChange:e=>Ke({...We,paymentMethod:e.target.value,selectedCard:""}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Am.jsx)("option",{value:"efectivo",children:"\ud83d\udcb5 Efectivo"}),(0,Am.jsx)("option",{value:"tarjeta",children:"\ud83d\udcb3 Tarjeta"})]}),"tarjeta"===We.paymentMethod&&(0,Am.jsxs)("div",{className:"mt-2",children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccionar Tarjeta"}),(0,Am.jsxs)("select",{value:We.selectedCard||"",onChange:e=>Ke({...We,selectedCard:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,Am.jsx)("option",{value:"",children:"Seleccionar tarjeta"}),ge.map(e=>(0,Am.jsxs)("option",{value:e.id,children:[(e.type,"\ud83d\udcb3")," ",e.bank," - ",e.nickname," (****",e.lastFourDigits,")"]},e.id))]}),0===ge.length&&(0,Am.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:["No tienes tarjetas registradas. ",(0,Am.jsx)("button",{type:"button",onClick:()=>me(!0),className:"underline",children:"Agregar tarjeta"})]}),We.selectedCard&&(0,Am.jsxs)("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,Am.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Am.jsx)(Zm,{className:"h-4 w-4 text-blue-600"}),(0,Am.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Gasto acumulado con esta tarjeta:"})]}),(0,Am.jsx)("span",{className:"text-sm font-semibold text-blue-900",children:pg(It(We.selectedCard))})]}),It(We.selectedCard)>0&&(0,Am.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"Este monto se sumar\xe1 al total actual"})]})]})]})]}),(0,Am.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Am.jsxs)("button",{type:"submit",className:"flex-1 text-white py-2 px-4 rounded-lg transition-colors "+("income"===We.type?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700"),children:["Crear ","income"===We.type?"Ingreso":"Egreso"," Autom\xe1tico"]}),(0,Am.jsx)("button",{type:"button",onClick:yt,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),je&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Transferir entre Balances"}),(0,Am.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),!Ie.fromBalance||!Ie.toBalance||!Ie.amount)return void kt.error("Completa todos los campos obligatorios");if(Ie.fromBalance===Ie.toBalance)return void kt.error("No puedes transferir al mismo balance");const n=gg(Ie.amount);if(!n||n<=0)return void kt.error("Ingresa un monto v\xe1lido");const r=u.find(e=>e.id===Ie.fromBalance),s=u.find(e=>e.id===Ie.toBalance);if(!r||!s)return void kt.error("Balance no encontrado");const i=function(e){const t=u.find(t=>t.id===e);if(!t)return 0;if("future"===t.type){const t=l.filter(t=>"expense"===t.type&&t.balance===e).reduce((e,t)=>e+(t.amount||0),0);return t}{const t=l.filter(t=>t.balance===e),n=t.filter(e=>"income"===e.type).reduce((e,t)=>e+(t.amount||0),0),r=t.filter(e=>"expense"===e.type).filter(e=>{if("efectivo"===e.paymentMethod)return!0;if("tarjeta"===e.paymentMethod&&e.selectedCard){const t=ge.find(t=>t.id===e.selectedCard);if(t&&"debit"===t.type)return!0;if(t&&"credit"===t.type)return!("Pago Tarjeta de Cr\xe9dito"!==e.category)}return!0}).reduce((e,t)=>e+(t.amount||0),0);return n-r}}(r.id);if(i<n)kt.error(`Saldo insuficiente. Disponible: ${pg(i)}`);else{De(!0);try{const t={type:"expense",amount:n,description:Ie.description||`Transferencia a ${s.name}`,category:"Transferencia",paymentMethod:"transferencia",balanceId:Ie.fromBalance,userId:e.uid,date:new Date,createdAt:Sm(),isTransfer:!0,transferTo:Ie.toBalance},i={type:"income",amount:n,description:Ie.description||`Transferencia desde ${r.name}`,category:"Transferencia",paymentMethod:"transferencia",balanceId:Ie.toBalance,userId:e.uid,date:new Date,createdAt:Sm(),isTransfer:!0,transferFrom:Ie.fromBalance};await Nm(yp(Im,"personalTransactions"),t),await Nm(yp(Im,"personalTransactions"),i),kt.success(`Transferencia de ${pg(n)} realizada exitosamente`),gt()}catch(a){console.error("Error al realizar transferencia:",a),kt.error("Error al realizar la transferencia")}finally{De(!1)}}},children:[(0,Am.jsxs)("div",{className:"space-y-4",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balance Origen"}),(0,Am.jsxs)("select",{value:Ie.fromBalance,onChange:e=>Ae({...Ie,fromBalance:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,Am.jsx)("option",{value:"",children:"Seleccionar balance origen"}),Dt.map(e=>(0,Am.jsxs)("option",{value:e.id,children:[e.name," - ",pg(e.currentAmount)]},e.id))]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balance Destino"}),(0,Am.jsxs)("select",{value:Ie.toBalance,onChange:e=>Ae({...Ie,toBalance:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,Am.jsx)("option",{value:"",children:"Seleccionar balance destino"}),Dt.filter(e=>e.id!==Ie.fromBalance).map(e=>(0,Am.jsxs)("option",{value:e.id,children:[e.name," - ",pg(e.currentAmount)]},e.id))]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto"}),(0,Am.jsx)("input",{type:"text",value:Ie.amount,onChange:e=>Ae({...Ie,amount:e.target.value}),placeholder:"0",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n (opcional)"}),(0,Am.jsx)("input",{type:"text",value:Ie.description,onChange:e=>Ae({...Ie,description:e.target.value}),placeholder:"Transferencia entre balances",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,Am.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Am.jsx)("button",{type:"submit",disabled:Pe,className:"flex-1 text-white py-2 px-4 rounded-lg transition-colors "+(Pe?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:Pe?"Procesando...":"Transferir"}),(0,Am.jsx)("button",{type:"button",onClick:gt,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),pe&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold",children:"Mis Tarjetas"}),(0,Am.jsx)("button",{onClick:pt,className:"text-gray-500 hover:text-gray-700",children:(0,Am.jsx)(hg,{className:"h-6 w-6"})})]}),(0,Am.jsxs)("div",{className:"space-y-4",children:[ge.length>0?(0,Am.jsx)("div",{className:"space-y-3",children:ge.map(e=>(0,Am.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,Am.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Am.jsxs)("div",{className:"flex-1",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Am.jsx)(Zm,{className:"h-5 w-5 text-blue-600"}),(0,Am.jsx)("span",{className:"font-medium",children:e.bank}),(0,Am.jsx)("span",{className:"px-2 py-1 text-xs rounded-full "+("credit"===e.type?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:"credit"===e.type?"Cr\xe9dito":"D\xe9bito"})]}),(0,Am.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:[e.nickname," \u2022\u2022\u2022\u2022 ",e.lastFourDigits]}),(0,Am.jsxs)("p",{className:"text-sm font-medium text-gray-800",children:["Gasto total: ",pg(It(e.id))]}),"credit"===e.type&&e.creditLimit&&(0,Am.jsxs)("p",{className:"text-sm font-medium text-blue-600",children:["L\xedmite: ",pg(parseInt(e.creditLimit))]}),"credit"===e.type&&Nt(e.id)>0&&(0,Am.jsxs)("p",{className:"text-sm font-medium text-red-600",children:["Pendiente: ",pg(Nt(e.id))]})]}),(0,Am.jsxs)("div",{className:"flex space-x-2",children:[(0,Am.jsx)("button",{onClick:()=>ft(e),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors duration-200",title:"Editar tarjeta",children:(0,Am.jsx)(ag,{className:"h-4 w-4"})}),"credit"===e.type&&(0,Am.jsx)("button",{onClick:()=>mt(e),className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors duration-200",title:"Pagar tarjeta",children:(0,Am.jsx)(fg,{className:"h-4 w-4"})}),(0,Am.jsx)("button",{onClick:()=>_t(e.id),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"Eliminar tarjeta",children:(0,Am.jsx)(og,{className:"h-4 w-4"})})]})]})},e.id))}):(0,Am.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Am.jsx)(Zm,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,Am.jsx)("p",{children:"No tienes tarjetas registradas"})]}),(0,Am.jsxs)("div",{className:"border-t pt-4",children:[(0,Am.jsx)("h4",{className:"font-medium mb-3",children:ve?"Editar Tarjeta":"Agregar Nueva Tarjeta"}),(0,Am.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),Be.bank.trim()&&Be.lastFourDigits.trim()&&Be.nickname.trim()){Oe(!0);try{ve?(await xm(vp(Im,"cards",ve.id),{bank:Be.bank.trim(),type:Be.type,lastFourDigits:Be.lastFourDigits.trim(),nickname:Be.nickname.trim(),creditLimit:Be.creditLimit||"",updatedAt:Sm()}),kt.success(`Tarjeta "${Be.nickname}" actualizada exitosamente`)):(await Nm(yp(Im,"cards"),{userId:e.uid,bank:Be.bank.trim(),type:Be.type,lastFourDigits:Be.lastFourDigits.trim(),nickname:Be.nickname.trim(),creditLimit:Be.creditLimit||"",createdAt:Sm()}),kt.success(`Tarjeta "${Be.nickname}" agregada exitosamente`)),me(!1),be(null),Ve({bank:"",type:"credit",lastFourDigits:"",nickname:"",creditLimit:""})}catch(n){console.error("Error al procesar la tarjeta:",n),kt.error(ve?"Error al actualizar la tarjeta":"Error al agregar la tarjeta")}finally{Oe(!1)}}else kt.error("Por favor completa todos los campos")},className:"space-y-4",children:[(0,Am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banco"}),(0,Am.jsxs)("select",{value:Be.bank,onChange:e=>Ve({...Be,bank:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,Am.jsx)("option",{value:"",children:"Seleccionar banco"}),(0,Am.jsxs)("optgroup",{label:"Bancos Colombianas",children:[(0,Am.jsx)("option",{value:"Bancolombia",children:"Bancolombia"}),(0,Am.jsx)("option",{value:"BBVA Colombia",children:"BBVA Colombia"}),(0,Am.jsx)("option",{value:"Davivienda",children:"Davivienda"}),(0,Am.jsx)("option",{value:"Colpatria",children:"Colpatria"}),(0,Am.jsx)("option",{value:"Scotiabank Colpatria",children:"Scotiabank Colpatria"}),(0,Am.jsx)("option",{value:"Citibank Colombia",children:"Citibank Colombia"}),(0,Am.jsx)("option",{value:"HSBC Colombia",children:"HSBC Colombia"}),(0,Am.jsx)("option",{value:"Banco de Bogot\xe1",children:"Banco de Bogot\xe1"}),(0,Am.jsx)("option",{value:"Banco Popular",children:"Banco Popular"}),(0,Am.jsx)("option",{value:"Banco AV Villas",children:"Banco AV Villas"}),(0,Am.jsx)("option",{value:"Banco Caja Social",children:"Banco Caja Social"}),(0,Am.jsx)("option",{value:"Banco Falabella",children:"Banco Falabella"}),(0,Am.jsx)("option",{value:"Banco Pichincha",children:"Banco Pichincha"}),(0,Am.jsx)("option",{value:"Banco Santander",children:"Banco Santander"}),(0,Am.jsx)("option",{value:"Banco Agrario",children:"Banco Agrario"}),(0,Am.jsx)("option",{value:"Banco Cooperativo Coopcentral",children:"Banco Cooperativo Coopcentral"}),(0,Am.jsx)("option",{value:"Bancoomeva",children:"Bancoomeva"}),(0,Am.jsx)("option",{value:"Banco Finandina",children:"Banco Finandina"}),(0,Am.jsx)("option",{value:"Banco Mundo Mujer",children:"Banco Mundo Mujer"}),(0,Am.jsx)("option",{value:"Banco W",children:"Banco W"}),(0,Am.jsx)("option",{value:"Banco Compartir",children:"Banco Compartir"}),(0,Am.jsx)("option",{value:"Banco Serfinanza",children:"Banco Serfinanza"}),(0,Am.jsx)("option",{value:"Banco ProCredit",children:"Banco ProCredit"}),(0,Am.jsx)("option",{value:"Banco Ita\xfa",children:"Banco Ita\xfa"}),(0,Am.jsx)("option",{value:"Banco GNB Sudameris",children:"Banco GNB Sudameris"}),(0,Am.jsx)("option",{value:"Banco de Occidente",children:"Banco de Occidente"}),(0,Am.jsx)("option",{value:"Banco Corpbanca",children:"Banco Corpbanca"}),(0,Am.jsx)("option",{value:"Banco Helm",children:"Banco Helm"}),(0,Am.jsx)("option",{value:"Banco Colmena",children:"Banco Colmena"}),(0,Am.jsx)("option",{value:"Banco Coopcentral",children:"Banco Coopcentral"}),(0,Am.jsx)("option",{value:"Banco Coomeva",children:"Banco Coomeva"}),(0,Am.jsx)("option",{value:"Banco Credifinanciera",children:"Banco Credifinanciera"}),(0,Am.jsx)("option",{value:"Banco Financiero",children:"Banco Financiero"}),(0,Am.jsx)("option",{value:"Banco Finandina",children:"Banco Finandina"}),(0,Am.jsx)("option",{value:"Banco GNB Sudameris",children:"Banco GNB Sudameris"}),(0,Am.jsx)("option",{value:"Banco Ita\xfa",children:"Banco Ita\xfa"}),(0,Am.jsx)("option",{value:"Banco Mundo Mujer",children:"Banco Mundo Mujer"}),(0,Am.jsx)("option",{value:"Banco Pichincha",children:"Banco Pichincha"}),(0,Am.jsx)("option",{value:"Banco Popular",children:"Banco Popular"}),(0,Am.jsx)("option",{value:"Banco ProCredit",children:"Banco ProCredit"}),(0,Am.jsx)("option",{value:"Banco Santander",children:"Banco Santander"}),(0,Am.jsx)("option",{value:"Banco Serfinanza",children:"Banco Serfinanza"}),(0,Am.jsx)("option",{value:"Banco W",children:"Banco W"})]}),(0,Am.jsxs)("optgroup",{label:"Billeteras Digitales",children:[(0,Am.jsx)("option",{value:"Nequi",children:"Nequi"}),(0,Am.jsx)("option",{value:"Daviplata",children:"Daviplata"}),(0,Am.jsx)("option",{value:"Movii",children:"Movii"}),(0,Am.jsx)("option",{value:"Lulo Bank",children:"Lulo Bank"}),(0,Am.jsx)("option",{value:"RappiPay",children:"RappiPay"}),(0,Am.jsx)("option",{value:"Ual\xe1",children:"Ual\xe1"}),(0,Am.jsx)("option",{value:"Tyba",children:"Tyba"}),(0,Am.jsx)("option",{value:"Powwi",children:"Powwi"})]}),(0,Am.jsxs)("optgroup",{label:"Internacionales",children:[(0,Am.jsx)("option",{value:"PayPal",children:"PayPal"}),(0,Am.jsx)("option",{value:"Wise",children:"Wise"}),(0,Am.jsx)("option",{value:"Remitly",children:"Remitly"}),(0,Am.jsx)("option",{value:"Western Union",children:"Western Union"}),(0,Am.jsx)("option",{value:"Visa",children:"Visa"}),(0,Am.jsx)("option",{value:"Mastercard",children:"Mastercard"}),(0,Am.jsx)("option",{value:"American Express",children:"American Express"})]}),(0,Am.jsx)("option",{value:"Otro",children:"Otro"})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),(0,Am.jsxs)("select",{value:Be.type,onChange:e=>{const t=e.target.value;Ve({...Be,type:t,creditLimit:"debit"===t?"":Be.creditLimit})},className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Am.jsx)("option",{value:"credit",children:"Cr\xe9dito"}),(0,Am.jsx)("option",{value:"debit",children:"D\xe9bito"})]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apodo"}),(0,Am.jsx)("input",{type:"text",value:Be.nickname,onChange:e=>Ve({...Be,nickname:e.target.value}),placeholder:"Ej: Mi Visa",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\xdaltimos 4 d\xedgitos"}),(0,Am.jsx)("input",{type:"text",value:Be.lastFourDigits,onChange:e=>Ve({...Be,lastFourDigits:e.target.value}),placeholder:"1234",maxLength:"4",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),"credit"===Be.type&&(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"L\xedmite de cr\xe9dito"}),(0,Am.jsx)("input",{type:"text",inputMode:"numeric",value:mg(Be.creditLimit),onChange:e=>{const t=gg(e.target.value);/^\d*$/.test(t)&&Ve({...Be,creditLimit:t})},placeholder:"Ej: 5.000.000",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Am.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Monto m\xe1ximo que puedes gastar con esta tarjeta"})]})]}),(0,Am.jsxs)("div",{className:"flex space-x-3",children:[(0,Am.jsx)("button",{type:"submit",disabled:Re,className:"flex-1 text-white py-2 px-4 rounded-lg transition-colors "+(Re?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:Re?"Procesando...":ve?"Actualizar":"Agregar"}),(0,Am.jsx)("button",{type:"button",onClick:pt,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})]})]})}),xe&&Ne&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold",children:"Pagar Tarjeta de Cr\xe9dito"}),(0,Am.jsx)("button",{onClick:()=>we(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Am.jsx)(hg,{className:"h-6 w-6"})})]}),(0,Am.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Am.jsx)(Zm,{className:"h-5 w-5 text-blue-600"}),(0,Am.jsx)("span",{className:"font-medium",children:Ne.bank}),(0,Am.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800",children:"Cr\xe9dito"})]}),(0,Am.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:[Ne.nickname," \u2022\u2022\u2022\u2022 ",Ne.lastFourDigits]}),(0,Am.jsxs)("p",{className:"text-sm font-medium text-red-600",children:["Saldo pendiente: ",pg(Nt(Ne.id))]})]}),(0,Am.jsxs)("form",{onSubmit:async function(t){t.preventDefault();const n=gg(_e);if(!n||n<=0)return void kt.error("Ingresa un monto v\xe1lido");const r=Nt(Ne.id);if(n>r)kt.error(`El monto no puede ser mayor al saldo pendiente (${pg(r)})`);else{Oe(!0);try{const t={userId:e.uid,type:"expense",amount:n,description:`Pago tarjeta de cr\xe9dito ${Ne.nickname}`,category:"Pago Tarjeta de Cr\xe9dito",paymentMethod:"efectivo",selectedCard:Ne.id,date:new Date,createdAt:Sm()},r={id:(await Nm(yp(Im,"personalTransactions"),t)).id,...t,date:new Date,createdAt:(new Date).toISOString()};c(e=>{const t=[...e,r].sort((e,t)=>{const n=e.date?new Date(e.date):new Date(e.createdAt||0);return(t.date?new Date(t.date):new Date(t.createdAt||0))-n});return t}),kt.success(`Pago de ${pg(n)} registrado exitosamente`),we(!1),ke(null),Ee("")}catch(s){console.error("Error al registrar el pago:",s),kt.error("Error al registrar el pago")}finally{Oe(!1)}}},children:[(0,Am.jsx)("div",{className:"space-y-4",children:(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto a Pagar"}),(0,Am.jsx)("input",{type:"text",value:mg(_e),onChange:e=>{const t=gg(e.target.value);/^\d*$/.test(t)&&Ee(t)},placeholder:"0",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),(0,Am.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["M\xe1ximo: ",pg(Nt(Ne.id))]})]})}),(0,Am.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Am.jsx)("button",{type:"submit",disabled:Re,className:"flex-1 text-white py-2 px-4 rounded-lg transition-colors "+(Re?"bg-green-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:Re?"Procesando...":"Pagar"}),(0,Am.jsx)("button",{type:"button",onClick:()=>we(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),N&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Realizar Abono"}),(0,Am.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),!Ye.amount||!Ye.balanceId||K)return;const n=Dt.find(e=>e.id===Ye.balanceId);if(!n)return void kt.error("No se ha seleccionado un balance v\xe1lido para el abono");const r=parseFloat(Ye.amount);if(r<=0)kt.error("El monto debe ser mayor a 0");else{G(!0);try{"future"===n.type?(await Nm(yp(Im,"personalTransactions"),{userId:e.uid,type:"expense",description:Ye.description||`Gasto futuro - ${n.name}`,amount:r,category:"Gasto Futuro",date:(new Date).toISOString().split("T")[0],paymentMethod:"efectivo",balance:n.id,createdAt:Sm()}),kt.success(`Gasto futuro de $${mg(r)} agregado a ${n.name}`)):(await Nm(yp(Im,"personalTransactions"),{userId:e.uid,type:"expense",description:Ye.description||`Abono a ${n.name}`,amount:r,category:"Abono/Transferencia",date:(new Date).toISOString().split("T")[0],paymentMethod:"efectivo",balance:"principal",createdAt:Sm()}),await Nm(yp(Im,"personalTransactions"),{userId:e.uid,type:"income",description:Ye.description||"Abono recibido",amount:r,category:"Abono/Transferencia",date:(new Date).toISOString().split("T")[0],paymentMethod:"efectivo",balance:n.id,createdAt:Sm()}),kt.success(`Abono de $${mg(r)} realizado exitosamente`)),vt()}catch(s){console.error("Error al procesar abono:",s),kt.error("Error al procesar el abono")}finally{G(!1)}}},children:[(0,Am.jsxs)("div",{className:"space-y-4",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balance"}),(0,Am.jsxs)("select",{value:Ye.balanceId,onChange:e=>Xe({...Ye,balanceId:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,Am.jsx)("option",{value:"",children:"Seleccionar balance"}),Dt.map(e=>(0,Am.jsxs)("option",{value:e.id,children:[e.name," - ",pg(e.currentAmount)]},e.id))]})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto del Abono"}),(0,Am.jsx)("input",{type:"text",value:Ye.amount,onChange:e=>Xe({...Ye,amount:e.target.value}),placeholder:"0",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n (opcional)"}),(0,Am.jsx)("input",{type:"text",value:Ye.description,onChange:e=>Xe({...Ye,description:e.target.value}),placeholder:"Descripci\xf3n del abono",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,Am.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Am.jsx)("button",{type:"submit",disabled:K,className:"flex-1 text-white py-2 px-4 rounded-lg transition-colors "+(K?"bg-green-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:K?"Procesando...":"Realizar Abono"}),(0,Am.jsx)("button",{type:"button",onClick:vt,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),ue&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Crear Balance Futuro"}),(0,Am.jsxs)("form",{onSubmit:async function(t){if(t.preventDefault(),e){W(!0);try{await Nm(yp(Im,"balances"),{userId:e.uid,name:he.name,type:"future",targetMonth:he.targetMonth,description:he.description||"",createdAt:Sm()}),fe({name:"",targetMonth:"",description:""}),de(!1),kt.success("Balance futuro creado exitosamente")}catch(n){kt.error("Error al crear el balance futuro")}finally{W(!1)}}},children:[(0,Am.jsxs)("div",{className:"space-y-4",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Balance"}),(0,Am.jsx)("input",{type:"text",value:he.name,onChange:e=>fe({...he,name:e.target.value}),placeholder:"Ej: Gastos Diciembre 2024",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mes Objetivo"}),(0,Am.jsx)("input",{type:"month",value:he.targetMonth,onChange:e=>fe({...he,targetMonth:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n (opcional)"}),(0,Am.jsx)("textarea",{value:he.description,onChange:e=>fe({...he,description:e.target.value}),placeholder:"Descripci\xf3n del balance futuro",rows:"3",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,Am.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Am.jsx)("button",{type:"submit",disabled:H,className:"flex-1 text-white py-2 px-4 rounded-lg transition-colors "+(H?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:H?"Creando...":"Crear Balance Futuro"}),(0,Am.jsx)("button",{type:"button",onClick:()=>de(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),Fe.show&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:(0,Am.jsx)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform transition-all duration-300 scale-100",children:(0,Am.jsxs)("div",{className:"p-6",children:[(0,Am.jsxs)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 rounded-full bg-blue-100",children:["confirm"===Fe.type&&(0,Am.jsx)(Hm,{className:"h-6 w-6 text-blue-600"}),"info"===Fe.type&&(0,Am.jsx)(Hm,{className:"h-6 w-6 text-blue-600"}),"warning"===Fe.type&&(0,Am.jsx)(Hm,{className:"h-6 w-6 text-yellow-600"}),"error"===Fe.type&&(0,Am.jsx)(Hm,{className:"h-6 w-6 text-red-600"})]}),(0,Am.jsx)("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:Fe.title}),(0,Am.jsx)("p",{className:"text-gray-600 text-center mb-6",children:Fe.message}),(0,Am.jsxs)("div",{className:"flex space-x-3",children:[(0,Am.jsx)("button",{onClick:()=>{Fe.onCancel&&Fe.onCancel(),dt()},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors duration-200 font-medium",children:Fe.cancelText}),(0,Am.jsx)("button",{onClick:()=>{Fe.onConfirm&&Fe.onConfirm(),dt()},className:"flex-1 px-4 py-2 text-white rounded-lg transition-colors duration-200 font-medium "+("error"===Fe.type?"bg-red-600 hover:bg-red-700":"warning"===Fe.type?"bg-yellow-600 hover:bg-yellow-700":"bg-blue-600 hover:bg-blue-700"),children:Fe.confirmText})]})]})})})]})]})}const wg=Mm("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ng=Mm("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),kg=Mm("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),_g=Mm("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function Eg(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function Sg(e){if(""===e||null===e||void 0===e)return"";const t=Number(e.toString().replace(/\D/g,""));return isNaN(t)?"":t.toLocaleString("es-CO")}function Cg(e){return"string"!==typeof e?e:e.replace(/\./g,"").replace(/,/g,"")}function jg(){var e,t;const{roomId:n}=re(),{currentUser:r}=Dm(),i=ne(),[a,o]=(0,s.useState)(null),[l,c]=(0,s.useState)([]),[u,d]=(0,s.useState)([]),[h,f]=(0,s.useState)(!1),[p,m]=(0,s.useState)({description:"",amount:"",paidBy:(null===r||void 0===r?void 0:r.uid)||"",splitBetween:[]}),[g,y]=(0,s.useState)({}),[v,b]=(0,s.useState)(!1),[x,w]=(0,s.useState)(!1),[N,k]=(0,s.useState)(null),[_,E]=(0,s.useState)({}),[S,C]=(0,s.useState)(!1),[j,T]=(0,s.useState)(!1),[I,A]=(0,s.useState)(null),[P,D]=(0,s.useState)(null),[R,O]=(0,s.useState)(!1),[L,M]=(0,s.useState)(!1);function F(e){A(e),T(!0),e.createdBy===r.uid&&D({description:e.description,amount:e.amount.toString(),paidBy:e.paidBy,splitBetween:[...e.splitBetween],memberShares:{...e.memberShares}})}function U(){T(!1),A(null),D(null),y({})}(0,s.useEffect)(()=>{if(!n||!r)return;const e=km(vp(Im,"rooms",n),e=>{if(e.exists()){const t={id:e.id,...e.data()};o(t),t.members&&Promise.all(t.members.map(async e=>{const t=await function(e){e=up(e,mp);const t=up(e.firestore,wp);return np(Np(t),e._key).then(n=>Em(t,e,n))}(vp(Im,"users",e));return t.exists()?{id:e,...t.data()}:{id:e,displayName:"Usuario"}})).then(e=>{d(e);const t={};e.forEach(e=>{e.accounts&&(t[e.id]=e.accounts)}),E(t)})}else kt.error("Sala no encontrada"),i("/dashboard")}),t=km(im(yp(Im,"expenses"),om("roomId","==",n)),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));t.sort((e,t)=>{var n,r,s,i;const a=(null===(n=e.createdAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||e.createdAt||new Date(0);return((null===(s=t.createdAt)||void 0===s||null===(i=s.toDate)||void 0===i?void 0:i.call(s))||t.createdAt||new Date(0))-a}),c(t)});return()=>{e(),t()}},[n,r,i]);const B=function(){if(!l.length||!u.length)return[];const e={};u.forEach(t=>{e[t.id]=0}),l.forEach(t=>{const n=t.paidBy,r=parseFloat(t.amount)||0;void 0!==e[n]&&(e[n]+=r)});const t=Object.entries(e).map(e=>{let[t,n]=e;return{memberId:t,totalPaid:parseFloat(n.toFixed(2)),member:u.find(e=>e.id===t)}});return t}(),V=(function(){if(!l.length||!u.length)return[];const e={};u.forEach(t=>{e[t.id]=0}),l.forEach(t=>{const n=t.paidBy,r=parseFloat(t.amount)||0,s=t.splitBetween.reduce((e,n)=>{var r;return e+((null===(r=t.memberShares)||void 0===r?void 0:r[n])||1)},0),i=s>0?r/s:0;void 0!==e[n]&&(e[n]+=r),t.splitBetween&&Array.isArray(t.splitBetween)&&t.splitBetween.forEach(n=>{if(void 0!==e[n]){var r;const s=(null===(r=t.memberShares)||void 0===r?void 0:r[n])||1,a=i*s;e[n]-=a}})});const t=Object.entries(e).map(e=>{let[t,n]=e;return{memberId:t,balance:parseFloat(n.toFixed(2)),member:u.find(e=>e.id===t)}})}(),function(){const e={};l.forEach(t=>{const n=t.paidBy,r=parseFloat(t.amount)||0;if(!t.splitBetween||!Array.isArray(t.splitBetween))return;const s=t.splitBetween.reduce((e,n)=>{var r;return e+((null===(r=t.memberShares)||void 0===r?void 0:r[n])||1)},0),i=s>0?r/s:0;t.splitBetween.forEach(r=>{if(r!==n){var s;const a=(null===(s=t.memberShares)||void 0===s?void 0:s[r])||1,o=i*a;if(o>.01){const t=`${r}-${n}`;e[t]=(e[t]||0)+o}}})});const t=Object.entries(e).map(e=>{let[t,n]=e;const[r,s]=t.split("-"),i=u.find(e=>e.id===r),a=u.find(e=>e.id===s);return{from:(null===i||void 0===i?void 0:i.displayName)||"Usuario",fromId:r,to:(null===a||void 0===a?void 0:a.displayName)||"Usuario",toId:s,amount:parseFloat(n.toFixed(2))}});return t}()),z=l.reduce((e,t)=>e+(parseFloat(t.amount)||0),0);return a?(0,Am.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Am.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Am.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Am.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Am.jsxs)("button",{onClick:()=>i("/dashboard"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,Am.jsx)(wg,{className:"h-5 w-5"}),(0,Am.jsx)("span",{children:"Volver"})]}),(0,Am.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:a.name})]}),(0,Am.jsx)("div",{className:"flex items-center space-x-4",children:(0,Am.jsxs)("button",{onClick:function(){null!==a&&void 0!==a&&a.code&&(navigator.clipboard.writeText(a.code),b(!0),kt.success("C\xf3digo copiado al portapapeles"),setTimeout(()=>b(!1),2e3))},className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700",children:[v?(0,Am.jsx)(Ng,{className:"h-4 w-4"}):(0,Am.jsx)(kg,{className:"h-4 w-4"}),(0,Am.jsx)("span",{className:"font-mono",children:a.code})]})})]})})}),(0,Am.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Am.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,Am.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Am.jsxs)("div",{className:"flex items-center",children:[(0,Am.jsx)(fg,{className:"h-8 w-8 text-green-600"}),(0,Am.jsxs)("div",{className:"ml-4",children:[(0,Am.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Gastos"}),(0,Am.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:Eg(z)})]})]})}),(0,Am.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Am.jsxs)("div",{className:"flex items-center",children:[(0,Am.jsx)(Ym,{className:"h-8 w-8 text-blue-600"}),(0,Am.jsxs)("div",{className:"ml-4",children:[(0,Am.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Miembros"}),(0,Am.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:u.length})]})]})}),(0,Am.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Am.jsxs)("div",{className:"flex items-center",children:[(0,Am.jsx)(_g,{className:"h-8 w-8 text-orange-600"}),(0,Am.jsxs)("div",{className:"ml-4",children:[(0,Am.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Gastos"}),(0,Am.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:l.length})]})]})})]}),(0,Am.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Am.jsx)("div",{className:"lg:col-span-2",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,Am.jsx)("div",{className:"p-6 border-b",children:(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Gastos"}),(0,Am.jsxs)("button",{onClick:()=>f(!0),disabled:R,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${R?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white`,children:[R?(0,Am.jsx)(tg,{className:"h-4 w-4 animate-spin"}):(0,Am.jsx)(dg,{className:"h-4 w-4"}),(0,Am.jsx)("span",{children:R?"Procesando...":"Agregar Gasto"})]})]})}),(0,Am.jsx)("div",{className:"p-6",children:0===l.length?(0,Am.jsxs)("div",{className:"text-center py-8",children:[(0,Am.jsx)(fg,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,Am.jsx)("p",{className:"text-gray-600",children:"No hay gastos registrados"})]}):(0,Am.jsx)("div",{className:"space-y-4",children:l.map(e=>{const t=u.find(t=>t.id===e.paidBy);return(0,Am.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,Am.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Am.jsxs)("div",{className:"flex-1 cursor-pointer",onClick:()=>F(e),children:[(0,Am.jsx)("h3",{className:"font-medium text-gray-900 hover:text-blue-600",children:e.description}),(0,Am.jsxs)("p",{className:"text-sm text-gray-600",children:["Pagado por: ",(null===t||void 0===t?void 0:t.displayName)||"Usuario"]}),(0,Am.jsxs)("p",{className:"text-sm text-gray-600",children:["Dividido entre: ",e.splitBetween.length," personas",e.memberShares&&Object.keys(e.memberShares).length>0&&(0,Am.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",Object.entries(e.memberShares).map(e=>{let[t,n]=e;const r=u.find(e=>e.id===t);return`${(null===r||void 0===r?void 0:r.displayName)||"Usuario"} ${n}x`}).join(", "),")"]})]})]}),(0,Am.jsxs)("div",{className:"text-right cursor-pointer",onClick:()=>F(e),children:[(0,Am.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:Eg(e.amount)}),(0,Am.jsxs)("p",{className:"text-sm text-gray-600",children:[Eg(e.splitAmount)," c/u"]})]}),e.createdBy===r.uid&&(0,Am.jsx)("button",{onClick:t=>{t.stopPropagation(),async function(e){if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este gasto?"))try{await wm(vp(Im,"expenses",e)),kt.success("Gasto eliminado")}catch(t){kt.error("Error al eliminar el gasto")}}(e.id)},className:"ml-4 text-red-600 hover:text-red-700",children:(0,Am.jsx)(og,{className:"h-4 w-4"})})]})},e.id)})})})]})}),(0,Am.jsx)("div",{className:"lg:col-span-1",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,Am.jsx)("div",{className:"p-6 border-b",children:(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:S?"Deudas Individuales":"Resumen de Pagos"}),(0,Am.jsxs)("button",{onClick:()=>C(!S),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[(0,Am.jsx)(Fm,{className:"h-4 w-4"}),(0,Am.jsx)("span",{children:S?"Ver pagos":"Ver deudas"})]})]})}),(0,Am.jsx)("div",{className:"p-6",children:S?(0,Am.jsx)("div",{className:"space-y-3",children:V.length>0?V.map((e,t)=>(0,Am.jsx)("div",{className:"border rounded-lg p-3 bg-red-50 border-red-200",children:(0,Am.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Am.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,Am.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[(0,Am.jsx)("strong",{children:e.from})," le debe a ",(0,Am.jsx)("strong",{children:e.to})]})]}),(0,Am.jsx)("div",{className:"flex items-center space-x-2",children:(0,Am.jsx)("span",{className:"text-sm font-semibold text-red-600",children:Eg(e.amount)})})]})},t)):(0,Am.jsxs)("div",{className:"text-center py-4",children:[(0,Am.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,Am.jsx)(Ng,{className:"h-6 w-6 text-green-600"})}),(0,Am.jsx)("p",{className:"text-sm text-gray-600",children:"\xa1Todas las deudas est\xe1n saldadas!"})]})}):(0,Am.jsx)("div",{className:"space-y-4",children:B.map(e=>{var t;let{memberId:n,totalPaid:s,member:i}=e;return(0,Am.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Am.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(null===i||void 0===i?void 0:i.displayName)||"Usuario"}),(0,Am.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:[Eg(s)," pagado"]})]}),_[n]&&_[n].length>0&&(0,Am.jsx)("div",{className:"mt-2 space-y-1",children:_[n].map((e,t)=>(0,Am.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 bg-gray-50 p-2 rounded",children:[(0,Am.jsxs)("span",{children:[(0,Am.jsxs)("strong",{children:[e.type,":"]})," ",e.info]}),(0,Am.jsx)("button",{onClick:()=>{return t=e.info,navigator.clipboard.writeText(t),void kt.success("Informaci\xf3n copiada al portapapeles");var t},className:"text-blue-600 hover:text-blue-800",children:(0,Am.jsx)(kg,{className:"h-3 w-3"})})]},t))}),n===r.uid&&(0,Am.jsx)("div",{className:"mt-2 flex justify-end",children:(0,Am.jsxs)("button",{onClick:()=>function(e){k(e),w(!0)}(i),className:"text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[(0,Am.jsx)(Fm,{className:"h-3 w-3"}),(0,Am.jsx)("span",{children:(null===(t=_[n])||void 0===t?void 0:t.length)>0?"Editar cuentas":"Agregar cuentas"})]})})]},n)})})})]})})]}),h&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Agregar Gasto"}),(0,Am.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),!R)if(p.description&&p.amount&&0!==p.splitBetween.length){O(!0);try{const e=parseFloat(p.amount),t=p.splitBetween.reduce((e,t)=>e+(g[t]||1),0),s=e/t;await Nm(yp(Im,"expenses"),{roomId:n,description:p.description,amount:e,paidBy:p.paidBy,splitBetween:p.splitBetween,splitAmount:s,memberShares:g,totalShares:t,createdBy:r.uid,createdAt:Sm()}),m({description:"",amount:"",paidBy:r.uid,splitBetween:[]}),y({}),f(!1),kt.success("Gasto agregado exitosamente")}catch(t){kt.error("Error al agregar el gasto")}finally{O(!1)}}else kt.error("Por favor completa todos los campos")},children:[(0,Am.jsxs)("div",{className:"space-y-4",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,Am.jsx)("input",{type:"text",value:p.description,onChange:e=>m({...p,description:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Cena, Transporte, etc.",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto"}),(0,Am.jsx)("input",{type:"text",inputMode:"numeric",value:Sg(p.amount),onChange:e=>{const t=Cg(e.target.value);/^\d*$/.test(t)&&m({...p,amount:t})},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pagado por"}),(0,Am.jsx)("select",{value:p.paidBy,onChange:e=>m({...p,paidBy:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:u.map(e=>(0,Am.jsx)("option",{value:e.id,children:e.displayName||"Usuario"},e.id))})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dividir entre"}),(0,Am.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,Am.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Am.jsxs)("label",{className:"flex items-center",children:[(0,Am.jsx)("input",{type:"checkbox",checked:p.splitBetween.includes(e.id),onChange:t=>{const n=t.target.checked?[...p.splitBetween,e.id]:p.splitBetween.filter(t=>t!==e.id);if(m({...p,splitBetween:n}),!t.target.checked){const t={...g};delete t[e.id],y(t)}},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,Am.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.displayName||"Usuario"})]}),p.splitBetween.includes(e.id)&&(0,Am.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Am.jsx)("span",{className:"text-xs text-gray-500",children:"Participaciones:"}),(0,Am.jsxs)("select",{value:g[e.id]||1,onChange:t=>{const n=parseInt(t.target.value);y({...g,[e.id]:n})},className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,Am.jsx)("option",{value:1,children:"1x"}),(0,Am.jsx)("option",{value:2,children:"2x"}),(0,Am.jsx)("option",{value:3,children:"3x"}),(0,Am.jsx)("option",{value:4,children:"4x"}),(0,Am.jsx)("option",{value:5,children:"5x"}),(0,Am.jsx)("option",{value:6,children:"6x"})]})]})]},e.id))})]})]}),(0,Am.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Am.jsxs)("button",{type:"submit",disabled:R,className:"flex-1 flex items-center justify-center space-x-2 text-white py-2 px-4 rounded-lg transition-colors "+(R?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:[R&&(0,Am.jsx)(tg,{className:"h-4 w-4 animate-spin"}),(0,Am.jsx)("span",{children:R?"Agregando...":"Agregar"})]}),(0,Am.jsx)("button",{type:"button",onClick:()=>f(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})]})}),j&&I&&(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold",children:P?"Editar Gasto":"Detalles del Gasto"}),(0,Am.jsx)("button",{onClick:U,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Am.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Am.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),P?(0,Am.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),P&&I)if(P.description&&P.amount&&0!==P.splitBetween.length)try{const e=parseFloat(P.amount),t=P.splitBetween.reduce((e,t)=>e+(P.memberShares[t]||1),0),n=e/t;await xm(vp(Im,"expenses",I.id),{description:P.description,amount:e,paidBy:P.paidBy,splitBetween:P.splitBetween,splitAmount:n,memberShares:P.memberShares,totalShares:t,updatedAt:Sm()}),U(),kt.success("Gasto actualizado exitosamente")}catch(t){kt.error("Error al actualizar el gasto")}else kt.error("Por favor completa todos los campos")},children:[(0,Am.jsxs)("div",{className:"space-y-4",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,Am.jsx)("input",{type:"text",value:P.description,onChange:e=>D({...P,description:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Cena, Transporte, etc.",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto"}),(0,Am.jsx)("input",{type:"text",inputMode:"numeric",value:Sg(P.amount),onChange:e=>{const t=Cg(e.target.value);/^\d*$/.test(t)&&D({...P,amount:t})},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",required:!0})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pagado por"}),(0,Am.jsx)("select",{value:P.paidBy,onChange:e=>D({...P,paidBy:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:u.map(e=>(0,Am.jsx)("option",{value:e.id,children:e.displayName||"Usuario"},e.id))})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Am.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Dividir entre"}),(0,Am.jsxs)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:[P.splitBetween.length," persona",1!==P.splitBetween.length?"s":""," seleccionada",1!==P.splitBetween.length?"s":""]})]}),(0,Am.jsx)("div",{className:"space-y-3 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3",children:u.map(e=>(0,Am.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[(0,Am.jsxs)("label",{className:"flex items-center flex-1",children:[(0,Am.jsx)("input",{type:"checkbox",checked:P.splitBetween.includes(e.id),onChange:t=>{const n=t.target.checked?[...P.splitBetween,e.id]:P.splitBetween.filter(t=>t!==e.id),r={...P.memberShares};t.target.checked?r[e.id]=1:delete r[e.id],D({...P,splitBetween:n,memberShares:r})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3"}),(0,Am.jsx)("span",{className:"text-sm text-gray-700 font-medium",children:e.displayName||"Usuario"})]}),P.splitBetween.includes(e.id)&&(0,Am.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Am.jsx)("span",{className:"text-xs text-gray-500",children:"Participaciones:"}),(0,Am.jsxs)("select",{value:P.memberShares[e.id]||1,onChange:t=>{const n=parseInt(t.target.value);D({...P,memberShares:{...P.memberShares,[e.id]:n}})},className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Am.jsx)("option",{value:1,children:"1x"}),(0,Am.jsx)("option",{value:2,children:"2x"}),(0,Am.jsx)("option",{value:3,children:"3x"}),(0,Am.jsx)("option",{value:4,children:"4x"}),(0,Am.jsx)("option",{value:5,children:"5x"}),(0,Am.jsx)("option",{value:6,children:"6x"})]})]})]},e.id))})]})]}),(0,Am.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Am.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700",children:"Actualizar"}),(0,Am.jsx)("button",{type:"button",onClick:U,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]}):(0,Am.jsxs)("div",{className:"space-y-4",children:[(0,Am.jsxs)("div",{children:[(0,Am.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Descripci\xf3n"}),(0,Am.jsx)("p",{className:"text-lg text-gray-900",children:I.description})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Monto Total"}),(0,Am.jsx)("p",{className:"text-2xl font-semibold text-green-600",children:Eg(I.amount)})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Pagado por"}),(0,Am.jsx)("p",{className:"text-gray-900",children:(null===(e=u.find(e=>e.id===I.paidBy))||void 0===e?void 0:e.displayName)||"Usuario"})]}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Dividido entre"}),(0,Am.jsx)("div",{className:"space-y-2",children:I.splitBetween.map(e=>{var t;const n=u.find(t=>t.id===e),r=(null===(t=I.memberShares)||void 0===t?void 0:t[e])||1,s=I.amount/I.totalShares*r;return(0,Am.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded",children:[(0,Am.jsxs)("span",{className:"text-sm text-gray-900",children:[(null===n||void 0===n?void 0:n.displayName)||"Usuario",r>1&&(0,Am.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",r,"x)"]})]}),(0,Am.jsx)("span",{className:"text-sm font-medium text-gray-900",children:Eg(s)})]},e)})})]}),(0,Am.jsxs)("div",{className:"border-t pt-4",children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Creado por"}),(0,Am.jsx)("span",{className:"text-sm text-gray-900",children:(null===(t=u.find(e=>e.id===I.createdBy))||void 0===t?void 0:t.displayName)||"Usuario"})]}),I.createdAt&&(0,Am.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,Am.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Fecha"}),(0,Am.jsx)("span",{className:"text-sm text-gray-900",children:I.createdAt.toDate().toLocaleDateString()})]})]}),(0,Am.jsxs)("div",{className:"flex space-x-3 mt-6",children:[I.createdBy===r.uid&&(0,Am.jsx)("button",{onClick:()=>{D({description:I.description,amount:I.amount.toString(),paidBy:I.paidBy,splitBetween:[...I.splitBetween],memberShares:{...I.memberShares}})},className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700",children:"Editar"}),(0,Am.jsx)("button",{onClick:U,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cerrar"})]})]})]})}),x&&N&&(0,Am.jsx)(Tg,{member:N,accounts:_[N.id]||[],onSave:async function(e){if(N)try{await xm(vp(Im,"users",N.id),{accounts:e}),E(t=>({...t,[N.id]:e})),w(!1),k(null),kt.success("Cuentas actualizadas correctamente")}catch(t){kt.error("Error al actualizar las cuentas")}},onClose:()=>{w(!1),k(null)},isOwner:N.id===r.uid})]})]}):(0,Am.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Am.jsxs)("div",{className:"text-center",children:[(0,Am.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Am.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando sala..."})]})})}function Tg(e){let{member:t,accounts:n,onSave:r,onClose:i,isOwner:a}=e;const[o,l]=(0,s.useState)(n||[]),c=(e,t,n)=>{const r=o.map((r,s)=>s===e?{...r,[t]:n}:r);l(r)};return(0,Am.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-96 overflow-y-auto",children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold",children:a?"Mis Cuentas":`Cuentas de ${t.displayName||"Usuario"}`}),(0,Am.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Am.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Am.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a?(0,Am.jsxs)("div",{className:"space-y-4",children:[o.map((e,t)=>(0,Am.jsx)("div",{className:"border rounded-lg p-3",children:(0,Am.jsxs)("div",{className:"space-y-2",children:[(0,Am.jsxs)("select",{value:e.type,onChange:e=>c(t,"type",e.target.value),className:"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Am.jsx)("option",{value:"",children:"Seleccionar tipo"}),(0,Am.jsxs)("optgroup",{label:"Bancos Colombianas",children:[(0,Am.jsx)("option",{value:"Bancolombia",children:"Bancolombia"}),(0,Am.jsx)("option",{value:"BBVA Colombia",children:"BBVA Colombia"}),(0,Am.jsx)("option",{value:"Davivienda",children:"Davivienda"}),(0,Am.jsx)("option",{value:"Colpatria",children:"Colpatria"}),(0,Am.jsx)("option",{value:"Scotiabank Colpatria",children:"Scotiabank Colpatria"}),(0,Am.jsx)("option",{value:"Citibank Colombia",children:"Citibank Colombia"}),(0,Am.jsx)("option",{value:"HSBC Colombia",children:"HSBC Colombia"}),(0,Am.jsx)("option",{value:"Banco de Bogot\xe1",children:"Banco de Bogot\xe1"}),(0,Am.jsx)("option",{value:"Banco Popular",children:"Banco Popular"}),(0,Am.jsx)("option",{value:"Banco AV Villas",children:"Banco AV Villas"}),(0,Am.jsx)("option",{value:"Banco Caja Social",children:"Banco Caja Social"}),(0,Am.jsx)("option",{value:"Banco Falabella",children:"Banco Falabella"}),(0,Am.jsx)("option",{value:"Banco Pichincha",children:"Banco Pichincha"}),(0,Am.jsx)("option",{value:"Banco Santander",children:"Banco Santander"}),(0,Am.jsx)("option",{value:"Banco Agrario",children:"Banco Agrario"}),(0,Am.jsx)("option",{value:"Banco Cooperativo Coopcentral",children:"Banco Cooperativo Coopcentral"})]}),(0,Am.jsxs)("optgroup",{label:"Billeteras Digitales",children:[(0,Am.jsx)("option",{value:"Nequi",children:"Nequi"}),(0,Am.jsx)("option",{value:"Daviplata",children:"Daviplata"}),(0,Am.jsx)("option",{value:"Movii",children:"Movii"}),(0,Am.jsx)("option",{value:"Lulo Bank",children:"Lulo Bank"}),(0,Am.jsx)("option",{value:"RappiPay",children:"RappiPay"})]}),(0,Am.jsxs)("optgroup",{label:"Internacionales",children:[(0,Am.jsx)("option",{value:"PayPal",children:"PayPal"}),(0,Am.jsx)("option",{value:"Wise",children:"Wise"}),(0,Am.jsx)("option",{value:"Remitly",children:"Remitly"}),(0,Am.jsx)("option",{value:"Western Union",children:"Western Union"})]}),(0,Am.jsx)("option",{value:"Efectivo",children:"Efectivo"}),(0,Am.jsx)("option",{value:"Otro",children:"Otro"})]}),(0,Am.jsx)("input",{type:"text",value:e.info,onChange:e=>c(t,"info",e.target.value),placeholder:e.type.includes("Banco")?"N\xfamero de cuenta bancaria":"Nequi"===e.type||"Daviplata"===e.type||"Movii"===e.type?"N\xfamero de celular":"PayPal"===e.type?"Email de PayPal":"Efectivo"===e.type?"Descripci\xf3n (ej: Efectivo en mano)":"Informaci\xf3n de la cuenta",className:"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Am.jsx)("button",{onClick:()=>(e=>{l(o.filter((t,n)=>n!==e))})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"Eliminar"})]})},t)),(0,Am.jsx)("button",{onClick:()=>{l([...o,{type:"",info:""}])},className:"w-full p-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-600",children:"+ Agregar cuenta"}),(0,Am.jsxs)("div",{className:"flex space-x-2 mt-6",children:[(0,Am.jsx)("button",{onClick:()=>{const e=o.filter(e=>e.type.trim()&&e.info.trim());r(e)},className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700",children:"Guardar"}),(0,Am.jsx)("button",{onClick:i,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]}):(0,Am.jsxs)("div",{className:"space-y-4",children:[n.length>0?n.map((e,t)=>(0,Am.jsx)("div",{className:"border rounded-lg p-4 bg-gray-50 hover:bg-gray-100 transition-colors",children:(0,Am.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Am.jsxs)("div",{className:"flex-1",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Am.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.type}),(0,Am.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:e.type.includes("Banco")?"Bancario":"Nequi"===e.type||"Daviplata"===e.type||"Movii"===e.type?"Digital":"Efectivo"===e.type?"F\xedsico":"Otro"})]}),(0,Am.jsx)("p",{className:"text-sm text-gray-600 break-all",children:e.info})]}),(0,Am.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e.info),kt.success("Informaci\xf3n copiada al portapapeles")},className:"ml-3 p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Copiar informaci\xf3n",children:(0,Am.jsx)(kg,{className:"h-4 w-4"})})]})},t)):(0,Am.jsxs)("div",{className:"text-center py-8",children:[(0,Am.jsx)("div",{className:"text-gray-400 mb-2",children:(0,Am.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Am.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,Am.jsx)("p",{className:"text-gray-600 mb-1",children:"Este usuario no ha agregado cuentas a\xfan"}),(0,Am.jsx)("p",{className:"text-sm text-gray-500",children:"Las cuentas permiten recibir pagos de manera m\xe1s f\xe1cil"})]}),(0,Am.jsx)("button",{onClick:i,className:"w-full bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cerrar"})]})]})})}const Ig=Mm("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function Ag(){var e,t;const{code:n}=re(),{currentUser:r}=Dm(),i=ne(),[a,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0),[u,d]=(0,s.useState)(!1);function h(){i("/dashboard")}return(0,s.useEffect)(()=>{n&&r&&async function(){try{const e=im(yp(Im,"rooms"),om("code","==",n.toUpperCase())),t=await function(e){e=up(e,pp);const t=up(e.firestore,wp),n=Np(t),r=new bm(t);return nm(e._query),rp(n,e._query).then(n=>new ym(t,r,e,n))}(e);if(t.empty)return kt.error("C\xf3digo de sala inv\xe1lido"),void i("/dashboard");const s=t.docs[0],a={id:s.id,...s.data()};if(a.members&&a.members.includes(r.uid))return kt.info("Ya eres miembro de esta sala"),void i(`/room/${a.id}`);o(a)}catch(e){kt.error("Error al buscar la sala"),i("/dashboard")}finally{c(!1)}}()},[n,r,i]),l?(0,Am.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Am.jsxs)("div",{className:"text-center",children:[(0,Am.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Am.jsx)("p",{className:"mt-4 text-gray-600",children:"Verificando c\xf3digo..."})]})}):a?(0,Am.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Am.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Am.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Am.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,Am.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Am.jsxs)("button",{onClick:h,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,Am.jsx)(wg,{className:"h-5 w-5"}),(0,Am.jsx)("span",{children:"Volver"})]}),(0,Am.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Unirse a Sala"})]})})})}),(0,Am.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Am.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,Am.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-8 text-white",children:(0,Am.jsxs)("div",{className:"text-center",children:[(0,Am.jsx)(Ym,{className:"h-16 w-16 mx-auto mb-4"}),(0,Am.jsx)("h2",{className:"text-2xl font-bold mb-2",children:a.name}),(0,Am.jsxs)("p",{className:"text-blue-100",children:["C\xf3digo: ",a.code]})]})}),(0,Am.jsx)("div",{className:"p-6",children:(0,Am.jsxs)("div",{className:"space-y-6",children:[(0,Am.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalles de la Sala"}),(0,Am.jsxs)("div",{className:"space-y-3",children:[(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsx)("span",{className:"text-gray-600",children:"Nombre:"}),(0,Am.jsx)("span",{className:"font-medium text-gray-900",children:a.name})]}),(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsx)("span",{className:"text-gray-600",children:"C\xf3digo:"}),(0,Am.jsx)("span",{className:"font-mono font-medium text-gray-900",children:a.code})]}),(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsx)("span",{className:"text-gray-600",children:"Miembros actuales:"}),(0,Am.jsx)("span",{className:"font-medium text-gray-900",children:(null===(e=a.members)||void 0===e?void 0:e.length)||0})]}),(0,Am.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Am.jsx)("span",{className:"text-gray-600",children:"Creada:"}),(0,Am.jsx)("span",{className:"font-medium text-gray-900",children:null!==(t=a.createdAt)&&void 0!==t&&t.toDate?a.createdAt.toDate().toLocaleDateString():"Reciente"})]})]})]}),(0,Am.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,Am.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"\xbfQu\xe9 puedes hacer en esta sala?"}),(0,Am.jsxs)("div",{className:"space-y-3",children:[(0,Am.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Am.jsx)(Ng,{className:"h-5 w-5 text-green-600"}),(0,Am.jsx)("span",{className:"text-blue-800",children:"Agregar y gestionar gastos"})]}),(0,Am.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Am.jsx)(Ng,{className:"h-5 w-5 text-green-600"}),(0,Am.jsx)("span",{className:"text-blue-800",children:"Ver balance de deudas en tiempo real"})]}),(0,Am.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Am.jsx)(Ng,{className:"h-5 w-5 text-green-600"}),(0,Am.jsx)("span",{className:"text-blue-800",children:"Compartir gastos equitativamente"})]}),(0,Am.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Am.jsx)(Ng,{className:"h-5 w-5 text-green-600"}),(0,Am.jsx)("span",{className:"text-blue-800",children:"Sincronizaci\xf3n autom\xe1tica con todos los miembros"})]})]})]}),(0,Am.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,Am.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Am.jsx)(_g,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,Am.jsxs)("div",{children:[(0,Am.jsx)("h4",{className:"text-sm font-medium text-yellow-800",children:"Informaci\xf3n importante"}),(0,Am.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"Al unirte a esta sala, tendr\xe1s acceso a todos los gastos y podr\xe1s agregar nuevos. Aseg\xfarate de que el c\xf3digo sea correcto antes de continuar."})]})]})}),(0,Am.jsxs)("div",{className:"flex space-x-4",children:[(0,Am.jsx)("button",{onClick:async function(){if(a&&r)try{d(!0),await xm(vp(Im,"rooms",a.id),{members:Cm(r.uid)}),await function(e,t,n){e=up(e,mp);const r=up(e.firestore,wp),s=fm(e.converter,t,n);return _m(r,[Lp(Op(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,ou.none())])}(vp(Im,"users",r.uid),{displayName:r.displayName||"Usuario",email:r.email,uid:r.uid,joinedAt:new Date},{merge:!0}),kt.success("\xa1Te has unido a la sala exitosamente!"),i(`/room/${a.id}`)}catch(e){kt.error("Error al unirse a la sala")}finally{d(!1)}},disabled:u,className:"flex-1 flex items-center justify-center space-x-2 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?(0,Am.jsxs)(Am.Fragment,{children:[(0,Am.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,Am.jsx)("span",{children:"Uni\xe9ndose..."})]}):(0,Am.jsxs)(Am.Fragment,{children:[(0,Am.jsx)(Ig,{className:"h-5 w-5"}),(0,Am.jsx)("span",{children:"Unirse a la Sala"})]})}),(0,Am.jsxs)("button",{onClick:h,className:"flex-1 flex items-center justify-center space-x-2 bg-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:[(0,Am.jsx)(hg,{className:"h-5 w-5"}),(0,Am.jsx)("span",{children:"Cancelar"})]})]})]})})]})})]}):null}const Pg=function(){return(0,Am.jsx)(ke,{children:(0,Am.jsx)(Rm,{children:(0,Am.jsxs)("div",{className:"App",children:[(0,Am.jsxs)(xe,{children:[(0,Am.jsx)(ve,{path:"/",element:(0,Am.jsx)($m,{})}),(0,Am.jsx)(ve,{path:"/dashboard",element:(0,Am.jsx)(Om,{children:(0,Am.jsx)(xg,{})})}),(0,Am.jsx)(ve,{path:"/room/:roomId",element:(0,Am.jsx)(Om,{children:(0,Am.jsx)(jg,{})})}),(0,Am.jsx)(ve,{path:"/join/:code",element:(0,Am.jsx)(Om,{children:(0,Am.jsx)(Ag,{})})}),(0,Am.jsx)(ve,{path:"*",element:(0,Am.jsx)(ye,{to:"/"})})]}),(0,Am.jsx)(Nt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:4e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})})})};a.createRoot(document.getElementById("root")).render((0,Am.jsx)(s.StrictMode,{children:(0,Am.jsx)(Pg,{})}))})();
//# sourceMappingURL=main.952a3409.js.map